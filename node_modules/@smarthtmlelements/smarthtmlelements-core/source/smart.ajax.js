
/* Smart HTML Elements v1.1.0 (2018-June) 
Copyright (c) 2011-2018 jQWidgets. 
License: https://htmlelements.com/license/ */

function Ajax(a,b){let c="GET",d=a.url,e=null,f=!0;if(a.type&&(c=a.type),a.data)if("GET"===c){for(let b in d+="?",a.data)a.data.hasOwnProperty(b)&&(d+=encodeURI(b+"="+a.data[b]+"&"));"&"===d.charAt(d.length-1)&&(d=d.slice(0,d.length-1))}else"POST"===c&&(e=JSON.stringify(a.data));b&&!1===b.async&&(f=!1),void 0!==window.fetch&&f?AjaxFetch(a,b,c,d,e):AjaxXMLHttpRequest(a,b,c,d,e,f)}function AjaxFetch(a,b,c,d,e){const f={method:c},g="json"===a.dataType?"json":"text";b&&b.contentType&&(f.headers=new Headers({"Content-Type":b.contentType})),null!==e&&(f.body=e);let h,i,j;if(a.timeout&&(i=setTimeout(function(){j=!0},a.timeout)),b.beforeSend){const a=b.beforeSend(f,b);if(!1===a)return}fetch(d,f).then(function(a){if(j)throw h=408,new Error("timeout");if(i&&clearTimeout(i),h=a.status,!a.ok)throw new Error(a.statusText);return a[g]()}).then(function(a){if(b){if(b.beforeLoadComplete){const c=b.beforeLoadComplete(a);c&&(a=c)}b.loadComplete&&b.loadComplete(a,h)}}).catch(function(a){b&&b.loadError&&b.loadError(h,a)})}function AjaxXMLHttpRequest(a,b,c,d,e,f){const g=new XMLHttpRequest;if(g.open(c,d,f),g.ontimeout=function(){b&&b.loadError&&b.loadError(408,"timeout")},g.onload=function(){if(4===g.readyState){const c=g.status;let d=g.response;if(!(200<=c&&299>=c))b&&b.loadError&&b.loadError(c,d);else if("json"===a.dataType&&(d=JSON.parse(d)),b){if(b.beforeLoadComplete){const a=b.beforeLoadComplete(d);a&&(d=a)}b.loadComplete&&b.loadComplete(d,c)}}},g.onerror=function(){b&&b.loadError&&b.loadError(g.status,g.response)},b&&b.contentType&&g.setRequestHeader("Content-Type",b.contentType),f&&a.timeout&&(g.timeout=a.timeout),b.beforeSend){const a=b.beforeSend(g,b);if(!1===a)return}g.send(e)}