
/* Smart HTML Elements v1.1.0 (2018-June) 
Copyright (c) 2011-2018 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-drop-down-list",class extends Smart.ContentElement{static get properties(){return{dataSource:{value:null,type:"any",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},dropDownAppendTo:{value:null,type:"any"},dropDownButtonPosition:{allowedValues:["left","right","top","bottom"],value:"right",type:"string"},dropDownHeight:{value:"",type:"string"},dropDownOpenMode:{allowedValues:["none","default","dropDownButton","auto"],value:"default",type:"string"},dropDownPlaceholder:{value:"No Items",type:"string"},dropDownPosition:{allowedValues:["auto","top","bottom","overlay-top","overlay-center","overlay-bottom","center-bottom","center-top"],value:"auto",type:"string"},dropDownWidth:{value:"",type:"string"},filterable:{value:!1,type:"boolean"},filterInputPlaceholder:{value:"",type:"string"},filterMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},hint:{value:"",type:"string"},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},label:{value:"",type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{invalidNode:"{{elementType}}: Invalid parameter \"{{node}}\" when calling {{method}}."}},type:"object"},name:{value:"",type:"string"},opened:{value:!1,type:"boolean"},placeholder:{value:"",type:"string"},resizeMode:{value:"none",allowedValues:["none","horizontal","vertical","both"],type:"string"},resizeIndicator:{value:!1,type:"boolean"},selectionDisplayMode:{value:"plain",allowedValues:["plain","placeholder","tokens"],type:"string"},selectionMode:{value:"one",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},sorted:{value:!1,type:"boolean"},tokenTemplate:{value:null,type:"any"},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"}}}static get listeners(){return{"actionButton.down":"_buttonsDownHandler","actionButton.mouseenter":"_buttonsMouseEventsHandler","actionButton.mouseleave":"_buttonsMouseEventsHandler","document.selectstart":"_selectStartHandler","document.dragstart":"_dragStartHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler","document.move":"_documentMoveHandler","dropDownButton.down":"_buttonsDownHandler","dropDownButton.mouseenter":"_buttonsMouseEventsHandler","dropDownButton.mouseleave":"_buttonsMouseEventsHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",blur:"_focusEventHandler","dropDownButton.blur":"_focusEventHandler","listBox.change":"_listBoxChangeHandler","listBox.keydown":"_listBoxKeyDownHandler","listBox.bindingComplete":"_bindingCompleteHandler",mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler",resize:"_resizeHandler",styleChanged:"_styleChangedHandler"}}template(){return`<div id="container">
                    <span class="smart-label" id="label">[[label]]</span>
                    <div id="content" class="smart-content">
                        <span id="actionButton" class="smart-action-button"></span>
                        <span id="dropDownButton" class="smart-drop-down-button">
                            <span id="arrow"></span>
                        </span>
                        <div id="dropDownContainer" class="smart-drop-down smart-visibility-hidden">
                            <smart-list-box id="listBox" unfocusable
                                    data-source="[[dataSource]]"
                                    disabled="[[disabled]]"
                                    display-loading-indicator="[[displayLoadingIndicator]]"
                                    display-member="[[displayMember]]"
                                    filterable="[[filterable]]"
                                    filter-mode="[[filterMode]]"
                                    filter-input-placeholder="[[filterInputPlaceholder]]"
                                    grouped="[[grouped]]"
                                    group-member="[[groupMember]]"
                                    item-height="[[itemHeight]]"
                                    item-template="[[itemTemplate]]"
                                    incremental-search-delay="[[incrementalSearchDelay]]"
                                    incremental-search-mode="[[incrementalSearchMode]]"
                                    loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"
                                    loading-indicator-position="[[loadingIndicatorPosition]]"
                                    name="[[name]]"
                                    placeholder="[[dropDownPlaceholder]]"
                                    readonly="[[readonly]]"
                                    selected-indexes="{{selectedIndexes}}"
                                    selection-mode="[[selectionMode]]"
                                    selected-values="{{selectedValues}}"
                                    sorted="[[sorted]]"
                                    value-member="[[valueMember]]"
                                    virtualized="[[virtualized]]">
                                <content></content>
                            </smart-list-box>
                            <div id="resizeBar" class="smart-drop-down-resize-bar">
                                <div></div>
                            </div>
                         </div>
                    </div>
                    <span class="smart-hint" id="hint">[[hint]]</span>
                </div>`}propertyChangedHandler(a,b,c){super.propertyChangedHandler(a,b,c);const d=this;switch(a){case"disabled":d._setFocusable(),d.close();break;case"dataSource":case"displayMember":d.$.actionButton&&(d.$.actionButton.innerHTML=d.placeholder),d._setDropDownSize(),d._checkBrowserBounds("vertically"),d.dropDownAppendTo&&0<d.dropDownAppendTo.length&&d._rePositionListBox(),d._checkBrowserBounds("horizontally");break;case"dropDownAppendTo":d._setElementParent(c);break;case"dropDownOpenMode":d._setFocusable(),d.$dropDownContainer.addClass("smart-visibility-hidden"),d.$.dropDownButton.removeAttribute("selected");break;case"dropDownPosition":d.$.dropDownContainer.removeAttribute(d._dropDownListPosition),d._setDropDownPosition(c),d._rePositionListBox();break;case"dropDownWidth":case"dropDownHeight":d._setDropDownSize();break;case"opened":if(d.disabled||d.readonly)return;c?d.open():d.close();break;case"placeholder":d._applySelection();break;case"readonly":d.close();break;case"resizeIndicator":c?d.$.dropDownContainer.setAttribute("resize-indicator",""):d.$.dropDownContainer.removeAttribute("resize-indicator");break;case"resizeMode":d.$.dropDownContainer.setAttribute("resize-mode",d.resizeMode);break;case"selectedValues":case"selectedIndexes":0===c.length&&(d.$.actionButton.innerHTML=d.placeholder);break;case"selectionDisplayMode":d._applySelection();break;case"tokenTemplate":d._tokenTemplate=d._validateTemplate(d.tokenTemplate),d._applySelection();break;case"unfocusable":d._setFocusable();}}appendChild(a){const b=this;if(!b.isCompleted||a instanceof HTMLElement&&a.classList.contains("smart-resize-trigger-container")){const a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(b,a.concat(Array.prototype.slice.call(arguments)))}return a?void b.$.listBox.appendChild(a):void b.error(b.localize("invalidNode",{elementType:b.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}attached(){const a=this;super.attached();a.$.listBox&&(a.dropDownAppendTo&&0<a.dropDownAppendTo.length&&(a._setElementParent(a.dropDownAppendTo),a._setDropDownSize()),"auto"===a.dropDownPosition&&a._checkBrowserBounds())}detached(){const a=this;super.detached();!a.$.dropDownContainer||a.dropDownAppendTo&&0<a.dropDownAppendTo.length&&a.$.dropDownContainer.parentElement&&a.$.dropDownContainer.parentElement.removeChild(a.$.dropDownContainer)}clearItems(){const a=this;a.$.listBox.clearItems(),a.$.actionButton.innerHTML=a.placeholder}clearSelection(){const a=this;a.$.listBox.clearSelection(),a.$.actionButton.innerHTML=a.placeholder}close(){const a=this;if(!a.$dropDownContainer.hasClass("smart-visibility-hidden")){const b=a.$.fireEvent("closing").defaultPrevented;b||(a.$dropDownContainer.addClass("smart-visibility-hidden"),a.$.fireEvent("close"),a.$.dropDownButton&&a.$.dropDownButton.removeAttribute("selected"),a.opened=!1,a._preventDropDownClose=!1)}}cloneNode(){const a=this;let b=HTMLElement.prototype.cloneNode.apply(a,Array.prototype.slice.call(arguments,0,1));return b.dataSource=a.dataSource,b}ensureVisible(a){this.$.listBox.ensureVisible(a)}getItem(a){return this.$.listBox.getItem(a)}get items(){return this.$?this.$.listBox.items:void 0}insert(a,b){const c=this;c.$.listBox.insert(a,b),c._applySelection()}insertBefore(a,b){const c=this;if(!c.isCompleted){const a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(c,a.concat(Array.prototype.slice.call(arguments)))}return a&&b?void c.$.listBox.insertBefore(a,b):void c.error(c.localize("invalidNode",{elementType:c.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}))}open(){const a=this,b=function(){for(let b=0;b<a.items.length;b++)if(!a.items[b].disabled)return a.items[b]};if(!a.disabled&&a.$dropDownContainer.hasClass("smart-visibility-hidden")){if(a.dropDownAppendTo&&0<a.dropDownAppendTo.length){const b=a.getBoundingClientRect();if(a.$.container.contains(a.$.dropDownContainer)){let b=0;const c=setInterval(function(){const d=a.getBoundingClientRect();b++,d.top===a._positionTop&&10>b||(a.open(),clearInterval(c),a._positionTop=d.top)},100);return}b.top!==a._positionTop&&(a._positionTop=b.top)}const c=a.$.fireEvent("opening").defaultPrevented;c||(a._checkBrowserBounds("vertically"),a.dropDownAppendTo&&0<a.dropDownAppendTo.length&&a._rePositionListBox(),a._checkBrowserBounds("horizontally"),a.$dropDownContainer.removeClass("smart-visibility-hidden"),a.$.fireEvent("open"),a.$.dropDownButton&&("dropDownButton"===a.dropDownOpenMode?a.$.dropDownButton.setAttribute("selected",""):a.$.dropDownButton.removeAttribute("selected")),(!a.$.listBox._focusedItem||a.$.listBox._focusedItem&&!a.$.listBox._focusedItem.focused)&&(0<a.selectedIndexes.length?a._focus(a.items[a.selectedIndexes[0]]):a._focus(b)),a.$.input&&a.$.input.focus(),a.opened=!0)}}ready(){super.ready();const a=this;a.$.dropDownContainer&&(a._setDropDownPosition(a.dropDownPosition),a._calculateDropDownSize(),a.$.dropDownContainer.setAttribute("resize-mode",a.resizeMode),a.resizeIndicator&&a.$.dropDownContainer.setAttribute("resize-indicator","")),a.opened&&a.open(),a._positionTop=a.getBoundingClientRect().top,a._createElement()}remove(a){const b=this;b.$.listBox.remove(a),b._applySelection()}removeChild(a){const b=this;if(!b.isCompleted||a instanceof HTMLElement&&a.classList.contains("smart-resize-trigger-container")){const a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(b,a.concat(Array.prototype.slice.call(arguments)))}return a&&a instanceof Smart.ListItem?void b.$.listBox.removeChild(a):void b.error(b.localize("invalidNode",{elementType:b.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}select(a){this.$.listBox.select(a)}_setFocusable(){const a=this;if(a.disabled||a.unfocusable)return a.removeAttribute("tabindex"),a.$.actionButton.removeAttribute("tabindex"),void a.$.dropDownButton.removeAttribute("tabindex");let b=0<a.tabIndex?a.tabIndex:0;"dropDownButton"===a.dropDownOpenMode?(a.removeAttribute("tabindex"),a.$.actionButton.setAttribute("tabindex",b),a.$.dropDownButton.setAttribute("tabindex",b)):(a.$.actionButton.removeAttribute("tabindex"),a.$.dropDownButton.removeAttribute("tabindex"),a.tabIndex=b)}static get requires(){return{"Smart.ListBox":"smart.listbox.js"}}unselect(a){this.$.listBox.unselect(a)}update(a,b){const c=this;c.$.listBox.update(a,b),c._applySelection()}_applySelection(){const a=this;return"placeholder"===a.selectionDisplayMode||0===a.selectedIndexes.length?void(a.$.actionButton.innerHTML=a.placeholder):void(!a.$.listBox._items||0===a.$.listBox._items.length||(a.$.actionButton.innerHTML="",a.$.actionButton.appendChild(function(){let b;const c=document.createDocumentFragment();return b="plain"===a.selectionDisplayMode&&("one"===a.selectionMode||"zeroOrOne"===a.selectionMode||"radioButton"===a.selectionMode)?"":"tokens"===a.selectionDisplayMode?1===a.selectedIndexes.length&&-1<["oneOrManyExtended","oneOrMany","one","radioButton"].indexOf(a.selectionMode)?"":"&#10006":1===a.selectedIndexes.length?"":",",a.selectedIndexes.map(d=>{c.appendChild(a._applyTokenTemplate(a.$.listBox._items[d].label,b))}),c}())))}_applyTokenTemplate(a,b){const c=this,d=document.createElement("span"),e=function(){return"<span class='smart-drop-down-list-selection-label'>"+a+"</span><span class='smart-drop-down-list-unselect-button'>"+b+"</span>"};if(d.classList.add("smart-token"),c._tokenTemplate){let a=document.importNode(c._tokenTemplate.content,!0);const b=a.childNodes.length,f=/{{\w+}}/g;let g;for(let c=0;c<b;c++)g=f.exec(a.childNodes[c].innerHTML),g&&(a.childNodes[c].innerHTML=a.childNodes[c].innerHTML.replace(g[0],e())),a.childNodes[c].outerHTML&&(d.innerHTML+=a.childNodes[c].outerHTML)}else"function"==typeof c.tokenTemplate?c.tokenTemplate(d,{label:a,iconSeparator:b}):d.innerHTML=e();return d}_bindingCompleteHandler(){const a=this;a.$.listBox&&(a._setDropDownSize(),a._checkBrowserBounds())}_buttonsDownHandler(a){const b=this;b.disabled||(-1<b.theme.indexOf("material")&&Smart.Utilities.Animation.Ripple.animate(a.target,a.pageX,a.pageY),b._preventsSelectStart=!0,"dropDownButton"===b.dropDownOpenMode&&a.target===b.$.actionButton&&b.$actionButton.addClass("active"),b.opened&&(b._preventDropDownClose=!0))}_buttonsMouseEventsHandler(a){const b=this;b.disabled||("mouseenter"===a.type?a.target.$.addClass("hovered"):a.target.$.removeClass("hovered"))}_calculateDropDownSize(){const a=this;a._dropDownSize={};const b=window.getComputedStyle(a.$.dropDownContainer),c=parseFloat(b.getPropertyValue("border-top-width").trim()),d=parseFloat(b.getPropertyValue("border-bottom-width").trim()),e=parseFloat(b.getPropertyValue("padding-top").trim()),f=parseFloat(b.getPropertyValue("padding-bottom").trim());Smart.Utilities.Core.CSSVariablesSupport()&&(a._dropDownSize.width=b.getPropertyValue("--smart-drop-down-element-width").trim(),a._dropDownSize.height=b.getPropertyValue("--smart-drop-down-element-height").trim()),(!a._dropDownSize.width||-1<a._dropDownSize.width.indexOf("initial"))&&(a._dropDownSize.width=a.offsetWidth),a._dropDownSize.height||(a._dropDownSize.height="auto"),a._dropDownSize.minHeight=parseFloat(b.getPropertyValue("min-height").trim()),a._dropDownSize.maxHeight=parseFloat(b.getPropertyValue("max-height").trim()),a._dropDownSize.borderWidth=(isNaN(c)?0:c)+(isNaN(d)?0:d),a._dropDownSize.paddingWidth=(isNaN(e)?0:e)+(isNaN(f)?0:f)}_checkBrowserBoundsVertically(a){const b=this;a||(a=b.getBoundingClientRect()),b._dropDownListPosition&&(b.$.dropDownContainer.removeAttribute(b._dropDownListPosition),b.$.dropDownButton.removeAttribute(b._dropDownListPosition)),b._dropDownListPosition=0<=document.documentElement.clientHeight-Math.abs(a.top+a.height+b.$.dropDownContainer.offsetHeight)?"bottom":0<=a.top-b.$.dropDownContainer.offsetHeight?"top":"overlay-bottom",b.$.dropDownButton.setAttribute(b._dropDownListPosition,""),b.$.dropDownContainer.setAttribute(b._dropDownListPosition,"")}_checkBrowserBoundsHorizontally(){var a=Math.abs;const b=this;let c,d=0;b.dropDownAppendTo&&0<b.dropDownAppendTo.length?(c=!0,window.innerWidth!==document.documentElement.clientWidth&&(d=window.innerWidth-document.documentElement.clientWidth)):b.$.dropDownContainer.style.left="";let e=b.getBoundingClientRect().left;if(0>e&&(b.$.dropDownContainer.style.left=(c?0:a(e))+"px",e=parseFloat(b.$.dropDownContainer.style.left)),e+b.$.dropDownContainer.offsetWidth>document.documentElement.clientWidth){const f=e-a(document.documentElement.clientWidth-e-b.$.dropDownContainer.offsetWidth);b.$.dropDownContainer.style.left=(c?f:f-e)+"px",window.innerWidth===document.documentElement.clientWidth&&(b.$.dropDownContainer.style.left=parseFloat(b.$.dropDownContainer.style.left)+d+"px"),c&&window.innerHeight===document.documentElement.clientHeight&&b._rePositionListBox(!0)}}_checkBrowserBounds(a){const b=this;b.disabled||"auto"!==b.dropDownPosition||("vertically"===a?b._checkBrowserBoundsVertically():"horizontally"===a?b._checkBrowserBoundsHorizontally():(b._checkBrowserBoundsVertically(),b._checkBrowserBoundsHorizontally()))}_createElement(){const a=this;a._tokenTemplate=a._validateTemplate(a.tokenTemplate),a._applySelection(),a._setDropDownSize(),a._setFocusable(),a.$.arrow.noRipple=!0,a.disabled||"auto"!==a.dropDownPosition||PositionDetection.handleAutoPositioning.call(this,a._scrollHandler,200,()=>"auto"!==a.dropDownPosition)}_scrollHandler(){const a=this;if(a.parentElement){const b=a.getBoundingClientRect();b.top===a._positionTop||(a._checkBrowserBoundsVertically(b),a.opened&&a.dropDownAppendTo&&0<a.dropDownAppendTo.length&&a._rePositionListBox(),a._positionTop=b.top)}}_documentDownHandler(a){const b=this;if(!(b.disabled||b.readonly)){const c=a.originalEvent.target.closest("smart-list-item"),d=a.originalEvent.target.closest("smart-scroll-bar");if(-1<b.theme.indexOf("material")&&c&&Smart.Utilities.Animation.Ripple.animate(c,a.pageX,a.pageY),b._isListBoxThumbDragged=a.target!==document&&a.target.classList.contains("smart-thumb")&&a.target.ownerElement.ownerElement===b.$.listBox,(c||a.originalEvent.target===b.$.listBox.$.filterInput||a.originalEvent.target.closest(".smart-token")||d&&(d===b.$.listBox.$.verticalScrollBar||d===b.$.listBox.$.horizontalScrollBar))&&(b._preventDropDownClose=!0),a.originalEvent.target===b.$.resizeBar&&"none"!==b.resizeMode){b._resizeDetails||(b._resizeDetails={});const c=b.$.dropDownContainer.getBoundingClientRect();b._resizeDetails.started=!0,b._resizeDetails.x=a.pageX,b._resizeDetails.y=a.pageY,b._resizeDetails.width=b.$.dropDownContainer.offsetWidth,b._resizeDetails.height=b.$.dropDownContainer.offsetHeight,b._resizeDetails.offsetXL=a.clientX-c.left,b._resizeDetails.offsetXR=c.left+b.$.dropDownContainer.offsetWidth-a.clientX,b._resizeDetails.offsetY=c.top+b.$.dropDownContainer.offsetHeight-a.clientY,b._resizeDetails.offsetYtop=a.clientY-c.top,b._preventDropDownClose=!0}}}_documentMoveHandler(a){function b(){if(k=a.pageY-f._resizeDetails.y,"bottom"===j)f._resizeDetails.height=d(g.clientHeight-h.top-6,e(0,f._resizeDetails.height+k)),f._resizeDetails.y=e(h.top+g.scrollTop-f._resizeDetails.offsetY,d(g.clientHeight+g.scrollTop-1.5*f._resizeDetails.offsetY,a.pageY));else{f._resizeDetails.height=d(f._dropDownSize.maxHeight,e(0,d(f.offsetTop,f._resizeDetails.height-k))),k=e(0,f.$.dropDownContainer.offsetTop+(h.height-e(f._dropDownSize.minHeight,f._resizeDetails.height))),f.$.dropDownContainer.style.top=f.dropDownAppendTo&&0<f.dropDownAppendTo.length?k+"px":"";const b=i.top+g.scrollTop+f._resizeDetails.offsetYtop;f._resizeDetails.y=e(f._resizeDetails.offsetYtop,d(b,e(b-f._dropDownSize.maxHeight,a.pageY)))}f.$.dropDownContainer.style.height=f._resizeDetails.height+"px"}function c(){k=a.pageX-f._resizeDetails.x,f._resizeDetails.width=d(g.clientWidth-h.left-6,e(0,f._resizeDetails.width+k)),f.$.dropDownContainer.style.width=f._resizeDetails.width+"px",f._resizeDetails.x=e(h.left+g.scrollLeft-f._resizeDetails.offsetXR,d(g.clientWidth+g.scrollLeft-1.5*f._resizeDetails.offsetXR,a.pageX))}var d=Math.min,e=Math.max;const f=this;if(!f._resizeDetails||f._resizeDetails&&!f._resizeDetails.started)return;f.setAttribute("resizing",""),f._resizeDetails.resizeEventFired||(f.$.fireEvent("resizeStart",{position:{left:a.pageX,top:a.pageY}}),f._resizeDetails.resizeEventFired=!0);const g=document.documentElement,h=f.$.dropDownContainer.getBoundingClientRect(),i=f.getBoundingClientRect(),j=f.$.dropDownContainer.hasAttribute("top")?"top":"bottom";let k;switch(f.resizeMode){case"vertical":b();break;case"horizontal":c();break;case"both":c(),b();}}_documentUpHandler(a){const b=this;if(b.$actionButton.removeClass("active"),b._resizeDetails&&b._resizeDetails.started)return b._resizeDetails.started=b._resizeDetails.resizeEventFired=!1,b.removeAttribute("resizing"),b._preventDropDownClose=!1,b.focus(),void b.$.fireEvent("resizeEnd",{position:{left:a.pageX,top:a.pageY}});if(b.disabled||b._isListBoxThumbDragged||b.readonly)return;let c=a.originalEvent.target;if(b._preventsSelectStart=!1,"undefined"!=typeof c&&c!==b.$.resizeBar){if("tokens"===b.selectionDisplayMode&&c.classList.contains("smart-drop-down-list-selection-label")&&c.closest("smart-drop-down-list")===b){"none"!==b.dropDownOpenMode&&b.open();let a=b.$.listBox._items.filter(a=>a.label.toString()===c.textContent)[0];return b.$.listBox._scrollView.scrollTop=a.offsetTop,void b._focus(a)}if(c.classList.contains("smart-drop-down-list-unselect-button")&&c.closest("smart-drop-down-list")===b)return 1===b.selectedIndexes.length&&0>["zeroOrMany","zeroOrOne","checkBox"].indexOf(b.selectionMode)?void 0:void b.unselect(b.$.listBox._items.filter(a=>a.label.toString()===c.previousElementSibling.textContent)[0]);if(c.closest(".smart-action-button")===b.$.actionButton||c.closest(".smart-drop-down-button")===b.$.dropDownButton)return"dropDownButton"===b.dropDownOpenMode&&c===b.$.actionButton?void b.close():void(b.$dropDownContainer.hasClass("smart-visibility-hidden")&&"none"!==b.dropDownOpenMode?b.open():b.close());for(;c;){if(c instanceof Smart.ListItem&&c.ownerListBox===b.$.listBox){c="item";break}else if(c===b.$.listBox){c="listBox";break}c=c.parentElement}if("listBox"!==c&&"item"!==c||"item"===c&&"checkBox"!==b.selectionMode&&0>b.selectionMode.indexOf("Many"))return void b.close()}}_dragStartHandler(a){const b=this;b._resizeDetails&&b._resizeDetails.started&&a.preventDefault()}_focus(a){this.$.listBox._focus(a)}_focusEventHandler(){const a=this;a.nodeName&&"Smart-DROP-DOWN-LIST"===a.nodeName&&!a._preventDropDownClose&&a.close()}_keyDownHandler(a){const b=this;if(a.target!==b.$.listBox.$.filterInput)switch(a.key){case"Enter":case" ":a.target.$.addClass("active"),a.preventDefault(),a.target!==b.$.actionButton&&(b._keyPressed=!0,b.opened?(b.$.listBox._focusedItem&&b.select(b.$.listBox._focusedItem),"Enter"===a.key&&0>["one","none"].indexOf(b.selectionMode)&&b.close()):!b.opened&&!b.readonly&&"none"!==b.dropDownOpenMode&&b.open());break;case"End":case"Home":case"PageUp":case"PageDown":case"ArrowUp":case"ArrowDown":if(b.readonly)return;if(a.altKey)return b._keyPressed=!1,void(b.$dropDownContainer.hasClass("smart-visibility-hidden")?b.open():b.close());a.preventDefault(),b.$.listBox._handleKeyStrokes(a.key);break;case"Escape":b.close();break;default:if(b.readonly)return;"oneOrManyExtended"===b.selectionMode&&(b.$.listBox._keysPressed[a.key]=!0),b.$.listBox._applyIncrementalSearch(a.key);}}_keyUpHandler(a){const b=this;a.target===b.$.listBox.$.filterInput||(("Enter"===a.key||" "===a.key)&&(a.target.$.removeClass("active"),!b.$dropDownContainer.hasClass("smart-visibility-hidden")&&(b._keyPressed=!1)),"oneOrManyExtended"===b.selectionMode&&(b.$.listBox._keysPressed[a.key]=!1))}_listBoxChangeHandler(a){const b=this;b.dropDownAppendTo&&0<b.dropDownAppendTo.length&&b.$.fireEvent("change",a.detail),b._applySelection(b.selectionMode,a.detail)}_listBoxKeyDownHandler(a){const b=this;if("Enter"===a.key&&(b.close(),"dropDownButton"===b.dropDownOpenMode?b.$.dropDownButton.focus():b.focus(),a.stopPropagation()),"Escape"===a.key)return void b.close()}_mouseEnterHandler(){const a=this;a.$.addClass("hovered"),"Smart-DROP-DOWN-LIST"!==a.tagName||"auto"!==a.dropDownOpenMode||a.disabled||a.readonly||a.open()}_mouseLeaveHandler(){const a=this;a.$.removeClass("hovered"),"auto"!==a.dropDownOpenMode||a.disabled||a.readonly||a.close()}_rePositionListBox(a){const b=this;if(!b.dropDownAppendTo||0===b.dropDownAppendTo.length)return b.$.dropDownContainer.style.left="",b.$.dropDownContainer.style.top="",["font-size","font-family","font-style","font-weight"].map(a=>b.$.dropDownContainer.style[a]=""),void b.$dropDownContainer.removeClass("smart-drop-down-repositioned");b.$dropDownContainer.addClass("smart-drop-down-repositioned");const c=b.getBoundingClientRect();let d=c.top,e=0;switch(b.$.dropDownContainer.removeAttribute(b._dropDownListPosition),b._dropDownListPosition){case"bottom":d+=b.$.container.offsetHeight-1,b._dropDownListPosition="bottom";break;case"center-bottom":d+=b.$.container.offsetHeight-1,e+=b.offsetWidth-b.$.dropDownContainer.offsetWidth/2,b._dropDownListPosition="center-bottom";break;case"center-top":d-=b.$.dropDownContainer.offsetHeight-1,e+=b.offsetWidth-b.$.dropDownContainer.offsetWidth/2,b._dropDownListPosition="center-top";break;case"top":d-=b.$.dropDownContainer.offsetHeight-1,b._dropDownListPosition="top";break;case"overlay-bottom":b._dropDownListPosition="overlay-bottom";break;case"overlay-center":d-=b.$.dropDownContainer.offsetHeight/2-b.offsetHeight/2,b._dropDownListPosition="overlay-center";break;case"overlay-top":d-=b.$.dropDownContainer.offsetHeight-b.offsetHeight,b._dropDownListPosition="overlay-top";}b.$.dropDownContainer.style.top=d+window.pageYOffset+"px",b.$.dropDownContainer.setAttribute(b._dropDownListPosition,""),a||(b.$.dropDownContainer.style.left=e+c.left+window.pageXOffset+"px")}_resizeHandler(){const a=this;"none"===a.resizeMode&&(a._calculateDropDownSize(),a._setDropDownSize())}_selectStartHandler(a){this._preventsSelectStart&&a.preventDefault()}_setDropDownPosition(a){const b=this;b._dropDownListPosition&&b.$.dropDownButton.removeAttribute(b._dropDownListPosition),"auto"===a?b._checkBrowserBounds():b._dropDownListPosition=a,b.$.dropDownButton.setAttribute(b._dropDownListPosition,""),b.$.dropDownContainer.setAttribute(b._dropDownListPosition,"")}_setDropDownSize(){const a=this;if(a._dropDownSize||a._calculateDropDownSize(),a.$.dropDownContainer.style.width=a.dropDownWidth?"auto"===a.dropDownWidth?"auto":("initial"===a.dropDownWidth?a.offsetWidth:parseFloat(a.dropDownWidth))+"px":"auto"===a._dropDownSize.width?"auto":a._dropDownSize.width+"px",a.dropDownHeight&&"auto"!==a.dropDownHeight)a.$.dropDownContainer.style.height=parseFloat(a.dropDownHeight)+"px";else if("auto"===a._dropDownSize.height){a.$.dropDownContainer.style.height="";let b=2;0<a.$.listBox.items.length&&a.$.listBox.items.map(a=>b+=a.offsetHeight),b=b+a._dropDownSize.paddingWidth+a._dropDownSize.borderWidth,a.$.dropDownContainer.style.height=b+"px"}else a.$.dropDownContainer.style.height=a._dropDownSize.height;a.$.listBox._refreshLayout()}_setElementParent(a){const b=this;if(b.$.hasClass("animation")?b.$dropDownContainer.addClass("animation"):b.$dropDownContainer.removeClass("animation"),""!==b.theme&&b.$dropDownContainer.addClass(b.theme),!a||0===a.length)b.$.container.appendChild(b.$.dropDownContainer);else if("body"===a)document.body.appendChild(b.$.dropDownContainer),-1===b.detachedChildren.indexOf(b.$.dropDownContainer)&&b.detachedChildren.push(b.$.dropDownContainer);else{let c;if(a instanceof HTMLElement?c=a:"string"==typeof a&&(c=document.getElementById(a)),!c)return;c.appendChild(b.$.dropDownContainer)}b._rePositionListBox()}_styleChangedHandler(a){const b=this;if(b.dropDownAppendTo&&0<b.dropDownAppendTo.length){const c=a.detail.styleProperties,d=["font-size","font-family","font-style","font-weight"];for(let a=0;a<d.length;a++)c[d[a]]&&(b.$.dropDownContainer.style[d[a]]=c[d[a]].value)}"auto"===b._dropDownSize.height&&b._setDropDownSize()}_validateTemplate(a){const b=this;if(a)return"function"==typeof a?void 0:"content"in document.createElement("template")?(a instanceof HTMLTemplateElement||(a=document.getElementById(a)),null!==a&&"content"in a?a:void b.error(b.localize("invalidTemplate",{elementType:b.nodeName.toLowerCase(),property:"tokenTemplate"}))):void b.error(b.localize("htmlTemplateNotSuported",{elementType:b.nodeName.toLowerCase()}))}});class PositionDetection{static handleAutoPositioning(a,b,c){function d(){g=f(d),c()&&cancelAnimationFrame(g);const i=Date.now();i-h>=b&&(a.call(e),h=Date.now())}const e=this,f=(()=>window.requestAnimationFrame)();let g,h=Date.now();return g=f(d)}}