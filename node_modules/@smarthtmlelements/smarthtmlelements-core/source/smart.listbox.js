
/* Smart HTML Elements v1.1.0 (2018-June) 
Copyright (c) 2011-2018 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-list-item",class extends Smart.ContentElement{static get properties(){return{alternationIndex:{value:-1,type:"int"},displayMode:{allowedValues:["plain","checkBox","radioButton"],value:"plain",type:"string"},focused:{value:!1,type:"boolean"},grouped:{value:!1,type:"boolean"},selected:{value:!1,type:"boolean"},value:{value:"",type:"string"},label:{value:"",type:"string"},group:{value:"",type:"string"},hidden:{value:!1,type:"boolean"},unselectable:{value:!1,type:"boolean"}}}get hasStyleObserver(){return!1}template(){return`<div id="container">
                   <span id='itemInput' class ='smart-input smart-hidden'></span>
                   <div id="itemContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-list-item-container"><content></content></div>
               </div>`}appendChild(e){const t=this;if(!t.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}t.$.itemContainer.innerHTML="",e instanceof HTMLElement&&t.$.itemContainer.appendChild(e)}insertBefore(e,t){const i=this;if(!i.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(i,e.concat(Array.prototype.slice.call(arguments)))}t.parentNode.insertBefore(e,t)}removeChild(e){const t=this;if(!t.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.itemContainer.removeChild(e)}attached(){const e=this;super.attached(),e.ownerListBox=e.getListBox()}static get listeners(){return{mouseenter:"_itemOnMouseEnter",mouseleave:"_itemOnMouseLeave",mousemove:"_itemOnMouseMove"}}ready(){super.ready();const e=this;""===e.label?""!==e.innerHTML&&(e.label=e.innerHTML):e.innerHTML=e.label,e._setDisplayMode(e.displayMode)}propertyChangedHandler(e,t,i){const l=this;if(super.propertyChangedHandler(e,t,i),"hidden"===e&&(i?l.$.addClass("smart-hidden"):l.$.removeClass("smart-hidden")),"displayMode"===e&&l._setDisplayMode(i),"label"===e){const e=l.context;l.context=document,l.innerHTML=i;const t=l.getListBox();t.onItemUpdated(l),l.context=e}if("innerHTML"===e){const e=l.getListBox();e.onItemUpdated(l)}}getListBox(){const e=this;let t=e.parentNode;for(;!1==t instanceof Smart.ListBox&&null!==t;)t=t.parentNode;return t}_itemOnMouseEnter(){const e=this;e.disabled||!e.ownerListBox||e.ownerListBox.$.verticalScrollBar.thumbCapture||e.ownerListBox.$.horizontalScrollBar.thumbCapture||e.$.addClass("hovered")}_itemOnMouseMove(e){const t=this;if(t.ownerListBox&&Smart.ListBox.DragDrop.Dragging&&t.ownerListBox.reorder&&!Smart.Utilities.Core.isMobile){const i=t.ownerListBox.offsetTop;if(Smart.ListBox.DragDrop.DropDetails={item:t,position:"top"},!t.ownerListBox._areCSSVarsSupported){if(t.ownerListBox._indexOf(t)===t.ownerListBox._items.length-1||t.parentNode.lastElementChild===t){const l=t.getBoundingClientRect();e.pageY>i+l.height/2-1&&(Smart.ListBox.DragDrop.DropDetails={item:t,position:"bottom"})}return}if(t.$.removeClass("smart-list-item-line-feedback"),t.$.removeClass("smart-list-item-bottom-line-feedback"),t.ownerListBox._indexOf(t)===t.ownerListBox._items.length-1||t.parentNode.lastElementChild===t){const l=t.getBoundingClientRect();e.pageY>i+l.height/2-1?(t.$.addClass("smart-list-item-bottom-line-feedback"),Smart.ListBox.DragDrop.DropDetails={item:t,position:"bottom"}):t.$.addClass("smart-list-item-line-feedback")}else t.$.addClass("smart-list-item-line-feedback")}}_itemOnMouseLeave(){const e=this;e.ownerListBox&&(Smart.ListBox.DragDrop.Dragging&&(e.$.removeClass("smart-list-item-line-feedback"),e.$.removeClass("smart-list-item-bottom-line-feedback")),e.$.removeClass("hovered"))}_setDisplayMode(e){const t=this,i=t.getListBox();if(i){const l="checkBox"===i.selectionMode||"radioButton"===i.selectionMode?i.selectionMode:"plain";t.displayMode=e=l}return"plain"===e?void t.$itemInput.addClass("smart-hidden"):void t.$itemInput.removeClass("smart-hidden")}}),Smart("smart-list-items-group",class extends Smart.ContentElement{static get properties(){return{label:{value:"",type:"string"}}}template(){return`<div id="container">
                 <span id="itemsLabel" class ="smart-list-items-group-label">[[label]]</span>
                 <div id="listItemsGroupContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-list-items-group-container">
                    <content></content>
                 </div>
               </div>`}appendChild(e){const t=this;if(!t.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.listItemsGroupContainer.appendChild(e)}removeChild(e){const t=this;if(!t.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.listItemsGroupContainer.removeChild(e)}getListBox(){const e=this;let t=e.parentNode;for(;!1==t instanceof Smart.ListBox&&null!==t;)t=t.parentNode;return t}attached(){const e=this;super.attached(),e.ownerListBox||(e.ownerListBox=e.getListBox())}}),Smart("smart-list-box",class extends Smart.ContentElement{static get properties(){return{alternationStart:{value:0,type:"int"},alternationEnd:{value:0,type:"int"},alternationCount:{value:0,type:"int"},dataSource:{value:null,type:"any?",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},dropAction:{value:"move",type:"string",allowedValues:["copy","move","none"]},editable:{value:!1,type:"boolean"},filterable:{value:!1,type:"boolean"},filterCallback:{value:null,type:"function?"},filterMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase","custom"],type:"string"},filterInputPlaceholder:{value:"",type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{overridingProperties:"{{elementType}}: Overriding properties {{property1}} and {{property2}} applied. The \"{{property1}}\" property is used by default.",invalidIndex:"{{elementType}}: \"{{method}}\" method accepts an index of type number or an Array of numbers.",indexOutOfBound:"{{elementType}}: Out of bound index/indexes in \"{{method}}\" method.",invalidItem:"{{elementType}}: \"{{method}}\" method accepts an object or an array of objects as it's second parameter.",invalidSettings:"{{elementType}}: \"{{method}}\" method accepts a string or an object as it's second parameter."}},type:"object"},name:{value:"",type:"string"},placeholder:{value:"No Items",type:"string"},reorder:{value:!1,type:"boolean"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},selectionMode:{value:"oneOrManyExtended",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},sorted:{value:!1,type:"boolean"},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"}}}static get requires(){return{"Smart.ScrollBar":"smart.scrollbar.js"}}static get listeners(){return{focus:"_focusHandler",blur:"_blurHandler","container.wheel":"_mouseWheelHandler","editInput.change":"_editInputEventHandler","editInput.blur":"_editInputEventHandler","editInput.keydown":"_editInputEventHandler","horizontalScrollBar.change":"_horizontalScrollbarHandler","itemsInnerContainer.down":"_downHandler","itemsInnerContainer.dblclick":"_dblclickEventHandler","itemsInnerContainer.move":"_itemsContainerMoveHandler","document.up":"_upHandler","document.move":"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",resize:"_resizeHandler",selectstart:"_selectStartHandler",styleChanged:"_styleChangedHandler",swipeleft:"_swipeLeftHandler",swiperight:"_swipeRightHandler","verticalScrollBar.change":"_verticalScrollbarHandler"}}_downHandler(e){const t=this;if(t.disabled||t.displayLoadingIndicator||t.readonly)return;let i=e.originalEvent.target,l=null;if(i instanceof Smart.ListItem&&!i.disabled&&!i.hidden&&!(i instanceof Smart.ListItemsGroup))l=i.dataItem;else for(;i.parentElement;){if(i instanceof Smart.ListItem&&!i.disabled&&!i.hidden&&!(i instanceof Smart.ListItemsGroup)){l=i.dataItem;break}i=i.parentElement}Smart.ListBox.DragDrop.StartTime=new Date,Smart.ListBox.DragDrop.StartPosition={left:e.pageX,top:e.pageY};l&&(-1<t.theme.indexOf("material")&&Smart.Utilities.Animation.Ripple.animate(l,e.pageX,e.pageY),!Smart.Utilities.Core.isMobile&&(t._focus(l),t.select(l)),!Smart.ListBox.DragDrop.Feedback&&t.reorder&&(Smart.ListBox.DragDrop.Feedback=document.createElement("span"),Smart.ListBox.DragDrop.Feedback.appendChild(l.offsetHeight?l.cloneNode(!0):t._createItem(l)),Smart.ListBox.DragDrop.Item=l,Smart.Utilities.Extend(Smart.ListBox.DragDrop.Feedback).addClass("smart-popup smart-list-item smart-list-item-feedback")))}_dblclickEventHandler(e){const t=this;if(t.editable){const i=e.target.closest("smart-list-item");return!(i instanceof Smart.ListItem)||i.disabled||i.readonly?void t.$editInput.addClass("smart-hidden"):void(t.$.editInput.owner=i,t.$.editInput.value=i.label,t.$.editInput.style.height=i.offsetHeight+"px",t.$.editInput.style.top=i.offsetTop+"px",t.$editInput.hasClass("smart-hidden")&&t.$editInput.removeClass("smart-hidden"),t.$.editInput.focus())}}_editInputEventHandler(e){const t=this;if("blur"===e.type||"keydown"===e.type&&"Escape"===e.key)return t.$editInput.hasClass("smart-hidden")?void 0:t.$editInput.addClass("smart-hidden"),void t.focus();if(!("keydown"===e.type||t.$editInput.hasClass("smart-hidden"))){const i=e.target;if(e.stopPropagation(),i.owner.label!==i.value&&(i.owner.label=i.value,t.dataSource)){const e=i.owner.dataIndex,l=t.dataSource[e];l&&(t.displayMember?l[t.displayMember]=i.value:l.label=i.value)}t.$editInput.addClass("smart-hidden"),t.$.fireEvent("change",{selected:i.owner.selected,disabled:i.owner.disabled,index:t._indexOf(i.owner),label:i.owner.label,value:i.owner.value})}}_pointerUpHandler(e){let t=e.target;const i=e=>{const t=e.ownerListBox;t.disabled||t.displayLoadingIndicator||"none"===t.selectionMode||e.grouped||e.unselectable||(t._focus(e),t.select(e))};if(e.target instanceof Smart.ListItem&&!e.target.disabled&&!(e.target instanceof Smart.ListItemsGroup))return void i(t.dataItem);for(;t.parentElement;){if(t instanceof Smart.ListItem&&!t.disabled&&!(t instanceof Smart.ListItemsGroup)){i(t.dataItem);break}t=t.parentElement}}_upHandler(e){var t=Math.abs;const i=this;if(!(i.disabled||i.readonly||!Smart.ListBox.DragDrop.StartPosition)){if(Smart.Utilities.Core.isMobile&&!Smart.ListBox.DragDrop.Dragging){const l=t(e.pageX-Smart.ListBox.DragDrop.StartPosition.left),o=t(e.pageY-Smart.ListBox.DragDrop.StartPosition.top);let s=0<=l&&3>=l&&0<=o&&3>=o;if(Smart.Utilities.Core.isMobile&&300<=new Date-Smart.ListBox.DragDrop.StartTime&&(s=!1,Smart.ListBox.DragDrop.StartTime=null),s)i._pointerUpHandler(e.originalEvent),Smart.ListBox.DragDrop.StartPosition=null;else{let t=e.originalEvent.target;if(e.target instanceof Smart.ListItem&&!e.target.disabled&&!(e.target instanceof Smart.ListItemsGroup))e.preventDefault(),e.stopPropagation();else for(;t.parentElement;){if(t instanceof Smart.ListItem&&!t.disabled&&!(t instanceof Smart.ListItemsGroup)){e.preventDefault(),e.stopPropagation();break}t=t.parentElement}}}if(Smart.ListBox.DragDrop.Feedback){if(Smart.ListBox.DragDrop.Feedback.parentNode&&Smart.ListBox.DragDrop.Feedback.parentNode.removeChild(Smart.ListBox.DragDrop.Feedback),Smart.ListBox.DragDrop.Feedback=null,Smart.Utilities.Core.isMobile&&Smart.ListBox.DragDrop.Dragging)for(let t=0;t<Smart.ListBox.DragDrop.ListBoxes.length;t++){const l=Smart.ListBox.DragDrop.ListBoxes[t],i=l.getBoundingClientRect();if(l.reorder&&l.offsetLeft<=e.pageX&&e.pageX<=l.offsetLeft+i.width&&l.offsetTop<=e.pageY&&e.pageY<=l.offsetTop+i.height)for(let t=0;t<l._items.length;t++){const i=l._items[t],o=i.getBoundingClientRect();if((l._indexOf(i)===l._items.length-1||i.parentNode.lastElementChild===i)&&e.pageY>=l.offsetTop+i.offsetTop+o.height/2&&e.pageY<=l.offsetTop+i.offsetTop+o.height){Smart.ListBox.DragDrop.DropDetails={item:i,position:"bottom"};break}if(e.pageY>=l.offsetTop+i.offsetTop&&e.pageY<=l.offsetTop+i.offsetTop+o.height){Smart.ListBox.DragDrop.DropDetails={item:i,position:"top"};break}}}if(Smart.ListBox.DragDrop.DropDetails){const t=Smart.ListBox.DragDrop.DropDetails.item;if(t.$.removeClass("smart-list-item-line-feedback"),t.$.removeClass("smart-list-item-bottom-line-feedback"),Smart.ListBox.DragDrop.Item!==t){let e=Smart.ListBox.DragDrop.Item;if("none"!==e.ownerListBox.dropAction){t.ownerListBox!==e.ownerListBox&&"move"===e.ownerListBox.dropAction&&Smart.ListBox.DragDrop.Item.ownerListBox.removeChild(Smart.ListBox.DragDrop.Item),"copy"===e.ownerListBox.dropAction&&(e=e.cloneNode(!0)),Smart.ListBox.DragDrop.Item.group=t.group;const i=Smart.ListBox.DragDrop.DropDetails.item.ownerListBox;"top"===Smart.ListBox.DragDrop.DropDetails.position?i.insertBefore(e,t):t.parentNode.lastElementChild===t?t.parentNode.appendChild(e):i.appendChild(e,t),i.ensureVisible(e),"checkBox"===i.selectionMode||"radioButton"===i.selectionMode?i._focus(e):(i.clearSelection(),i.select(e))}}const l=Smart.ListBox.DragDrop.Item;i.$.fireEvent("reorderEnd",{position:{left:e.pageX,top:e.pageY},target:e.originalEvent.target,selected:l.selected,disabled:l.disabled,index:i._indexOf(l),label:l.label,value:l.value})}else{const t=Smart.ListBox.DragDrop.Item;i.$.fireEvent("reorderEnd",{position:{left:e.pageX,top:e.pageY},target:e.originalEvent.target,selected:t.selected,disabled:t.disabled,index:i._indexOf(t),label:t.label,value:t.value})}Smart.ListBox.DragDrop.Dragging=!1,Smart.ListBox.DragDrop.Item=null,Smart.ListBox.DragDrop.DropDetails=null}for(let e=0;e<Smart.ListBox.DragDrop.ListBoxes.length;e++){const t=Smart.ListBox.DragDrop.ListBoxes[e];t._dragInterval&&clearInterval(t._dragInterval)}}}_itemsContainerMoveHandler(e){const t=this;if(Smart.ListBox.DragDrop.Dragging)return t._moveHandler(e),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}_moveHandler(e){var t=Math.abs;if(Smart.ListBox.DragDrop.Feedback)if(!Smart.ListBox.DragDrop.Dragging){const i=t(e.pageX-Smart.ListBox.DragDrop.StartPosition.left),l=t(e.pageY-Smart.ListBox.DragDrop.StartPosition.top),o=new Date-Smart.ListBox.DragDrop.StartTime;let s=5<=i&&15>=i||5<=l&&15>=l;if(Smart.Utilities.Core.isMobile&&(300>o||1e3<o)&&(s=!1),s){Smart.ListBox.DragDrop.Dragging=!0,Smart.ListBox.DragDrop.Feedback.style.left=5+e.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=5+e.pageY+"px",document.body.appendChild(Smart.ListBox.DragDrop.Feedback),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation();const t=this,i=Smart.ListBox.DragDrop.Item;t.$.fireEvent("reorderStart",{position:{left:e.pageX,top:e.pageY},target:e.originalEvent.target,selected:i.selected,disabled:i.disabled,index:t._indexOf(i),label:i.label,value:i.value})}}else{Smart.ListBox.DragDrop.Feedback.style.left=5+e.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=5+e.pageY+"px";for(let t=0;t<Smart.ListBox.DragDrop.ListBoxes.length;t++){const i=Smart.ListBox.DragDrop.ListBoxes[t];i._dragInterval&&clearInterval(i._dragInterval),i._dragInterval=setInterval(function(){const t=i.getBoundingClientRect();i.offsetLeft<=e.pageX&&i.offsetLeft+t.width>=e.pageX&&(e.pageY>=i.offsetTop&&e.pageY<=i.offsetTop+20?i._scrollView.scrollTop-=2:e.pageY>=i.offsetTop+t.height-20&&e.pageY<=i.offsetTop+t.height&&(i._scrollView.scrollTop+=2))},1)}return e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}}_focusHandler(){const e=this;e._focused=!0}_blurHandler(){const e=this;e._focused=!1}template(){return`<div id="container" class="smart-container">
                 <input id="filterInput" class ="smart-hidden"  disabled="[[disabled]]" placeholder='[[filterInputPlaceholder]]'>
                 <div id="itemsContainer" class="smart-list-items-container">
                      <div id="placeholder" class ="smart-placeholder">[[placeholder]]</div>
                      <div id="itemsInnerContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-list-items-inner-container">
                          <content></content>
                      </div>
                      <input type="text" id="editInput" class= "smart-hidden"/>
                 </div>
                 <smart-scroll-bar id="verticalScrollBar" disabled="[[disabled]]" orientation="vertical"></smart-scroll-bar>
                 <smart-scroll-bar id="horizontalScrollBar" disabled="[[disabled]]" ></smart-scroll-bar>
                 <div id="loadingIndicatorContainer" class ="smart-loader-container">
                    <span id="loadingIndicator" class="smart-loader"></span>
                    <span id="loadingIndicatorPlaceHolder" class ="smart-loader-label smart-hidden">[[loadingIndicatorPlaceholder]]</span>
                 </div>
                <input id="hiddenInput" type="hidden" name="[[name]]">
                </div>`}appendChild(e){const t=this;if(!t.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}t.isVirtualized?(-1<t._items.indexOf(e)&&t._items.splice(t._items.indexOf(e),1),t._items.push(e)):t.$.itemsInnerContainer.appendChild(e),t._refreshItems()}insertBefore(e,t){const i=this;if(!i.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(i,e.concat(Array.prototype.slice.call(arguments)))}i.isVirtualized?(-1<i._items.indexOf(e)&&i._items.splice(i._items.indexOf(e),1),i._items.splice(i._indexOf(t),0,e)):t.parentNode.insertBefore(e,t),i._refreshItems()}removeChild(e){const t=this;if(!t.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}t.isVirtualized?t._items.splice(t._indexOf(e),1):e.parentNode&&e.parentNode.removeChild(e),t._refreshItems()}propertyChangedHandler(e,t,l){super.propertyChangedHandler(e,t,l);const o=this;switch(e){case"innerHTML":o.clearSelection(),o._dataBind(),o.innerHTML=o.content=Smart.Utilities.Core.html(o.$.content);break;case"dataSource":case"valueMember":case"groupMember":case"displayMember":{o.clearSelection(),o._dataBind();break}case"disabled":case"unfocusable":o._setFocusable();break;case"displayLoadingIndicator":{o._setLoadingIndicatorVisibility();break}case"filterable":{o._refreshFilter(),o._refreshLayout();break}case"grouped":{if(l?o._group():o._ungroup(),!("radioButton"===o.selectionMode))o._refreshSelection();else if(0<o.selectedValues.length){const e=o.selectedValues;o.clearSelection(),o.select(e[0])}o._refreshLayout();break}case"itemTemplate":{if(null===l||""===l)return o._items.map(e=>e.innerHTML=e.label),delete o._bindingDetails,void o._refreshLayout();const e=o.querySelectorAll("smart-list-item"),t=function(){o._handleItemTemplate(l)&&(o._items.map(e=>o._applyTemplate(e)),o._refreshLayout()),o.ownerElement&&o.ownerElement._setDropDownSize&&o.ownerElement._setDropDownSize(),o.$.fireEvent("bindingComplete")};0===e.length?t():o._ensureItemsReady(e,t);break}case"selectedIndexes":case"selectedValues":{if(!o._items||0===o._items.length)return o.selectedIndexes=[],o.selectedValues=[],void(o.$.hiddenInput.value=o.selectedValues.toString());if("selectedIndexes"===e){o.selectedValues=[],o._refreshSelection();for(let e=0;e<l.length;e++){const t=l[e],i=o._items[t];i&&("oneOrManyExtended"===o.selectionMode?o._select(i):o.select(i))}}else{o.selectedValues=[],o._refreshSelection();for(let e=0;e<l.length;e++){const t=l[e],i=o.getItem(t);i&&("oneOrManyExtended"===o.selectionMode?o._select(i):o.select(i))}}0<o.selectedIndexes.length&&o._focus(o._items[o.selectedIndexes[0]]);break}case"selectionMode":{const e="checkBox"===o.selectionMode||"radioButton"===o.selectionMode?o.selectionMode:"plain";0===o.selectedIndexes.length&&0<o._items.length&&("oneOrMany"===o.selectionMode||"one"===o.selectionMode||"oneOrManyExtended"===o.selectionMode)&&o.select(o._items[0]);const t=o.selectedValues;o.selectedValues=[],o._refreshSelection();for(let e=0;e<t.length;e++){const i=t[e],l=o.getItem(i);l&&("oneOrManyExtended"===o.selectionMode?o._select(l):o.select(l))}o._items.forEach(t=>t.displayMode=e),o._recycle();break}case"sorted":{l?o._sort():o._unsort(),o._refreshSelection(),o._refreshLayout();break}}}_refreshSelection(){const e=this;if(e._items&&0!==e._items.length){const t=e.selectedValues;e.selectedIndexes=[],e.selectedValues=[];for(let l=0;l<e._items.length;l++){const i=e._items[l];i.selected=!1,-1<t.indexOf(i.value)&&e._select(i,!0)}e._recycle()}}clearSelection(){const e=this;if(e._items&&0!==e._items.length){for(let t=0;t<e.selectedIndexes.length;t++){const i=e.selectedIndexes[t],l=e._items[i];l&&(l.selected=!1)}e.selectedIndexes=[],e.selectedValues=[],e.$.hiddenInput.value=e.selectedValues.toString(),e._recycle()}}ensureVisible(e){const t=this;if(e)return!("string"==typeof e&&(e=t.getItem(e),!e))&&(e.top+e.height>=t._scrollView.scrollTop+t.offsetHeight&&(t._scrollView.scrollTop+=e.height,!t.isVirtualized&&(t.$.itemsContainer.scrollTop=t._scrollView.scrollTop)),(e.top<=t._scrollView.scrollTop||e.top>=t._scrollView.scrollTop+t.$.itemsContainer.offsetHeight)&&(t._scrollView.scrollTop=e.top,!t.isVirtualized&&(t.$.itemsContainer.scrollTop=t._scrollView.scrollTop)),0===t._indexOf(e)||1===t._indexOf(e)&&1<t._items.length&&t._items[0].grouped?(t._scrollView.scrollTop=0,!t.isVirtualized&&(t.$.itemsContainer.scrollTop=t._scrollView.scrollTop)):t._indexOf(e)===t._items.length-1&&(t._scrollView.scrollTop=t._scrollView.scrollHeight,!t.isVirtualized&&(t.$.itemsContainer.scrollTop=t._scrollView.scrollTop)),!0)}get items(){const e=this;return e._filteredItems?e._filteredItems:e._items}ready(){super.ready();const e=this;e._areCSSVarsSupported=Smart.Utilities.Core.CSSVariablesSupport(),e._keysPressed={},e._incrementalSearchQuery="",e._incrementalSearchItems=[],e._previousEntry="",e.isUpdating=0,e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar),e._scrollView.hScrollBar.$.addClass("smart-hidden"),e._scrollView.vScrollBar.$.addClass("smart-hidden"),e._setFocusable(),e._setLoadingIndicatorVisibility(),e._refreshFilter(),e._initializeInnerHTML(),e._dataBind()}attached(){const e=this;super.attached(),Smart.ListBox.DragDrop||(Smart.ListBox.DragDrop={ListBoxes:[]}),Smart.ListBox.DragDrop.ListBoxes.push(e),e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar))}detached(){const e=this;if(super.detached(),e._scrollView&&(e._scrollView.unlisten(),delete e._scrollView),Smart.ListBox.DragDrop&&Smart.ListBox.DragDrop.ListBoxes){const t=Smart.ListBox.DragDrop.ListBoxes.indexOf(e);Smart.ListBox.DragDrop.ListBoxes.splice(t,1)}}_createItem(e,t,i){const l=this,o="checkBox"===l.selectionMode||"radioButton"===l.selectionMode?l.selectionMode:"plain",s=i?{}:document.createElement("smart-list-item");s.ownerListBox=l,"number"==typeof e&&(e=""+e);const n=function(t,i){return void 0===e[t]?e[i]:""+e[t]};let r="string"==typeof e?e:n(l.displayMember,"label"),a="string"==typeof e?e:n(l.valueMember,"value"),d=n(l.groupMember,"group");return void 0===r&&(void 0===t?r="":r=""+t),s.label=s.innerHTML=""+r,void 0===a&&(void 0===t?a=r:a=""+t),s.value=""+a,s.displayMode=o,s.selected=!!e.selected&&e.selected,s.disabled=!!e.disabled&&e.disabled,s.dataItem=s,void 0!==t&&(s.dataIndex=t),l._alternateItem(s),e.title&&(s.title=e.title),d&&(s.group=""+d),s}_alternateItem(e){const t=this,i=t.alternationStart,l=0<t.alternationEnd?t.alternationEnd:1/0;0>=t.alternationCount||(t._alternationIndexCounter===void 0&&(t._alternationIndexCounter=0),e.dataIndex>=i&&e.dataIndex<=l&&(e.alternationIndex=t._alternationIndexCounter++,t._alternationIndexCounter===t.alternationCount&&(t._alternationIndexCounter=0)))}_beginUpdate(){const e=this;e.isUpdating++}_isUpdating(){const e=this;return 0<e.isUpdating}_endUpdate(){const e=this;e.isUpdating--}get _scrollHeight(){const e=this;let t=0;if(e.isVirtualized){if(e.__scrollHeight)return e.__scrollHeight;if(0===e._items.length)return 0;e.isUpdating++;const l=e._createItem(e.dataSource[0]);e.$.itemsInnerContainer.appendChild(l);for(let o=0;o<e._items.length;o++){const i=e._items[o];if(i.hidden){i.height=0,i.top=t;continue}e.itemHeight?(30>e.itemHeight&&(e.itemHeight=30),i.height=e.itemHeight):(l.label=i.label,i.height=l.offsetHeight),i.top=t,t+=i.height}e.$.itemsInnerContainer.removeChild(l),e.__scrollHeight=t-e.$.itemsInnerContainer.offsetHeight,e.filterable&&(e.__scrollHeight+=e.$.filterInput.offsetHeight),t=e.__scrollHeight,e.isUpdating--}else{for(let l=0;l<e._items.length;l++){const i=e._items[l];if(i.hidden){i.height=0,i.top=t;continue}e.itemHeight?"auto"!==e.itemHeight&&(i.height=e.itemHeight,i.style.height=i.height+"px"):i.height=i.offsetHeight,i.top=i.offsetTop,t+=i.height}t=e.$.itemsInnerContainer.scrollHeight-e.$.itemsInnerContainer.offsetHeight,e.__scrollHeight=t}return t}_initializeRecyclingItems(){const e=this;if(!e.dataSource||e.dataSource&&0===e.dataSource.length||!e.isVirtualized)return;let t=0,l=e.offsetHeight;e.$.itemsInnerContainer.innerHTML="",e._recyclingItems=[];const i=function(){for(let o=0;o<e.dataSource.length;o++){const i=e.dataSource[o],s=e._createItem(i);if(e.itemHeight&&"auto"!==e.itemHeight&&(s.style.height=e.itemHeight+"px"),e.$.itemsInnerContainer.appendChild(s),t+=s.offsetHeight,s.dataItem=e._items[o],e._recyclingItems.push(s),t>1.5*l)break}};i();for(let e=0;t<1.5*l&&5>++e;)i()}_dataBind(){const e=this;if(e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),"function"==typeof e.dataSource&&(e._items=[]),"string"==typeof e.dataSource&&(e.dataSource=JSON.parse(e.dataSource)),null!==e.dataSource&&e.dataSource instanceof Array){e.isUpdating++;const t=t=>{e._items=[],e._groups=[];for(let l=0;l<e.dataSource.length;l++){const i=e.dataSource[l],o=t?e._createItem(i,l):e._createItem(i,l,!0);e._items[l]=o,t&&t.appendChild(o)}};if(e.isVirtualized)t(),e._initializeRecyclingItems();else{const i=document.createDocumentFragment();e.$.itemsInnerContainer.innerHTML="",t(i),e.$.itemsInnerContainer.appendChild(i)}e.isUpdating--}const t=e.querySelectorAll("smart-list-item"),i=function(){e.isUpdating++,e.dataSource||(e._initializeHtmlListItems(),e._initializeHtmlListGroups()),e.grouped&&e._group(),e.sorted&&e._sort(),e._refreshLayout(),e._initializeSelection(),e.isInitialized=!0,e.isUpdating--,e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&(e._items.map(t=>e._applyTemplate(t)),e._refreshLayout()),e.__onCompleted&&(e._onCompleted=e.__onCompleted,e.__onCompleted=null,e._onCompleted()),e.$.fireEvent("bindingComplete")};0===t.length?i():(e._onCompleted&&(e.__onCompleted=e._onCompleted,e._onCompleted=null),e._ensureItemsReady(t,i))}_ensureItemsReady(e,t){const l=this,i=function(){const i=function(t){for(let l=0;l<e.length;l++)e[l].context="node"===t?e[l]:document};i("node"),t(),i()};if(0===e.length)i();else{l._nodesReadyListeners=0;for(let t=0;t<e.length;t++){const o=e[t],s=function(){l._nodesReadyListeners--,0===l._nodesReadyListeners&&(i(),delete l._nodesReadyListeners)}.bind(l);o.isCompleted||(l._nodesReadyListeners++,o._onCompleted=s)}0===l._nodesReadyListeners&&i()}}_initializeInnerHTML(){const e=this;0<=e.$.itemsInnerContainer.innerHTML.indexOf("<option")?e.$.itemsInnerContainer.innerHTML=e.$.itemsInnerContainer.innerHTML.replace(/<optgroup/ig,"<smart-list-items-group").replace(/<\/optgroup/ig,"</smart-list-items-group").replace(/<option/ig,"<smart-list-item").replace(/<\/option/ig,"</smart-list-item"):0<=e.$.itemsInnerContainer.innerHTML.indexOf("<ul")&&(e.$.itemsInnerContainer.innerHTML=e.$.itemsInnerContainer.innerHTML.replace(/<ul/ig,"<smart-list-items-group").replace(/<\/ul/ig,"</smart-list-items-group").replace(/<li/ig,"<smart-list-item").replace(/<\/li/ig,"</smart-list-item"))}_initializeHtmlListItems(){const e=this,t=e.querySelectorAll("smart-list-item"),l="checkBox"===e.selectionMode||"radioButton"===e.selectionMode?e.selectionMode:"plain",o=function(e,t,i){return void 0===e[t]?e[i]:""+e[t]};e._items=[];let s=0;for(let n=0;n<t.length;n++){const i=t[n];i.dataIndex=n,i.label=i.innerHTML,i.dataItem=i,i.top||(i.top=s),i.height||(i.height=i.offsetHeight),s+=i.height,i.value||(i.value=""+n);const r=o(i,e.displayMember,"label"),a=o(i,e.valueMember,"value"),d=o(i,e.groupMember,"group");i.label!==r&&(i.label=r),i.value!==a&&(i.value=a),i.group!==d&&(i.group=d),i.displayMode=l,e._alternateItem(i),i.selected&&(e.selectedIndexes.push(n),e.selectedValues.push(i.value)),e._items.push(i)}e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&e._items.map(t=>e._applyTemplate(t))}_group(){const e=this;e.isUpdating++;let t=[],l=[];e.sorted&&e._unsort();for(let l=0;l<e._items.length;l++){const i=e._items[l],o=i.group||i.innerHTML.toUpperCase().charAt(0)||i.label.toUpperCase().charAt(0);t[o]?t[o].items.push(i):t[t.length++]=t[o]={items:[i],label:o}}if(!e.isVirtualized){for(;e.$.itemsInnerContainer.firstChild;)e.$.itemsInnerContainer.removeChild(e.$.itemsInnerContainer.firstChild);const o=document.createDocumentFragment();e._groups=[];for(let s=0;s<t.length;s++){const i=t[s],n=document.createElement("smart-list-items-group");n.label=i.label,n.dataIndex=s;for(let e=0;e<t[s].items.length;e++){const t=i.items[e];l.push(t),n.appendChild(t)}e._groups.push(n),o.appendChild(n)}e._items=l;const i=/Trident|Edge/.test(navigator.userAgent);i?setTimeout(function(){e.$.itemsInnerContainer.appendChild(o)},50):e.$.itemsInnerContainer.appendChild(o)}else{e._groups=[];for(let e=0;e<t.length;e++){const i=t[e];i.dataIndex=e,i.grouped=!0,i.hidden=!1,i.displayMode="plain",l.push(i);for(let o=0;o<t[e].items.length;o++){const e=i.items[o];e.ownerGroup=i,l.push(e)}}e._groups=t,e._items=l}e.sorted&&e._sort(),e.isUpdating--}_ungroup(){const e=this;e.isUpdating++,e._groups=[],e._unsort();let t=[];if(!e.isVirtualized){const l=document.createDocumentFragment();for(let o=0;o<e._items.length;o++){const i=e._items[o];l.appendChild(i),t.push(i)}0<t.length&&(e.$.itemsInnerContainer.innerHTML="",e.$.itemsInnerContainer.appendChild(l))}else for(let l=0;l<e._items.length;l++){const i=e._items[l];i.grouped||t.push(i)}e._items=t,e.sorted&&e._sort(),e.isUpdating--}_initializeHtmlListGroups(){const e=this,t=e.$.itemsInnerContainer.querySelectorAll("smart-list-items-group");e._groups=[];for(let l=0;l<t.length;l++){const i=t[l];i.dataIndex=l,e._groups.push(i)}}_initializeSelection(){const e=this;("one"===e.selectionMode||"oneOrMany"===e.selectionMode||"oneOrManyExtended"===e.selectionMode)&&0===e.selectedIndexes.length&&0===e.selectedValues.length&&0<e._items.length&&(e.selectedIndexes.push(0),e.selectedValues.push(e._items[0].value));const t=e.selectedIndexes.slice(0),l=e.selectedValues.slice(0);e.clearSelection();for(let o=0;o<e._items.length;o++){const i=e._items[o];(0<=t.indexOf(o)||0<=l.indexOf(i.value||i.label))&&(e._focusedItem&&(e._focusedItem.focused=!1),e._focusedItem=null,e.select(i))}}onItemUpdated(){const e=this;!e.isInitialized||e._isUpdating()||(e.isUpdating++,e._refreshLayout(),e.isUpdating--)}_refreshItems(){const e=this;if(e.isInitialized&&!e._isUpdating()){if(e.isUpdating++,e.grouped?e._ungroup():e.sorted&&e._unsort(),!e.isVirtualized){e._items=[];const t=e.querySelectorAll("smart-list-item");for(let l=0;l<t.length;l++)t[l].dataIndex=l,e._alternateItem(t[l]),e._items.push(t[l])}e.grouped?e._group():e.sorted&&e._sort(),e._refreshLayout(),e.isUpdating--}}_applyIncrementalSearch(e){const t=this;if(!(null===t.incrementalSearchDelay||isNaN(t.incrementalSearchDelay)))return-1<["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control","Home","End","PageUp","PageDown"].indexOf(e)?void 0:(0!==t._incrementalSearchQuery.indexOf(e)&&(t._incrementalSearchQuery+=e),t._incrementalSearchTimer&&clearTimeout(t._incrementalSearchTimer),t._incrementalSearch(),void(t._incrementalSearchTimer=setTimeout(function(){t._incrementalSearchQuery=""},t.incrementalSearchDelay)))}select(e){const t=this;if(!("string"==typeof e&&(e=t.getItem(e),!e))&&!("number"==typeof e&&(e=t.getItem(e),!e))&&!(e.grouped||e.unselectable)){if("none"===t.selectionMode)return t.selectedIndexes=[],void(t.selectedValues=[]);switch(t._focusedItem||"none"===t.selectionMode||(t._focusedItem=e,e.focused=!0),t.selectionMode){case"one":return(1!==t.selectedIndexes.length||t.selectedIndexes[0]!==t._indexOf(e))&&(1<=t.selectedIndexes.length&&t.clearSelection(),t._select(e),!0);case"zeroOrOne":return 1===t.selectedIndexes.length&&t.selectedIndexes[0]===t._indexOf(e)?(t.unselect(e),!0):(1<=t.selectedIndexes.length&&t.clearSelection(),t._select(e),!0);case"radioButton":if(0<t.$.itemsInnerContainer.querySelectorAll("smart-list-items-group").length){const i=e.parentNode;if(!e.selected){for(let e in i.children){const l=i.children[e];l.selected&&t.unselect(l)}t._select(e)}return!0}if(t.isVirtualized&&0<t._groups.length){const i=e.ownerGroup;if(!e.selected){for(let e in i.items){const l=i.items[e];l.selected&&t.unselect(l)}t._select(e)}return!0}return e.selected||(1<=t.selectedIndexes.length&&t.clearSelection(),t._select(e)),!0;case"oneOrMany":return e.selected?1<t.selectedIndexes.length&&t.unselect(e):t._select(e),!0;case"zeroOrMany":case"checkBox":return e.selected?t.unselect(e):t._select(e),!0;case"oneOrManyExtended":{const l=t.selectedValues;if(t._keysPressed.Control)return 1<t.selectedIndexes.length?e.selected?(t.unselect(e),t._focus(t._items[t.selectedIndexes[0]])):t._select(e):t._select(e),!0;if(t._keysPressed.Shift){const i=t._items[t.selectedIndexes[0]];let o;t.clearSelection();const s=0<=l.indexOf(i.value)||i.selected;if(t._select(i,s),t._indexOf(i)>t._indexOf(e))for(o=t._indexOf(i)-1;o>=t._indexOf(e);){const e=t._items[o],i=0<=l.indexOf(e.value)||e.selected;t._select(e,i),o--}else for(o=t._indexOf(i)+1;o<=t._indexOf(e);){const e=t._items[o],i=0<=l.indexOf(e.value)||e.selected;t._select(e,i),o++}for(let e=0;e<l.length;e++){const i=l[e],o=t.getItem(i);o.selected||t.$.fireEvent("change",{selected:o.selected,disabled:o.disabled,index:t._indexOf(o),label:o.label,value:o.value})}return!0}for(let o=0;o<l.length;o++){const i=l[o],s=t.getItem(i);e!==s&&t.unselect(s)}return t.clearSelection(),t._select(e,0<=l.indexOf(e.value)),!0}}return!1}}_applyTemplate(e,t){const l=this;if(null===l.itemTemplate)return;if("function"==typeof l.itemTemplate)return void l.itemTemplate(e,{label:e.label,value:e.value,index:l._items.indexOf(e)});if(!l._bindingDetails||0===l._bindingDetails.length)return;const i=l._bindingDetails.length;let o,s,n=document.importNode(l._template.content,!0);for(let r=0;r<i;r++){o=n.childNodes[l._bindingDetails[r].childNodeIndex],s=l._bindingDetails[r].bindingString.length;for(let t=0;t<s;t++){const i=l._bindingDetails[r].bindingString[t],s=0<=i.indexOf("label")?e.label:e.value;o.innerHTML=o.innerHTML.replace(i,s)}}e.innerHTML="";for(let l=0;l<n.childNodes.length;l++)n.childNodes[l].outerHTML&&(e.innerHTML+=n.childNodes[l].outerHTML);!1===t||(l._scrollHeightTimer&&(clearInterval(l._scrollHeightTimer),l._scrollHeightCounter=0),l._scrollHeightTimer=setInterval(function(){(l._lastScrollHeight!==l.$.itemsInnerContainer.scrollHeight||10===l._scrollHeightCounter)&&(l._refreshLayout(),clearInterval(l._scrollHeightTimer)),l._lastScrollHeight=l.$.itemsInnerContainer.scrollHeight,l._scrollHeightCounter++},50))}_filterItems(e,t){const l=this,i=l.$.filterInput.value;let o,s;const n=function(){if(0===s.length)return l._filteredItems=[],void(t&&t());o=l._queryItems(i,l.filterMode);for(let e=0;e<s.length;e++)s[e].hidden=!0,s[e].$.addClass("smart-hidden");for(let e=0;e<o.length;e++){const t=o[e];t.hidden=!1,t.$.removeClass("smart-hidden")}if(l.grouped&&l.isVirtualized)for(let e=0;e<l._groups.length;e++){const t=l._groups[e],i=t.items;let o=!0;for(let e=0;e<i.length;e++)i[e].hidden||(o=!1);o&&(t.hidden=!0)}if(l.grouped&&!l.isVirtualized)for(let e=0;e<l._groups.length;e++){const t=l._groups[e],i=[].concat(...t.querySelectorAll("smart-list-item"));let o=!0;for(let e=0;e<i.length;e++)i[e].$.hasClass("smart-hidden")||(o=!1);o?t.$.addClass("smart-hidden"):t.$.removeClass("smart-hidden")}l._filteredItems=o,l._refreshLayout(),t&&t();e||l._refreshSelection()};if("function"!=typeof l.dataSource){if(s=l._items,0===s.length)return;n()}else if(i){const e=l.dataSource(i,function(e){i&&l.isAttached&&(l._updateListBoxAfterQuery=function(){o=s=l._items,n()},l.clearItems(),l.insert(0,e))});if(e){if(!i)return;l._updateListBoxAfterQuery=function(){o=s=l._items,n()},l.clearItems(),l.insert(0,e)}}else l.clearItems(),o=s=l._items,n()}_getNextItem(e){const t=this,i=t._items,l=t._items.length;for(let t=Math.max(e+1,0);t<l;){const e=i[t];if(!e.disabled&&!e.hidden&&!e.grouped&&!e.unselectable)return e;t++}return i[e]}_getPreviousItem(e){const t=this,i=t._items;for(let t=Math.max(e-1,0);-1<t;){const e=i[t];if(!e.disabled&&!e.hidden&&!e.grouped&&!e.unselectable)return e;t--}return i[e]}get _scrollWidth(){var e=Math.max;const t=this,l=t._items;return t.__scrollWidth?t.__scrollWidth:(t.__scrollWidth=(()=>{const t=this;let o;if(t.isVirtualized){let e="";for(let t=0;t<l.length;t++){const i=l[t].label;i.length>e.length&&(e=i)}const i=t._createItem(t.dataSource[0]);return t.$.itemsInnerContainer.appendChild(i),i.label=e,t._areCSSVarsSupported?(t.$.container.setAttribute("style","--smart-list-item-inner-container-width: 'auto'"),o=i.offsetWidth,t.$.container.setAttribute("style","--smart-list-item-inner-container-width: 100%")):(t.$.itemsInnerContainer.style.width="0px",o=i.offsetWidth,t.$.itemsInnerContainer.style.width="100%"),i.parentNode.removeChild(i),o}if(t._areCSSVarsSupported){t.$.container.setAttribute("style","--smart-list-item-inner-container-width: 'auto'"),o=l[0].offsetWidth;for(let t=1;t<l.length;t++)o=e(o,l[t].offsetWidth);if(t._groups)for(let l=0;l<t._groups.length;l++)o=e(o,t._groups[l].offsetWidth);t.$.container.setAttribute("style","--smart-list-item-inner-container-width: 100%")}else{t.$.itemsInnerContainer.style.width="0px",o=l[0].offsetWidth;for(let t=1;t<l.length;t++)o=e(o,l[t].offsetWidth);if(t._groups)for(let l=0;l<t._groups.length;l++)o=e(o,t._groups[l].offsetWidth);t.$.itemsInnerContainer.style.width="100%"}return o})(),t.__scrollWidth>t.$.itemsContainer.offsetWidth)?(t._areCSSVarsSupported?t.$.container.setAttribute("style","--smart-list-item-inner-container-width: "+t.__scrollWidth+"px"):t.$.itemsInnerContainer.style.width=t.__scrollWidth+"px",t.__scrollWidth):(t._areCSSVarsSupported?t.$.container.setAttribute("style","--smart-list-item-inner-container-width: 100%"):t.$.itemsInnerContainer.style.width="100%",t.__scrollWidth)}update(e,t){const i=this,l=i._items[e];if(l){if("string"==typeof t)l.label=t,void 0===l.value&&(l.value=t);else for(let e in t)l[e]=t[e];(i.sorted||i.grouped||i.isVirtualized)&&(i._refreshItems(),i._refreshSelection())}else i.error(i.localize("indexOutOfBound",{elementType:i.nodeName.toLowerCase(),method:"update"}))}insert(e,t){const l=this;let o=[];if(e||(e=0),t instanceof Array){l.isUpdating++;for(let s=0;s<t.length;s++){const i=t[s],n=l._createItem(i);o.push(n),e>=l._items.length||0===l._items.length?l.appendChild(n):l.insertBefore(n,l._items[e])}l.isUpdating--}else{const i=l._createItem(t);o.push(i),e>=l._items.length||0===l._items.length?l.appendChild(i):l.insertBefore(i,l._items[e])}0<o.length&&l._ensureItemsReady(o,function(){l._refreshItems(),0===l._items.length||(l._updateListBoxAfterQuery&&(l._updateListBoxAfterQuery(),delete l._updateListBoxAfterQuery),0===l.selectedIndexes.length&&("oneOrMany"===l.selectionMode||"one"===l.selectionMode||"oneOrManyExtended"===l.selectionMode)&&l.select(l._items[0]),l._refreshSelection(),l.$.fireEvent("bindingComplete"))})}remove(e){const t=this,i=t._items[e];i?(t.isVirtualized?t._items.splice(e,1):i.parentNode.removeChild(i),i.selected&&t.unselect(i),t._refreshItems(),t._refreshSelection(),0===t.selectedIndexes.length&&0<t._items.length&&("oneOrMany"===t.selectionMode||"one"===t.selectionMode||"oneOrManyExtended"===t.selectionMode)&&t.select(t._items[0])):t.error(t.localize("indexOutOfBound",{elementType:t.nodeName.toLowerCase(),method:"remove"}))}_queryItems(e,t){const l=this,o=[],s=function(i,o){if(i.grouped)return i;switch(t){case"startsWith":if(0===i.label.indexOf(o))return i;break;case"startsWithIgnoreCase":if(0===i.label.toLowerCase().indexOf(o.toLowerCase()))return i;break;case"doesNotContain":if(0>i.label.indexOf(o))return i;break;case"doesNotContainIgnoreCase":if(0>i.label.toLowerCase().indexOf(o.toLowerCase()))return i;break;case"contains":if(-1<i.label.indexOf(o))return i;break;case"containsIgnoreCase":if(-1<i.label.toLowerCase().indexOf(o.toLowerCase()))return i;break;case"equals":if(0===i.label.localeCompare(o))return i;break;case"equalsIgnoreCase":if(0===i.label.toLowerCase().localeCompare(o.toLowerCase()))return i;break;case"endsWith":if(i.label.endsWith(o))return i;break;case"endsWithIgnoreCase":if(i.label.toLowerCase().endsWith(o.toLowerCase()))return i;break;case"custom":if(l.filterCallback(i,e))return i;}return null};if(0===e.length)return l._items;for(let n=0;n<l._items.length;n++){const t=s(l._items[n],e);t&&o.push(t)}return o}_select(e,t){const i=this,l=i.selectedIndexes.indexOf(i._indexOf(e)),o=i.selectedIndexes.slice(0),s=i.selectedValues.slice(0);if(e.selected=!0,-1===l)o.push(i._indexOf(e)),s.push(e.value||e.label);else return i._recycle(),!1;return(i.selectedIndexes=o,i.selectedValues=s,i._recycle(),i.$.hiddenInput.value=s.toString(),i.isCompleted&&!t&&i.isInitialized)?(i.$.fireEvent("change",{selected:e.selected,disabled:e.disabled,index:i._indexOf(e),label:e.label,value:e.value}),!0):void 0}unselect(e){const t=this;if(!e)return;if("string"==typeof e&&(e=t.getItem(e),!e))return;if("none"===t.selectionMode)return void t.clearSelection();const i=t.selectedIndexes.indexOf(t._indexOf(e)),l=t.selectedIndexes.slice(0),o=t.selectedValues.slice(0);if(e.selected=!1,0<=i)l.splice(i,1),o.splice(i,1);else return!1;return(t.selectedIndexes=l,t.selectedValues=o,t.$.hiddenInput.value=o.toString(),!!t.isCompleted)?(t.$.fireEvent("change",{selected:e.selected,disabled:e.disabled,index:t._indexOf(e),label:e.label,value:e.value}),t._recycle(),!0):void 0}_handleItemTemplate(e){if(null===e||!e)return;if("function"==typeof e)return e;const t=this;if(!("content"in document.createElement("template")))return t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()})),void(t.itemTemplate=null);if(e=document.getElementById(e),null===e||!("content"in e))return t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"itemTemplate"})),void(t.itemTemplate=null);const l=e.content,o=l.childNodes.length,s=/{{\w+}}/g;let n,r;t._bindingDetails=[],t._template=e;for(let a=0;a<o;a++){for(r=[];n=s.exec(l.childNodes[a].innerHTML);)r.push(n[0]);0<r.length&&t._bindingDetails.push({childNodeIndex:a,bindingString:r})}return!0}_handleKeyStrokes(e){const t=this,i="radioButton"===t.selectionMode||"checkBox"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode;let l=t._items;if(t.filterable&&0<t.$.filterInput.value.length&&(l=t._filteredItems),!(t.disabled||t.readonly)){switch(e){case"ArrowLeft":case"ArrowUp":t._handleArrowKeys(!0);break;case"ArrowRight":case"ArrowDown":t._handleArrowKeys(!1);break;case" ":{if(1>t.selectedIndexes.length&&!t._focusedItem)return;const e=t._focusedItem?t._focusedItem:t._items[t.selectedIndexes[t.selectedIndexes.length-1]],i=e=>{e.selected&&"radioButton"!==t.selectionMode?t.unselect(e):t.select(e)};if("oneOrMany"===t.selectionMode)return void(e.selected&&1<t.selectedIndexes.length?i(e):!e.selected&&i(e));i(e);break}case"Home":{if(0===l.length)return;i?t._focus(l[0]):(!t._keysPressed.Shift&&t.clearSelection(),t.select(l[0]),t._focus(l[0])),t._scrollView.scrollTop=0;break}case"End":{if(0===l.length)return;i?t._focus(l[l.length-1]):(!t._keysPressed.Shift&&t.clearSelection(),t.select(l[l.length-1]),t._focus(l[l.length-1])),t._scrollView.scrollTop=t._scrollView.scrollHeight;break}case"PageUp":{t._pageUpKeyHandler(l);break}case"PageDown":{t._pageDownKeyHandler(l);break}}t._recycle()}}_horizontalScrollbarHandler(e){const t=this;e.stopPropagation(),t.isVirtualized?t._recycle():t.$.itemsContainer.scrollLeft=e.detail.value}_unsort(){const e=this;e.isUpdating++;const t=function(e,t){let i=e.dataIndex,l=t.dataIndex;return i<l?-1:i>l?1:0};if(!e.isVirtualized){if(0<e._groups.length){e._groups.sort(t);let l=[];for(let o=0;o<e._groups.length;o++){const i=e._groups[o],s=[].concat(...i.querySelectorAll("smart-list-item"));s.sort(t),l=l.concat(s)}e._items=l}else e._items.sort(t);e._applySortOrder()}else if(0<e._groups.length){e._groups.sort(t);let l=[];for(let o=0;o<e._groups.length;o++){const i=e._groups[o],s=[].concat(...i.items);s.sort(t),l.push(i),l=l.concat(s)}e._items=l}else e._items.sort(t);e.isUpdating--}_applySortOrder(){const e=this,t=function(e){for(let t=0;t<e.length;t++){const i=e[t],l=i.parentNode;l&&l.appendChild(i)}};t(e._items),t(e._groups)}_sort(){const e=this;e.isUpdating++;const t=function(e,t){let i=e.label,l=t.label;return i<l?-1:i>l?1:0};if(e._groups.sort(t),!e.isVirtualized){if(0<e._groups.length){let l=[];for(let o=0;o<e._groups.length;o++){const i=e._groups[o],s=[].concat(...i.querySelectorAll("smart-list-item"));s.sort(t),l=l.concat(s)}e._items=l}else e._items.sort(t);e._applySortOrder()}else if(0<e._groups.length){let l=[];for(let o=0;o<e._groups.length;o++){const i=e._groups[o],s=[].concat(...i.items);l.push(i),s.sort(t),l=l.concat(s)}e._items=l}else e._items.sort(t);e.isUpdating--}getItem(e){const t=this;for(let l=0;l<t._items.length;l++)if(t._items[l].value===e)return t._items[l];return null}_focus(e){const t=this;!e||"none"===t.selectionMode||t.disabled||t.readonly||(t._focusedItem&&(t._focusedItem.focused=!1),t._focusedItem=e,t._focusedItem.focused=!0)}_keyDownHandler(e){const t=this;let i=e.key;if(!(t.disabled||t.readonly)&&!(t.filterable&&t.$.filterInput===document.activeElement)&&t._focused&&!(0===t._items.length||t.disabled||t.displayLoadingIndicator)){if(t.editable){if("F2"===i)return void t._dblclickEventHandler({target:t._focusedItem});if(t.$.editInput===document.activeElement)return}if("none"!==t.selectionMode){if(e.stopPropagation(),"Down"===i||"Right"===i||"Left"===i||"Up"===i?i="Arrow"+i:void 0,t.filterable)switch(i){case"ArrowLeft":case"ArrowRight":return;case"ArrowUp":case"ArrowDown":e.preventDefault();}if(t._applyIncrementalSearch(i),!(0>["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","Home","End","PageUp","PageDown"].indexOf(i))){if(e.preventDefault(),!t._focusedItem&&0<t._items.length)return void("one"===t.selectionMode||"oneOrMany"===t.selectionMode||"oneOrManyExtended"===t.selectionMode?t.select(t._items[0]):t._focus(t._items[0]));switch(t.selectionMode){case"one":if("Shift"===i||"Control"===i||" "===i)return;t._handleKeyStrokes(i);break;case"oneOrMany":case"zeroOrOne":case"zeroOrMany":case"radioButton":case"checkBox":if("Shift"===i||"Control"===i)return;t._handleKeyStrokes(i);break;case"oneOrManyExtended":if(" "===i)return;t._keysPressed[i]="keydown"===e.type,t._handleKeyStrokes(i);}}}}}_keyUpHandler(e){const t=this;if(!(t.editable&&t.$.editInput===document.activeElement)){if(t.filterable&&t.$.filterInput===document.activeElement)return t._filterTimer&&clearTimeout(t._filterTimer),void(t._filterTimer=setTimeout(function(){const e=t.context;t.context=t,t._filterItems(),t._scrollView.scrollTop=t.$.itemsContainer.scrollTop=0,t._scrollView.scrollLeft=t.$.itemsContainer.scrollLeft=0,t.context=e},300));if(t._focused){if(t._focusedItem&&t._focusedItem.hidden&&0<t._filteredItems.length){let e=t._filteredItems[0];e.grouped&&1<t._filteredItems.length&&(e=t._filteredItems[1]),t._focus(e),t._recycle()}e.stopPropagation(),e.preventDefault(),t.disabled||0>["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","PageUp","PageDown"].indexOf(e.key)||(t._keysPressed[e.key]=!1)}}}_mouseWheelHandler(e){const t=this;t._scrollView.hScrollBar.$.hasClass("smart-hidden")&&t._scrollView.vScrollBar.$.hasClass("smart-hidden")||!t.disabled&&!t._scrollView.vScrollBar.$.hasClass("smart-hidden")&&(e.stopPropagation(),e.preventDefault(),t._scrollView.scrollTo(t._scrollView.scrollTop+(0>e.deltaY?-t.offsetHeight:t.offsetHeight)))}_pageDownKeyHandler(e){const t=this;if(0===e.length)return;let i=t._items[t.selectedIndexes[t.selectedIndexes.length-1]];("checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode)&&t._focusedItem&&(i=t._focusedItem);let l;const o=t._indexOf(i);let s=i.top+t.$.itemsContainer.offsetHeight-i.height;for(let t=o;t<e.length;t++)if(e[t].top>=s){l=e[t];break}l||(l=e[e.length-1]),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode?t._focus(l):!l.selected&&(!t._keysPressed.Shift&&t.clearSelection(),t.select(l),t._focus(l)),(l.height+l.top>t.$.itemsContainer.scrollTop+t.$.itemsContainer.offsetHeight||l.top<t.$.itemsContainer.scrollTop)&&(t._scrollView.scrollTop=l.top-t.$.itemsContainer.offsetHeight+l.height)}_pageUpKeyHandler(e){const t=this;if(0===e.length)return;let i=t._items[t.selectedIndexes[t.selectedIndexes.length-1]];("checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode)&&t._focusedItem&&(i=t._focusedItem);const l=i.top-t.$.itemsContainer.offsetHeight,o=t._indexOf(i);let s;for(let t=o;0<t;t--)if(e[t].top<=l){s=e[t];break}s||(s=e[0]),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode?t._focus(s):!s.selected&&(!t._keysPressed.Shift&&t.clearSelection(),t.select(s),t._focus(s)),t._scrollView.scrollTop=s.top;const n=t._indexOf(s);0===n&&(t._scrollView.scrollTop=0)}clearItems(){const e=this;e.$.itemsInnerContainer.innerHTML="",e.clearSelection(),e._items=[],e.$placeholder.removeClass("smart-hidden")}_resizeHandler(e){const t=this;e.target!==t||t._isUpdatingScrollBars||(t._isUpdatingScrollBars=!0,t._initializeRecyclingItems(),t._refreshLayout(),t._isUpdatingScrollBars=!1)}_indexOf(e){const t=this;if(!e)return-1;let i=t._items.indexOf(e);return-1===i&&(i=t._items.indexOf(t.getItem(e.value))),i}_incrementalSearch(){const e=this,t="radioButton"!==e.selectionMode&&"checkBox"!==e.selectionMode&&"zeroOrMany"!==e.selectionMode&&"oneOrMany"!==e.selectionMode&&"zeroOrOne"!==e.selectionMode;let l,o=0;switch(e.incrementalSearchMode){case"containsIgnoreCase":case"equalsIgnoreCase":case"startsWithIgnoreCase":case"endsWithIgnoreCase":l=e._incrementalSearchQuery.toLowerCase();break;default:l=e._incrementalSearchQuery;}const s=function(i){i.grouped||i.unselectable||(t?(0<e.selectedIndexes.length&&e.clearSelection(),e._focus(i),e.select(i)):e._focus(i),(i.height+i.top>e.$.itemsContainer.scrollTop+e.$.itemsContainer.offsetHeight||i.top<e._scrollView.scrollTop)&&(e._scrollView.scrollTop=i.top),0===e._indexOf(i)&&(e._scrollView.scrollTop=0),e._indexOf(i)===e._items.length-1&&(e._scrollView.scrollTop=e._scrollView.scrollHeight))};0!==e._previousEntry.localeCompare(l)&&(e._incrementalSearchItems=e._queryItems(e._incrementalSearchQuery,e.incrementalSearchMode),delete e._itemPosition),e._previousEntry=l;const n=e._incrementalSearchItems.length;if(0!==n){if(1===n)return void s(e._incrementalSearchItems[0]);for(void 0===e._itemPosition?t&&e.clearSelection():e._itemPosition<n-1?o=e._itemPosition:(o=0,t?(e._incrementalSearchItems[e._itemPosition].selected=!1,e.selectedIndexes=[],e.selectedValues=[]):e._incrementalSearchItems[e._itemPosition].focused=!1),o;o<n;o++){if(e._incrementalSearchItems[o].selected&&t){e._incrementalSearchItems[o].selected=!1,e.selectedIndexes=[],e.selectedValues=[];continue}if(!t&&e._incrementalSearchItems[o].focused){e._incrementalSearchItems[o].focused=!1;continue}return s(e._incrementalSearchItems[o]),void(e._itemPosition=o)}}}_selectStartHandler(e){this.$.filterInput===document.activeElement||this.$.editInput===document.activeElement||e.preventDefault()}_handleArrowKeys(e){const t=this,i="radioButton"!==t.selectionMode&&"checkBox"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode;if(t.disabled||t.readonly)return;let l;if(t._focusedItem&&!t._keysPressed.Shift)l=t._indexOf(t._focusedItem),t._focusedItem.focused=!1;else if(0!==t.selectedIndexes.length)l=t.selectedIndexes[t.selectedIndexes.length-1];else return;const o=e?t._getPreviousItem(l):t._getNextItem(l);t._focus(o),i&&(t._keysPressed.Shift?t.select(o):t._items[l]!==o&&(t.clearSelection(),t.select(o))),t.ensureVisible(o)}_refreshFilter(){const e=this;return e.filterable?(e.$.filterInput.disabled=!!(e.disabled||e.displayLoadingIndicator),e.$filterInput.removeClass("smart-hidden"),void e.$itemsContainer.addClass("filter")):void(e.$.filterInput.disabled=!0,e.$filterInput.addClass("smart-hidden"),e.$itemsContainer.removeClass("filter"))}_setFocusable(){const e=this;return e.disabled||e.unfocusable?void e.removeAttribute("tabindex"):void(e.tabIndex=0<e.tabIndex?e.tabIndex:0)}_setLoadingIndicatorVisibility(){const e=this;return e.displayLoadingIndicator?void(e.$loadingIndicatorContainer.hasClass("smart-visibility-hidden")?e.$loadingIndicatorContainer.removeClass("smart-visibility-hidden"):e.$loadingIndicatorContainer.removeClass("smart-hidden")):void(e._areCSSVarsSupported?e.$loadingIndicatorContainer.addClass("smart-hidden"):e.$loadingIndicatorContainer.addClass("smart-visibility-hidden"))}_refreshLayout(){const e=this,t=e._items;if(e.__scrollHeight=null,e.__scrollWidth=null,e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),e.$itemsContainer.removeClass("hscroll"),e.$itemsContainer.removeClass("vscroll"),!t||null===t||0===t.length)return e._scrollView.hScrollBar.$.addClass("smart-hidden"),e._scrollView.vScrollBar.$.addClass("smart-hidden"),e.$filterInput.removeClass("vscroll"),e.$placeholder.removeClass("smart-hidden"),void(e.isVirtualized&&e._recycle());e.$placeholder.addClass("smart-hidden");let i=e._scrollWidth-e.$.itemsContainer.offsetWidth,l=e._scrollHeight;if(e._refreshHorizontalScrollBarVisibility(i),e._refreshVerticalScrollBarVisibility(l),!e._scrollView.vScrollBar.$.hasClass("smart-hidden"))return i=e._scrollWidth-e.$.itemsContainer.offsetWidth,e._refreshHorizontalScrollBarVisibility(i),e._scrollView.hScrollBar.$.hasClass("smart-hidden")?(e._scrollView.vScrollBar.$.removeClass("bottom-corner"),e._scrollView.hScrollBar.$.removeClass("bottom-corner")):(e._scrollView.hScrollBar.$.addClass("bottom-corner"),e._scrollView.vScrollBar.$.addClass("bottom-corner"),e.__scrollHeight+=e._scrollView.hScrollBar.offsetHeight,e._scrollView.scrollHeight=e.__scrollHeight),void(e.isVirtualized&&e._recycle());i=e._scrollWidth-e.$.itemsContainer.offsetWidth,e._refreshHorizontalScrollBarVisibility(i),e._scrollView.hScrollBar.$.hasClass("smart-hidden")||(e._scrollView.scrollHeight=e._scrollHeight,e._refreshVerticalScrollBarVisibility(l),e._scrollView.vScrollBar.$.hasClass("smart-hidden")?(e._scrollView.vScrollBar.$.removeClass("bottom-corner"),e._scrollView.hScrollBar.$.removeClass("bottom-corner")):(e._scrollView.hScrollBar.$.addClass("bottom-corner"),e._scrollView.vScrollBar.$.addClass("bottom-corner"))),e.isVirtualized&&e._recycle();const o=/Trident|Edge/.test(navigator.userAgent);!e.isRefreshing&&o&&setTimeout(function(){e.isRefreshing=!0,e._refreshLayout(),e.isRefreshing=!1},50)}_styleChangedHandler(){const e=this;e._refreshLayout()}_swipeLeftHandler(){}_swipeRightHandler(){}_refreshHorizontalScrollBarVisibility(e){const t=this;t._scrollView.scrollWidth=e,0<e?(t._scrollView.scrollLeft=t.$.itemsContainer.scrollLeft,t.$itemsContainer.addClass("hscroll"),t._scrollView.hScrollBar.$.removeClass("smart-hidden")):(t._scrollView.hScrollBar.$.addClass("smart-hidden"),t.$itemsContainer.removeClass("hscroll"))}_refreshVerticalScrollBarVisibility(e){const t=this;t._scrollView.scrollHeight=e,0<e?(t._scrollView.vScrollBar.$.removeClass("smart-hidden"),t.$itemsContainer.addClass("vscroll"),t.$filterInput.addClass("vscroll")):(t._scrollView.vScrollBar.$.addClass("smart-hidden"),t.$itemsContainer.removeClass("vscroll"),t.$filterInput.removeClass("vscroll"))}_validateTemplate(e,t){if(null!==t&&t){const i=this;return"content"in document.createElement("template")?(t=document.getElementById(t),null!==t&&"content"in t?t:(i.error(i.localize("invalidTemplate",{elementType:i.nodeName.toLowerCase(),property:e})),void(i[e]=null))):(i.error(i.localize("htmlTemplateNotSuported",{elementType:i.nodeName.toLowerCase()})),void(i[e]=null))}}_getItemIndexByPosition(e){const t=this,i=t.filterable&&0<t.$.filterInput.value.length?t._filteredItems:t._items,l=(i=>{let l=0,o=i.length-1;if(0>=e)return 0;const s=i[i.length-1];if(s.top<=e)return i.length-1;for(;!0;){const s=Math.floor((l+o)/2),n=i[s];if(t._isItemInPosition(n,e))return s;n.top<e?l=s+1:n.top>e&&(o=s-1)}})(i);return l}_isItemInPosition(e,t){const i=e.top,l=e.top+e.height;return i<=t&&l>t}get isVirtualized(){const e=this;return e.virtualized&&e.dataSource&&0<e.dataSource.length}_recycle(){const e=this;if(!e._recyclingItems)return;let t=e._height;e._height||(t=e._height=e.$.itemsContainer.offsetHeight);let l=0;const i=e._scrollView.scrollTop,o=e._getItemIndexByPosition(i),s=e.filterable&&0<e.$.filterInput.value.length?e._filteredItems:e._items,n=s[o];let r=n?n.top:0;if(e.$.itemsInnerContainer.style.left=-e._scrollView.scrollLeft+"px",e.$.itemsInnerContainer.style.top=-i+r+"px",e.isUpdating++,0<=o)for(let n=o;n<s.length;n++){const o=s[n];if(0!==o.height){if(r+o.height>=i&&r<=i+t){const t=e._recyclingItems[l++];if(!t)break;t.context=document,t.dataItem=o,t.label=o.label,t.value=o.value,t.selected=o.selected,t.focused=o.focused,t.hidden=o.hidden,t.grouped=o.grouped,t.unselectable=o.unselectable,e._alternateItem(t),t.title=o.title?o.title:"",t.displayMode=o.grouped?"plain":o.displayMode,0<e._scrollView.scrollWidth&&(t.style.width=e.$.itemsInnerContainer.offsetWidth+e._scrollView.scrollWidth+"px"),e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&e._applyTemplate(t,!1)}else break;r+=o.height}}if(l<e._recyclingItems.length)for(let t=l;t<e._recyclingItems.length;t++){const t=e._recyclingItems[l++],i=t.context;t.context=document,t.hidden=!0,t.context=i}e.isUpdating--}_verticalScrollbarHandler(e){const t=this,i=e.detail.value;return e.stopPropagation(),t.isVirtualized?t._recycle():t.$.itemsContainer.scrollTop=i,e.context.max===e.context.value?void t.$.fireEvent("scrollBottomReached"):void(e.context.min===e.context.value&&t.$.fireEvent("scrollTopReached"))}});