
/* Smart HTML Elements v1.1.0 (2018-June) 
Copyright (c) 2011-2018 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-menu-item",class extends Smart.BaseElement{static get properties(){return{checked:{value:!1,type:"boolean"},label:{value:"",type:"any"},level:{value:null,type:"number?"},separator:{value:!1,type:"boolean"},shortcut:{value:"",type:"string"},value:{value:null,type:"string?"}}}template(){return""}ready(){super.ready(),this.$.addClass("smart-unselectable")}propertyChangedHandler(e,n,t){const o=this;if("disabled"===e&&!1!==t&&o.checked){const i=o.menu;if(i){super.propertyChangedHandler(e,n,t),o.checked=!1;const r=o.parentItem,a=r?r.checkMode:i.checkMode;"radioButton"===a&&i._validateRadioButtonSelection(r,o.level,[])}}}}),Smart("smart-menu-items-group",class extends Smart.BaseElement{static get properties(){return{checkable:{value:!1,type:"boolean"},checked:{value:!1,type:"boolean"},checkMode:{value:"checkbox",allowedValues:["checkbox","radioButton"],type:"string"},dropDownHeight:{value:null,type:"number?"},expanded:{value:!1,type:"boolean"},label:{value:"",type:"any"},level:{value:null,type:"number?"},separator:{value:!1,type:"boolean"}}}template(){return""}ready(){super.ready(),this.$.addClass("smart-unselectable")}propertyChangedHandler(e,n,t){if(-1!==["checkable","checkMode","disabled"].indexOf(e)){const o=this,i=o.menu;if(i)switch(super.propertyChangedHandler(e,n,t),e){case"checkable":t?o.itemContainer.setAttribute("checkable",""):o.itemContainer.removeAttribute("checkable"),i._isContainerOpened(o.container.level,o.container)&&"tree"!==i.mode&&!i._minimized&&i._closeSubContainers(o.level+2);break;case"checkMode":o.itemContainer.setAttribute("check-mode",t),i._changeToRadioButtonMode(t,o.itemContainer,o);break;case"disabled":{if(!(Smart.ListMenu&&i instanceof Smart.ListMenu))i._isContainerOpened(o.container.level,o.container)&&i._closeSubContainers(o.level+1,o.container);else if(i._view)for(;o.contains(i._view);)i._backButtonClickHandler();if(!o.checked)return;o.checked=!1;const e=o.parentItem,n=e?e.checkMode:i.checkMode;"radioButton"===n&&i._validateRadioButtonSelection(e,o.level,[]);break}}}}}),Smart("smart-menu",class extends Smart.BaseElement{static get properties(){return{autoFocusOnMouseenter:{value:!1,type:"boolean"},checkable:{value:!1,type:"boolean"},checkboxes:{value:!1,type:"boolean"},checkMode:{value:"checkbox",allowedValues:["checkbox","radioButton"],type:"string"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},dropDownAppendTo:{value:null,type:"any?"},dropDownPosition:{value:"auto",allowedValues:["top-left","top-right","bottom-left","bottom-right","overlay-left","overlay-right","auto"],type:"string"},minimizeIconTemplate:{value:null,type:"string?"},minimizeWidth:{value:null,type:"number?"},mode:{value:"horizontal",allowedValues:["horizontal","vertical","dropDown","tree"],type:"string"},opened:{value:!1,type:"boolean"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},selectionMode:{value:"click",allowedValues:["click","mouseenter"],type:"string"}}}static get listeners(){return{click:"_selectionHandler",keydown:"_keydownHandler",mouseenter:"_mouseenterHandler",mouseleave:"_mouseleaveHandler",mouseout:"_mouseoutMouseoverHandler",mouseover:"_mouseoutMouseoverHandler",resize:"_resizeHandler",transitionend:"_transitionendHandler","hamburgerIcon.click":"_hamburgerIconClickHandler","mainContainer.click":"_mainContainerHandler","mainContainer.mouseleave":"_mainContainerHandler","mainContainer.mouseout":"_mainContainerHandler","mainContainer.mouseover":"_mainContainerHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}template(){return`<div id="container">
                    <div id="hamburgerIcon" class="smart-hamburger-icon smart-hidden">
                        <div id="hamburgerIconLineTop" class="smart-hamburger-icon-line smart-hamburger-icon-line-top"></div>
                        <div id="hamburgerIconLineCenter" class="smart-hamburger-icon-line smart-hamburger-icon-line-center"></div>
                        <div id="hamburgerIconLineBottom" class="smart-hamburger-icon-line smart-hamburger-icon-line-bottom"></div>
                        <div id="customIconContainer" class="smart-hamburger-icon-custom-container smart-hidden"></div>
                    </div>
                    <smart-repeat-button id="scrollButtonNear" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-near smart-hidden">
                        <div id="arrowNear" class="smart-arrow"></div>
                    </smart-repeat-button>
                    <div id="mainContainer" class="smart-menu-main-container">
                        <content></content>
                    </div>
                    <smart-repeat-button id="scrollButtonFar" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-far smart-hidden">
                        <div id="arrowFar" class="smart-arrow"></div>
                    </smart-repeat-button>
                </div>`}attached(){const e=this;if((super.attached(),!(Smart.ListMenu&&e instanceof Smart.ListMenu))&&e.isCompleted&&null!==e.dropDownAppendTo)if(e._minimized)e._dropDownParent.appendChild(e.$.mainContainer);else for(let n=0;n<e._containersInBody.length;n++)e._dropDownParent.appendChild(e._containersInBody[n])}detached(){const e=this;super.detached();Smart.ListMenu&&e instanceof Smart.ListMenu||null!==e.dropDownAppendTo&&(e._minimized?e._dropDownParent.removeChild(e.$.mainContainer):e._removeContainersInBody())}ready(){super.ready();const e=this;e._edge=Smart.Utilities.Core.Browser.Edge,e._containers=[],e._containersInBody=[],e._openedContainers=[],e._containersFixedHeight=[],e._menuItemsGroupsToExpand=[],e._createElement()}addItem(e,n){const t=this;if(!(e instanceof Smart.MenuItem||e instanceof Smart.MenuItemsGroup))return;let o,i;if(void 0===n)n=t.$.mainContainer,o=1,i=n;else{if("string"==typeof n&&(n=t.getItem(n)),void 0===n||!(n instanceof Smart.MenuItemsGroup&&(t.contains(n)||n.container.ownerElement===t)))return;o=n.level+1,i=n.itemContainer}if(t._createItemHTMLStructure(e,o,n,i.childElementCount,0),e instanceof Smart.MenuItemsGroup&&t._processHTML(e,o+1),i.appendChild(e),t._checkOverflowAddRemove(e.level,i),e instanceof Smart.MenuItemsGroup&&("tree"===t.mode||t._minimized)){const n=e.getElementsByClassName("smart-menu-items-group-arrow");for(let e=0;e<n.length;e++)n[e].innerHTML="&#xe804";t._expandItemsByDefault()}}checkItem(e){const n=this,t=n.getItem(e);void 0===t||t.checked||t.disabled||t.templateApplied||n._toggleItem(t)}close(){const e=this;if(!("dropDown"!==e.mode||!1===e.opened&&e.$.hasClass("smart-visibility-hidden"))){const n=e.$.fireEvent("closing");n.defaultPrevented?e.opened=!0:(e.opened=!1,e.$.addClass("smart-visibility-hidden"),e.$.fireEvent("close"))}}collapseItem(e){const n=this,t=n.getItem(e);if(!(void 0===t||t instanceof Smart.MenuItem)){const e=t.level;if(n._openedContainers[e+1]&&n._isContainerOpened(e+1,t.container)){const o=n.mode;n._closeSubContainers(e+1,t.container,void 0,!0),(1===e||"tree"===o)&&n._checkOverflow(n.$.mainContainer,"horizontal"===o,[n.$.scrollButtonNear,n.$.scrollButtonFar])}}}expandItem(e){const n=this,t=n.getItem(e);if(void 0===t||t instanceof Smart.MenuItemsGroup&&n._isContainerOpened(t.level+1,t.container))return;const o=[t];let i=t.parentItem;for(n._discardKeyboardHover();i;)o.unshift(i),i=i.parentItem;for(let t=0;t<o.length;t++){const e=o[t];if(t==o.length-1&&e instanceof Smart.MenuItem){e.disabled||e.templateApplied||n._hoverViaKeyboard(e);break}n._isContainerOpened(e.container.level,e.container)||n._selectionHandler({target:e,type:"expand",isTrusted:!0},e)}}getItem(e){const n=this;let t=document.getElementById(e);return null!==t&&(t instanceof Smart.MenuItem||t instanceof Smart.MenuItemsGroup)&&(n.contains(t)||t.parentElement.ownerElement===n)||(t=n._menuItems[e]),t}maximize(){const e=this;if(e._minimized){if(e.$.mainContainer.style.marginTop="",e.$.mainContainer.style.marginLeft="",e._closeSubContainers(2),e._minimized=!1,e._minimizedDropDownOpened&&(e.$hamburgerIcon.removeClass("smart-close-button"),e._minimizedDropDownOpened=!1),null!==e.dropDownAppendTo&&e._appendMinimizedContainerToMenu(e.$.mainContainer,e.$.scrollButtonFar),"tree"!==e.mode){e.$mainContainer.addClass("smart-menu-main-container"),e.$mainContainer.removeClass("smart-menu-minimized-items-container");const n=e.getElementsByClassName("smart-menu-items-group-arrow");for(let t=0;t<n.length;t++)e._setArrowDirection(n[t],n[t].parentElement.parentElement.level+1);null!==e.dropDownAppendTo&&e._moveDropDownsToExternalContainer(),e._applyContainerFixedHeight()}e.$mainContainer.removeClass("smart-visibility-hidden"),e.$hamburgerIcon.addClass("smart-hidden"),e.removeAttribute("minimized"),e._checkOverflow(e.$.mainContainer,"horizontal"===e.mode,[e.$.scrollButtonNear,e.$.scrollButtonFar])}}minimize(){const e=this;if(!(e._minimized||"dropDown"===e.mode)){e._closeSubContainers(2),"tree"!==e.mode&&(null!==e.dropDownAppendTo&&e._moveDropDownsToMenu(),e._removeContainerFixedHeight());const n=e.getElementsByClassName("smart-menu-items-group-arrow");e._hideMainContainerScrollButtons(),e.$mainContainer.removeClass("smart-menu-main-container"),e.$mainContainer.addClass("smart-visibility-hidden"),e._edge&&e.$mainContainer.addClass("not-in-view"),e.$hamburgerIcon.removeClass("smart-hidden"),setTimeout(function(){null!==e.dropDownAppendTo&&e._appendMinimizedContainerToExternalElement(e.$.mainContainer),e.$mainContainer.addClass("smart-menu-minimized-items-container")},0);for(let e=0;e<n.length;e++)n[e].innerHTML="&#xe804";e._minimized=!0,e.setAttribute("minimized","")}}open(e,n){const t=this;if("dropDown"===t.mode){const o=t.$.fireEvent("opening");o.defaultPrevented?t.opened=!1:(t.opened=!0,!isNaN(e)&&(t.style.left=e+1+"px"),!isNaN(n)&&(t.style.top=n+1+"px"),t.$.removeClass("smart-visibility-hidden"),t.$.fireEvent("open"),!t.$.hasClass("animation")&&t.focus())}}removeItem(e){const n=this;if("string"==typeof e&&(e=n.getItem(e)),void 0!==e&&(e instanceof Smart.MenuItem||e instanceof Smart.MenuItemsGroup)&&(n.contains(e)||e.parentElement.container.ownerElement===n)){const t=e.parentElement;if(e instanceof Smart.MenuItemsGroup){const t=e.container;if(n._isContainerOpened(t.level,t)&&n._closeSubContainers(t.level,t),1===e.level){const e=n._containersInBody.indexOf(t);-1!==e&&(n._containersInBody.splice(e,1),null!==n.dropDownAppendTo&&"tree"!==n.mode&&!n._minimized&&n._dropDownParent.removeChild(t))}}t.removeChild(e),n._refreshContainersArrays(),n._menuItems={},n._refreshItemPaths(n.$.mainContainer,!0),n._checkOverflowAddRemove(e.level,t)}}_setFocusable(){const e=this;return e.disabled||e.unfocusable?void e.removeAttribute("tabindex"):void((null===e.getAttribute("tabindex")||0>e.getAttribute("tabindex"))&&e.setAttribute("tabindex",0))}uncheckItem(e){const n=this,t=n.getItem(e);void 0===t||!t.checked||t.disabled||t.templateApplied||n._toggleItem(t)}propertyChangedHandler(e,n,t){function o(){(null!==a.dropDownAppendTo||"tree"===a.mode)&&a._checkOverflow(a.$.mainContainer,"horizontal"===a.mode,[a.$.scrollButtonNear,a.$.scrollButtonFar])}function r(e,n,t){t?n.setAttribute(e,""):n.removeAttribute(e)}super.propertyChangedHandler(e,n,t);const a=this;switch(e){case"checkable":"tree"===a.mode||a._minimized?a._minimized&&null!==a.dropDownAppendTo&&r("checkable",a.$.mainContainer,t):a._closeSubContainers(2);break;case"checkboxes":if(a._close(),null!==a.dropDownAppendTo){for(let e=0;e<a._containers.length;e++){const n=a._containers[e];r("checkboxes",n,t)}a._minimized&&r("checkboxes",a.$.mainContainer,t)}break;case"checkMode":a._changeToRadioButtonMode(t,a.$.mainContainer),a._minimized&&null!==a.dropDownAppendTo&&a.$.mainContainer.setAttribute("check-mode",t);break;case"dataSource":{let e=!1;a._minimized&&(a.maximize(),e=!0),a._removeContainersInBody(),a._containersInBody=[],a._menuItems={},a._processDataSource(),e?a.minimize():o(),a._expandItemsByDefault();break}case"dropDownAppendTo":{const e=a._dropDownParent;if(a._getDropDownParent(),a._dropDownParent===e||"tree"===a.mode&&!a._minimized)return;if(a._close(),a._minimized)return void(null===t?a._appendMinimizedContainerToMenu(a.$.mainContainer,a.$.scrollButtonFar):a._appendMinimizedContainerToExternalElement(a.$.mainContainer));if(null!==a._dropDownParent&&null===e)a._moveDropDownsToExternalContainer();else if(null===a._dropDownParent&&null!==e)a._moveDropDownsToMenu();else if(null!==a._dropDownParent&&null!==e)for(let e=0;e<a._containersInBody.length;e++)a._dropDownParent.appendChild(a._containersInBody[e]);null===t?a._hideMainContainerScrollButtons():a._checkOverflow(a.$.mainContainer,"horizontal"===a.mode,[a.$.scrollButtonNear,a.$.scrollButtonFar]);for(let e=0;e<a._containersFixedHeight.length;e++)a._containersFixedHeight[e].itemContainer.checkOverflow=!0;break}case"disabled":t&&a._close(),a._setFocusable(),a.$.scrollButtonNear.disabled=t,a.$.scrollButtonFar.disabled=t,t||"hidden"===a.overflow||null===a.dropDownAppendTo&&"tree"!==a.mode||a._updateScrollButtonVisibility(a.$.mainContainer,"horizontal"===a.mode,[a.$.scrollButtonNear,a.$.scrollButtonFar]);break;case"dropDownPosition":case"mode":{if("mode"===e){if("tree"===n||a._minimized?(a._closeSubContainersTreeMode(2,void 0,void 0,void 0,!0),a._openedContainers=[]):a._closeSubContainersDefaultMode(2),a._discardKeyboardHover(!0),a._minimized&&a._minimizedDropDownOpened&&(a.$mainContainer.addClass("smart-visibility-hidden"),a.$hamburgerIcon.removeClass("smart-close-button"),a._minimizedDropDownOpened=!1),("horizontal"===t||"horizontal"===n)&&a._changeScrollButtonsArrows(),a._minimized)return void("dropDown"===t&&(a.mode=n));!1===a.opened&&("dropDown"===t?a.$.addClass("smart-visibility-hidden"):"dropDown"===n&&a.$.removeClass("smart-visibility-hidden")),"tree"===n?(null!==a.dropDownAppendTo&&a._moveDropDownsToExternalContainer(),a.$mainContainer.addClass("smart-menu-main-container"),a.$mainContainer.removeClass("smart-menu-minimized-items-container"),a._applyContainerFixedHeight()):"tree"===t&&(null!==a.dropDownAppendTo&&a._moveDropDownsToMenu(),a._applyTreeMode()),"auto"===a.overflow&&a._hideMainContainerScrollButtons(),o()}if("tree"===a.mode||a._minimized)return void(a._minimized&&null!==a.dropDownAppendTo&&a.$.mainContainer.setAttribute(a.properties[e].attributeName,t));"dropDownPosition"===e&&a._close();const r=a.getElementsByTagName("smart-menu-items-group");for(let e=0;e<r.length;e++){const n=r[e];a._setArrowDirection(n.children[0].children[1],n.level+1)}if(null!==a.dropDownAppendTo)for(let n=0;n<a._containers.length;n++){const o=a._containers[n];o.setAttribute(Smart.Utilities.Core.toDash(e),t),2<o.level&&a._setArrowDirection(o.menuItemsGroup.children[0].children[1],o.level)}break}case"minimizeIconTemplate":a._applyMinimizeIconTemplate(t,n);break;case"minimizeWidth":a._resizeHandler();break;case"opened":t?a.open():a.close();break;case"overflow":a._handleOverflowChange();break;case"theme":if(null===a.dropDownAppendTo||Smart.ListMenu&&a instanceof Smart.ListMenu)return;if(a._minimized)""!==n&&a.$mainContainer.removeClass(n),""!==t&&a.$mainContainer.addClass(t);else for(let e=0;e<a._containers.length;e++){const o=a._containers[e];""!==n&&o.classList.remove(n),""!==t&&o.classList.add(t)}break;case"unfocusable":a._setFocusable();}}_addOpenedContainer(e,n){const t=this;return"tree"===t.mode||t._minimized?(t._openedContainers[e]||(t._openedContainers[e]=[]),n.menuItemsGroup.expanded=!0,t._openedContainers[e].push(n)):void(t._openedContainers[e]=n)}_appendMinimizedContainerToExternalElement(e){const n=this;e.ownerElement=n,n._dropDownParent.appendChild(e),n.$.hasClass("animation")&&e.$.addClass("animation"),""!==n.theme&&e.$.addClass(n.theme),e.$.addClass("smart-menu-drop-down"),e.setAttribute("external",""),e.setAttribute("check-mode",n.checkMode),e.setAttribute("drop-down-position",n.dropDownPosition),e.setAttribute("mode",n.mode),e.setAttribute("loading-indicator-position",n.loadingIndicatorPosition),n.checkable&&e.setAttribute("checkable",""),n.checkboxes&&e.setAttribute("checkboxes",""),n.$.view&&n.detachedChildren.indexOf(n.$.view)&&n.detachedChildren.push(n.$.view)}_appendMinimizedContainerToMenu(e,n){const t=this;delete e.ownerElement,t.$.container.insertBefore(e,n),e.$.removeClass("animation"),""!==t.theme&&e.$.removeClass(t.theme),e.$.removeClass("smart-menu-drop-down"),e.removeAttribute("external"),e.removeAttribute("checkable"),e.removeAttribute("checkboxes"),e.removeAttribute("check-mode"),e.removeAttribute("drop-down-position"),e.removeAttribute("mode"),e.removeAttribute("loading-indicator-position"),e.removeAttribute("style")}_applyContainerFixedHeight(){const e=this;for(let n=0;n<e._containers.length;n++){const t=e._containers[n];-1===e._containersFixedHeight.indexOf(t)?t.style.height="":(t.style.height=t.menuItemsGroup.dropDownHeight+"px",t.itemContainer.checkOverflow=!0)}}_applyMinimizeIconTemplate(e,n){const t=this;if(null===e){if(null===n)return;t.$customIconContainer.addClass("smart-hidden"),t.$.customIconContainer.innerHTML="",t.$hamburgerIconLineTop.removeClass("smart-hidden"),t.$hamburgerIconLineCenter.removeClass("smart-hidden"),t.$hamburgerIconLineBottom.removeClass("smart-hidden")}else{const o=document.getElementById(e);if(null!==o&&"template"===o.tagName.toLowerCase()){const e=document.importNode(o.content,!0);t.$hamburgerIconLineTop.addClass("smart-hidden"),t.$hamburgerIconLineCenter.addClass("smart-hidden"),t.$hamburgerIconLineBottom.addClass("smart-hidden"),t.$.customIconContainer.innerHTML="",t.$.customIconContainer.appendChild(e),t.$customIconContainer.removeClass("smart-hidden")}else t.minimizeIconTemplate=n}}_applyTreeMode(){const e=this,n=e.getElementsByClassName("smart-menu-items-group-arrow");e.$mainContainer.removeClass("smart-menu-main-container"),e.$mainContainer.addClass("smart-menu-minimized-items-container");for(let e=0;e<n.length;e++)n[e].innerHTML="&#xe804";e._removeContainerFixedHeight()}_arrowLeftHandler(e,n,t,o){const i=this;1===e?"horizontal"===n&&i._levelOneNavigate("_getLastEnabledChild",t,o):2===e?i._levelOneNavigateFromLowerLevel("_getPreviousEnabledChild",t):i._escapeHandler(t,e,o)}_arrowRightHandler(e,n,t,o){const i=this;1===e?"horizontal"===n?i._levelOneNavigate("_getFirstEnabledChild",t,o):i._levelOneOpenDropDown(t):t instanceof Smart.MenuItemsGroup?i._selectionHandler({target:t,isTrusted:!0}):i._levelOneNavigateFromLowerLevel("_getNextEnabledChild",t)}_browserBoundsDetection(e){const n=this;if(("tree"!==n.mode||n._minimized)&&(e.style.marginTop="",e.style.marginLeft="","auto"===n.dropDownPosition)){const n=document.documentElement.clientWidth,t=document.documentElement.clientHeight,o=e.getBoundingClientRect(),i=n-o.left-e.offsetWidth,r=t-o.top-e.offsetHeight;0>i&&(e.style.marginLeft=i+"px"),0>r&&(e.style.marginTop=r+"px")}}_changeScrollButtonsArrows(){const e=this;"horizontal"===e.mode?(e.$arrowNear.removeClass("smart-arrow-up"),e.$arrowNear.addClass("smart-arrow-left"),e.$arrowFar.removeClass("smart-arrow-down"),e.$arrowFar.addClass("smart-arrow-right")):(e.$arrowNear.removeClass("smart-arrow-left"),e.$arrowNear.addClass("smart-arrow-up"),e.$arrowFar.removeClass("smart-arrow-right"),e.$arrowFar.addClass("smart-arrow-down"))}_changeToRadioButtonMode(e,n,t){if("radioButton"===e){const e=[];for(let t=0;t<n.childElementCount;t++){const o=n.children[t];!o.checked||o.disabled||o.templateApplied||e.push(o)}this._validateRadioButtonSelection(t,t?t.level+1:1,e)}}_checkOverflow(e,n,t){var o=Math.round;const i=this,r=e===i.$.mainContainer?i.overflow:"auto";if(i._minimized||"hidden"===r||null===i.dropDownAppendTo&&"tree"!==i.mode&&e===i.$.mainContainer)return;let a,d,l;if(n?(a=o(e.scrollWidth)>o(e.offsetWidth),d=0<o(e.scrollLeft),l=o(e.offsetWidth+e.scrollLeft)<o(e.scrollWidth)):(a=o(e.scrollHeight)>o(e.offsetHeight),d=0<o(e.scrollTop),l=o(e.offsetHeight+e.scrollTop)<o(e.scrollHeight)),a)"auto"===r?(!e.classList.contains("scroll-buttons-shown")&&e.classList.add("scroll-buttons-shown"),d?t[0].$.removeClass("smart-hidden"):t[0].$.addClass("smart-hidden"),l?t[1].$.removeClass("smart-hidden"):t[1].$.addClass("smart-hidden"),!1===(d&&l)?e.classList.add("one-button-shown"):e.classList.remove("one-button-shown"),!i.disabled&&(t[0].disabled=!1,t[1].disabled=!1)):(t[0].$.removeClass("smart-hidden"),t[1].$.removeClass("smart-hidden"),i.disabled?(t[0].disabled=!0,t[1].disabled=!0):(t[0].disabled=!d,t[1].disabled=!l));else if(!a&&"auto"===r&&e.classList.contains("scroll-buttons-shown"))e.classList.remove("scroll-buttons-shown"),e.classList.remove("one-button-shown"),t[0].$.addClass("smart-hidden"),t[1].$.addClass("smart-hidden");else if(!a&&"scroll"===r)t[0].disabled=!0,t[1].disabled=!0;else return;e===i.$.mainContainer&&"tree"!==i.mode&&i._close()}_checkOverflowAddRemove(e,n){const t=this;1===e&&null!==t.dropDownAppendTo||"tree"===t.mode?t._checkOverflow(t.$.mainContainer,"horizontal"===t.mode,[t.$.scrollButtonNear,t.$.scrollButtonFar]):1<e&&n.dropDownHeightSet&&(t._isContainerOpened(e,n.container)?t._checkOverflow(n,!1,[n.container.children[0],n.container.children[2]]):n.checkOverflow=!0)}_close(){const e=this;e._closeSubContainers(2),e._discardKeyboardHover(!0),e._minimized&&e._minimizedDropDownOpened&&(e.$mainContainer.addClass("smart-visibility-hidden"),e._edge&&(e.$.mainContainer.style.left="",e.$.mainContainer.style.top="",e.$mainContainer.addClass("not-in-view")),e.$hamburgerIcon.removeClass("smart-close-button"),e._minimizedDropDownOpened=!1)}_closeSubContainers(e,n,t,o){const i=this;"tree"===i.mode||i._minimized?i._closeSubContainersTreeMode(e,n,t,o):i._closeSubContainersDefaultMode(e,n,t,o)}_closeSubContainersDefaultMode(e,n,t,o){function r(n){const i=d[n].menuItemsGroup;t&&n===e||i.$.removeClass("hovered"),i.$.removeClass("smart-menu-items-group-opened"),d[n].$.addClass("smart-visibility-hidden"),a._edge&&2===n&&!a.$.hasClass("animation")&&(d[n].style.left="",d[n].style.top="",d[n].$.addClass("not-in-view")),a._minimized&&a._browserBoundsDetection(a.$.mainContainer),o&&a.$.fireEvent("collapse",{item:i,label:i.label,path:i.path,value:i.value}),d[n]=void 0}const a=this,d=a._openedContainers;for(let a=d.length-1;a>=e;a--)void 0!==d[a]&&r(a,!0)}_closeSubContainersTreeMode(e,n,t,o,r){const a=this;if(void 0===n){for(let e=a._openedContainers.length-1;2<=e&&void 0!==a._openedContainers[e];e--)for(let n=a._openedContainers[e].length-1;0<=n;n--)a._closeSubContainersTreeMode(e,a._openedContainers[e][n],void 0,void 0,r);return void(a._openedContainers=[])}const i=n.menuItemsGroup;if(i.expanded=!1,t?i.$.addClass("hovered"):i.$.removeClass("hovered"),i.$.removeClass("smart-menu-items-group-opened"),r||!a.$.hasClass("animation")?(n.$.addClass("smart-visibility-hidden"),a._minimized&&a._browserBoundsDetection(a.$.mainContainer)):a._collapseSection(n),o&&a.$.fireEvent("collapse",{item:i,label:i.label,path:i.path,value:i.value}),!!a._openedContainers[e]){const t=a._openedContainers[e].indexOf(n);-1!==t&&a._openedContainers[e].splice(t,1)}}_collapseSection(e){const n=this,t=e.scrollHeight+"px";e.style.transition="none",requestAnimationFrame(function(){return"tree"===n.mode||n._minimized?void(e.style.height=t,e.style.transition="",requestAnimationFrame(function(){e.style.height="0px"})):void(e.style.transition="")}),e.addEventListener("transitionend",function t(){e.removeEventListener("transitionend",t),e.$.addClass("smart-visibility-hidden"),n._checkOverflow(n.$.mainContainer,!1,[n.$.scrollButtonNear,n.$.scrollButtonFar]),n._minimized&&n._browserBoundsDetection(n.$.mainContainer)})}_createElement(){const e=this,n=e.mode;e.disabled&&(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0),null===e.dataSource&&e.$.mainContainer.firstElementChild instanceof HTMLUListElement&&e._processUList();const t=e.querySelectorAll("smart-menu-item"),o=function(){e._changeScrollButtonsArrows(),e._setFocusable(),"dropDown"===n&&!1===e.opened&&(e.$.hasClass("animation")?(e.$.removeClass("animation"),e.$.addClass("smart-visibility-hidden"),e.$.addClass("animation")):e.$.addClass("smart-visibility-hidden")),e._getDropDownParent(),e._menuItems={},null===e.dataSource?e._processHTML(void 0,1):e._processDataSource(),(null!==e.dropDownAppendTo||"tree"===e.mode)&&"scroll"===e.overflow&&(e.$mainContainer.addClass("scroll-buttons-shown"),e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden"),e._updateScrollButtonVisibility(e.$.mainContainer,"horizontal"===n,[e.$.scrollButtonNear,e.$.scrollButtonFar])),e._applyMinimizeIconTemplate(e.minimizeIconTemplate,null),"tree"===n&&e._applyTreeMode(),null!==e.minimizeWidth&&e.offsetWidth<=e.minimizeWidth?e.minimize():e._checkOverflow(e.$.mainContainer,"horizontal"===n,[e.$.scrollButtonNear,e.$.scrollButtonFar]),e._expandItemsByDefault(),e.__onCompleted&&(e._onCompleted=e.__onCompleted,e.__onCompleted=null,e._onCompleted())};0===t.length?o():(e._onCompleted&&(e.__onCompleted=e._onCompleted,e._onCompleted=null),e._ensureItemsReady(t,o))}_ensureItemsReady(e,n){const t=this,o=function(){const t=function(n){for(let t=0;t<e.length;t++)e[t].context="node"===n?e[t]:document};t("node"),n(),t()};if(0===e.length)o();else{t._nodesReadyListeners=0;for(let n=0;n<e.length;n++){const i=e[n],r=function(){t._nodesReadyListeners--,0===t._nodesReadyListeners&&(o(),delete t._nodesReadyListeners)}.bind(t);i.isCompleted||(t._nodesReadyListeners++,i.completeHandlers=[],i._onCompleted=r)}0===t._nodesReadyListeners&&o()}}_createItemHTMLStructure(e,n,t,o){const i=this,r=document.createElement("div"),a=document.createElement("div");let d;e.menu=i,1<n?(e.originalIndex=o,d=t.path+"."+e.originalIndex,e.parentItem=t):(e.originalIndex=o,d=""+o),e.path=d,i._menuItems[d]=e,r.className="smart-menu-item-label-container",a.className="smart-menu-item-label-element";const l=Array.from(e.childNodes);for(let r=0;r<l.length;r++){const e=l[r];if(e instanceof Smart.MenuItem||e instanceof Smart.MenuItemsGroup)break;a.appendChild(e)}if(""===a.innerHTML.trim()){const n=e.label;n&&""!==n?i._setLabel(n,a,e,!0):(e.label="Item "+o,a.innerHTML="Item "+o)}else e.label=a.innerHTML.trim();if(e instanceof Smart.MenuItemsGroup&&void 0===e.titleLabel&&(e.titleLabel=e.label),r.appendChild(a),e.level=n,e.shortcut&&e instanceof Smart.MenuItem){const n=document.createElement("div");n.className="smart-menu-item-shortcut",i._setLabel(e.shortcut,n,e),r.appendChild(n)}e.insertBefore(r,e.children[0])}_createMenuItemsGroupContainer(e,n){const t=this,o=document.createElement("div"),i=document.createElement("div");if(o.className="smart-menu-drop-down smart-visibility-hidden",t._edge&&2===n&&"tree"!==t.mode&&(o.className+=" not-in-view"),o.$=Smart.Utilities.Extend(o),o.level=n,o.setAttribute("level",n),o.menuItemsGroup=e,i.className="smart-menu-item-container",i.$=Smart.Utilities.Extend(i),i.container=o,i.menuItemsGroup=e,e.checkable&&i.setAttribute("checkable",""),i.setAttribute("check-mode",e.checkMode),o.itemContainer=i,o.appendChild(i),null!==e.dropDownHeight){const n=document.createElement("smart-repeat-button"),r=document.createElement("smart-repeat-button");n.className="smart-menu-scroll-button smart-spin-button smart-scroll-button-near smart-hidden",n.innerHTML="<div id=\"arrowNear\" class=\"smart-arrow smart-arrow-up\"></div>",r.className="smart-menu-scroll-button smart-spin-button smart-scroll-button-far smart-hidden",r.innerHTML="<div id=\"arrowNear\" class=\"smart-arrow smart-arrow-down\"></div>",o.insertBefore(n,i),o.appendChild(r),o.$.addClass("drop-down-height-set"),i.dropDownHeightSet=!0,i.checkOverflow=!0,o.style.height=e.dropDownHeight+"px",t._containersFixedHeight.push(o)}return o}_discardKeyboardHover(e){const n=this;!n._hoveredViaKeyboard||!e&&n._hoveredViaKeyboard instanceof Smart.MenuItemsGroup&&n._isContainerOpened(n._hoveredViaKeyboard.level+1,n._hoveredViaKeyboard.container)||(n._hoveredViaKeyboard.$.removeClass("hovered"),n._hoveredViaKeyboard=void 0)}_documentUpHandler(e){const n=this,t=e.originalEvent.target;if(!n.disabled&&t.closest)if(!n.contains(t)&&null===t.closest(".smart-menu-drop-down")||t===n.$.mainContainer){if("tree"===n.mode)return;n._close()}else(n.contains(t)||t.closest(".smart-list-menu-view")===n.$.view)&&n!==document.activeElement&&null===document.activeElement.closest("[template-applied]")&&n.focus()}_ensureVisible(e){const n=this;if(n._minimized)return;const t=n.mode;let o,i;if("tree"!==t&&e.parentElement!==n.$.mainContainer?(o=e.parentElement,i=[o.container.children[0],o.container.children[2]]):(o=n.$.mainContainer,i=[n.$.scrollButtonNear,n.$.scrollButtonFar]),o!==n.$.mainContainer||(null!==n.dropDownAppendTo||"tree"===n.mode)&&("auto"!==n.overflow||o.$.hasClass("scroll-buttons-shown"))){const r=o.getBoundingClientRect(),a=e.getBoundingClientRect();if("tree"===t)return void n._ensureVisibleTreeMode(e,a,o,r);if(o===n.$.mainContainer&&"horizontal"===t&&(r.left>a.left||r.right<a.right))o.scrollLeft=e.offsetLeft,n._updateScrollButtonVisibility(o,!0,i);else if(r.top>a.top||r.bottom<a.bottom){let t=e.offsetTop;o===n.$.mainContainer||i[0].$.hasClass("smart-hidden")||(t-=i[0].offsetHeight),o.scrollTop=t,n._updateScrollButtonVisibility(o,!1,i)}}}_ensureVisibleTreeMode(e,n,t,o){const i=this;o.top<=n.top&&o.bottom>=n.top+e.firstElementChild.offsetHeight||(e.scrollIntoView(),i._updateScrollButtonVisibility(t,!1,[i.$.scrollButtonNear,i.$.scrollButtonFar]))}_escapeHandler(e,n,t){const o=this;e&&e.$.removeClass("hovered"),o._closeSubContainers(n,void 0,void 0,!0),o._hoverViaKeyboard(t.menuItemsGroup)}_expandItemsByDefault(){const e=this;if(0!==e._menuItemsGroupsToExpand.length&&("tree"===e.mode||e._minimized)){const n=e.$.hasClass("animation");n&&e.$.removeClass("animation");for(let n=0;n<e._menuItemsGroupsToExpand.length;n++)e.expandItem(e._menuItemsGroupsToExpand[n].path);n&&e.$.addClass("animation"),e._menuItemsGroupsToExpand=[]}}_expandSection(e){const n=this,t=e.scrollHeight+"px";e.style.height=t,e.addEventListener("transitionend",function t(){e.removeEventListener("transitionend",t),e.style.height=null,n._checkOverflow(n.$.mainContainer,!1,[n.$.scrollButtonNear,n.$.scrollButtonFar]),n._minimized&&n._browserBoundsDetection(n.$.mainContainer)})}_getFirstEnabledChild(e){const n=e.children;for(let t=0;t<n.length;t++)if(this._isChildEnabled(n[t]))return n[t]}_getLastEnabledChild(e){const n=e.children;for(let t=n.length-1;0<=t;t--)if(this._isChildEnabled(n[t]))return n[t]}_getNextEnabledChild(e){if(e)for(;e.nextElementSibling;){const n=e.nextElementSibling;if(this._isChildEnabled(n))return n;e=n}}_getDropDownParent(){const e=this;let n=e.dropDownAppendTo;null===n?e._dropDownParent=null:"body"===n||n===document.body?e._dropDownParent=document.body:n instanceof HTMLElement?e._dropDownParent=n:"string"==typeof n?(n=document.getElementById(n),n instanceof HTMLElement?e._dropDownParent=n:(e.dropDownAppendTo=null,e._dropDownParent=null)):(e.dropDownAppendTo=null,e._dropDownParent=null),e._getPositionedParent()}_getPositionedParent(){const e=this,n={getBoundingClientRect:function(){return{left:0,top:0}}};if(null===e._dropDownParent)e._positionedParent=null;else if(e._dropDownParent===document.body)e._positionedParent=n;else{let t=e._dropDownParent;for(;"static"===window.getComputedStyle(t).position&&t!==document.body;)t=t.parentElement;e._positionedParent=t===document.body?n:t}}_getPreviousEnabledChild(e){if(e)for(;e.previousElementSibling;){const n=e.previousElementSibling;if(this._isChildEnabled(n))return n;e=n}}_hamburgerIconClickHandler(e,n){e&&e.stopPropagation();const t=this;if(void 0===n&&(Smart.ListMenu&&t instanceof Smart.ListMenu?n=t.$.view:n=t.$.mainContainer),!t.disabled)if(!t._minimizedDropDownOpened){if(null!==t.dropDownAppendTo){const e=t.dropDownPosition,o=window.scrollX||window.pageXOffset,i=window.scrollY||window.pageYOffset,r=t.getBoundingClientRect(),a=t._positionedParent.getBoundingClientRect();-1!==e.indexOf("right")||"auto"===e?(n.style.left=r.left-a.left+o+"px",n.style.right="initial"):-1!==e.indexOf("left")&&(n.style.left=r.right-a.left-n.offsetWidth+o+"px",n.style.right="initial"),-1!==e.indexOf("bottom")||-1!==e.indexOf("overlay")||"auto"===e?n.style.top=r.bottom-a.top+i+"px":-1!==e.indexOf("top")&&(n.style.top=r.top-a.top+i+"px")}t._edge&&n.$.removeClass("not-in-view"),n.$.removeClass("smart-visibility-hidden"),t.$hamburgerIcon.addClass("smart-close-button"),t._minimizedDropDownOpened=!0,t._browserBoundsDetection(n)}else t._close()}_handleOverflowChange(){const e=this;if((e._minimized||null===e.dropDownAppendTo&&"tree"!==e.mode)&&!(Smart.ListMenu&&e instanceof Smart.ListMenu))return;const n=e.overflow;let t;"horizontal"===e.mode?(t=!0,e.$.mainContainer.scrollLeft=0):(t=!1,e.$.mainContainer.scrollTop=0),"hidden"===n?(e.$mainContainer.removeClass("scroll-buttons-shown"),e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden")):(e.$.scrollButtonNear.disabled=e.disabled,e.$.scrollButtonFar.disabled=e.disabled,"auto"===n?(e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden"),e._checkOverflow(e.$.mainContainer,t,[e.$.scrollButtonNear,e.$.scrollButtonFar])):(e.$mainContainer.addClass("scroll-buttons-shown"),e.$mainContainer.removeClass("one-button-shown"),e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden"),e._updateScrollButtonVisibility(e.$.mainContainer,t,[e.$.scrollButtonNear,e.$.scrollButtonFar])))}_hideMainContainerScrollButtons(){const e=this;e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden"),e.$mainContainer.removeClass("scroll-buttons-shown"),e.$mainContainer.removeClass("one-button-shown")}_hoverViaKeyboard(e){if(e){const n=this;e.$.addClass("hovered"),n._hoveredViaKeyboard=e,n._ensureVisible(e)}}_isChildEnabled(e){return!(e.disabled||e.templateApplied||e.hidden||e instanceof HTMLDivElement)}_isContainerOpened(e,n){const t=this;return"tree"===t.mode||t._minimized?(t._openedContainers[e]||(t._openedContainers[e]=[]),-1!==t._openedContainers[e].indexOf(n)):t._openedContainers[e]===n}_keydownHandler(e){const n=this,t=e.key;if(document.activeElement!==n||-1===["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Escape","Home"," "].indexOf(t)||n.disabled)return;e.preventDefault();const o=n.mode;if("tree"===o||n._minimized)return void n._keydownHandlerTreeMode(t);const i=n.dropDownPosition,r=-1!==i.indexOf("left"),a="top-left"===i||"top-right"===i,d=n._openedContainers;let l,s=n.$.mainContainer,m=1;for(let n=d.length-1;0<=n;n--)if(void 0!==d[n]){s=d[n],m=s.level,s=s.itemContainer;break}switch(l=s.querySelector(".hovered[level=\""+m+"\""),t){case"ArrowDown":1===m?"horizontal"!==o||a?"horizontal"!==o&&n._levelOneNavigate("_getFirstEnabledChild",l,s):n._levelOneOpenDropDown(l):n._navigate("_getNextEnabledChild",l,s);break;case"ArrowLeft":r?1===m?"horizontal"===o?n._levelOneNavigate("_getLastEnabledChild",l,s):n._levelOneOpenDropDown(l):l instanceof Smart.MenuItemsGroup?n._selectionHandler({target:l,isTrusted:!0}):n._levelOneNavigateFromLowerLevel("_getPreviousEnabledChild",l):n._arrowLeftHandler(m,o,l,s);break;case"ArrowRight":r?1===m?"horizontal"===o&&n._levelOneNavigate("_getFirstEnabledChild",l,s):2===m?n._levelOneNavigateFromLowerLevel("_getNextEnabledChild",l):n._escapeHandler(l,m,s):n._arrowRightHandler(m,o,l,s);break;case"ArrowUp":1===m?"horizontal"===o&&a?n._levelOneOpenDropDown(l):"horizontal"!==o&&n._levelOneNavigate("_getLastEnabledChild",l,s):n._navigate("_getPreviousEnabledChild",l,s);break;case"End":case"Home":{const e="End"===t?n._getLastEnabledChild(s):n._getFirstEnabledChild(s);if(!e||l===e)return;l&&l.$.removeClass("hovered"),n._hoverViaKeyboard(e);break}case"Enter":l&&n._selectionHandler({target:l,isTrusted:!0});break;case"Escape":1<m&&n._escapeHandler(l,m,s);break;case" ":l&&n._toggleItem(l);}}_keydownHandlerTreeMode(e){function n(e){const n=e.level;return!1===e.disabled&&!0!==e.templateApplied&&(1===n||1<n&&r._isContainerOpened(n,e.parentElement.container)&&0<e.getBoundingClientRect().height)}function t(e){for(let t=e;t<a.length;t++){const e=a[t];if(n(e)){if(d){if(d===e)break;d.$.removeClass("hovered")}r._hoverViaKeyboard(e);break}}}function o(e){for(let t=e;0<=t;t--){const e=a[t];if(n(e)){if(d){if(d===e)break;d.$.removeClass("hovered")}r._hoverViaKeyboard(e);break}}}function i(){1<d.level&&(d.$.removeClass("hovered"),r._hoverViaKeyboard(d.parentItem))}const r=this,a=Array.from(r.$.mainContainer.querySelectorAll("smart-menu-item, smart-menu-items-group")),d=r.$.mainContainer.getElementsByClassName("hovered")[0];let l;switch(e){case"ArrowDown":l=d?a.indexOf(d)+1:0,t(l);break;case"ArrowLeft":if(!d)return;if(d instanceof Smart.MenuItem)i();else{if(r._isContainerOpened(d.level+1,d.container))return void r._closeSubContainers(d.level+1,d.container,!0,!0);i()}break;case"ArrowRight":if(!d||d instanceof Smart.MenuItem)return;r._isContainerOpened(d.level+1,d.container)?(d.$.removeClass("hovered"),r._hoverViaKeyboard(r._getFirstEnabledChild(d.itemContainer))):r._selectionHandler({target:d,type:"keydown",isTrusted:!0},d);break;case"ArrowUp":l=d?a.indexOf(d)-1:a.length-1,o(l);break;case"End":o(a.length-1);break;case"Enter":r._minimized&&!r._minimizedDropDownOpened?r._hamburgerIconClickHandler(void 0,r.$.mainContainer):d&&r._selectionHandler({target:d,type:"keydown",isTrusted:!0});break;case"Escape":r._minimized&&r._minimizedDropDownOpened&&r._close();break;case"Home":t(0);break;case" ":d&&r._toggleItem(d);}}_levelOneNavigate(e,n,t){const o=this;if(!n){const n=o[e](t);n&&o._hoverViaKeyboard(n)}else"_getLastEnabledChild"===e?o._navigate("_getPreviousEnabledChild",n,t):o._navigate("_getNextEnabledChild",n,t)}_levelOneNavigateFromLowerLevel(e,n){const t=this,o=t[e](t._openedContainers[2].menuItemsGroup);o&&(n&&n.$.removeClass("hovered"),t._closeSubContainers(2),o instanceof Smart.MenuItemsGroup?t._selectionHandler({target:o,isTrusted:!0}):t._hoverViaKeyboard(o))}_levelOneOpenDropDown(e){e&&e instanceof Smart.MenuItemsGroup&&this._selectionHandler({target:e,isTrusted:!0})}_mainContainerHandler(e){const n=this;if(n._minimized&&null!==n.dropDownAppendTo)switch(e.type){case"click":n._selectionHandler(e);break;case"mouseleave":n._mouseleaveHandler(e);break;case"mouseout":n._mouseoutMouseoverHandler(e);break;case"mouseover":n._mouseoutMouseoverHandler(e);}}_menuItemsGroupSelectionHandler(e,n,t){const o=this,i=e.container,r=i.level,a="tree"!==n&&!o._minimized;if(o._discardKeyboardHover(),document.activeElement===o||null===o.dropDownAppendTo||"click"!==t.type||o.contains(t.target)||o.focus(),"click"!==t.type||(t.target.classList.contains("smart-menu-items-group-arrow")||!o._toggleItem(e))&&("mouseenter"!==o.selectionMode||"tree"===n||o._minimized)){let d=o.$.hasClass("animation");if(o._isContainerOpened(r,i))o._closeSubContainers(r,i,!0,!0);else{if(a&&o._closeSubContainers(r),d?(i.$.addClass("animation"),!a&&o._expandSection(i)):i.$.removeClass("animation"),o._edge&&2===r&&a&&i.$.removeClass("not-in-view"),i.$.removeClass("smart-visibility-hidden"),!a&&"expand"===t.type||(e.$.addClass("hovered"),o._ensureVisible(e),"keydown"===t.type&&(o._hoveredViaKeyboard=e)),e.$.addClass("smart-menu-items-group-opened"),o._addOpenedContainer(r,i),o._positionExternalContainer(i,e),a){if(1<e.level&&e.parentElement.dropDownHeightSet){const n=o.dropDownPosition,t=e.getBoundingClientRect().top-e.parentElement.container.getBoundingClientRect().top;i.style.top=-1!==n.indexOf("bottom")||"auto"===n?t+"px":-1===n.indexOf("top")?t+e.offsetHeight/2+"px":t+e.offsetHeight+"px"}i.itemContainer.checkOverflow&&i.itemContainer.dropDownHeightSet&&(o._checkOverflow(i.itemContainer,!1,[i.children[0],i.children[2]]),delete i.itemContainer.checkOverflow)}"tree"===n||o._minimized?!d&&o._browserBoundsDetection(o.$.mainContainer):o._browserBoundsDetection(i),void 0===t.type&&o._hoverViaKeyboard(o._getFirstEnabledChild(e.itemContainer)),o.$.fireEvent("expand",{item:e,label:e.label,path:e.path,value:e.value})}a?o._ripple(e,t):"tree"===n&&!d&&o._checkOverflow(o.$.mainContainer,!1,[o.$.scrollButtonNear,o.$.scrollButtonFar])}}_mouseenterHandler(){const e=this;e.autoFocusOnMouseenter&&document.activeElement!==e&&e.focus()}_mouseleaveHandler(e){const n=this;if("mouseenter"===n.selectionMode&&"tree"!==n.mode&&!n._minimized){if(null!==n.dropDownAppendTo&&e.relatedTarget)if(n.contains(e.target)){const t=e.relatedTarget.closest(".smart-menu-drop-down");if(t&&t.ownerElement===n)return}else if(n.contains(e.relatedTarget))return;n._close()}}_mouseoutMouseoverHandler(e){if(!this.disabled){const n=this,t=e.target.closest("smart-menu-item")||e.target.closest("smart-menu-items-group");if(!(null===t||t.disabled||t.templateApplied))if(n._discardKeyboardHover(),"mouseover"===e.type)"mouseenter"!==n.selectionMode||"tree"===n.mode||n._minimized||(t instanceof Smart.MenuItemsGroup&&!t.$.hasClass("hovered")?n._selectionHandler(e,t):t instanceof Smart.MenuItem&&n._closeSubContainers(t.level+1)),t.$.addClass("hovered"),n._discardKeyboardHover(!0);else{if(e.relatedTarget!==n.$.mainContainer||"mouseenter"!==n.selectionMode||"tree"===n.mode||n._minimized||n._close(),"tree"!==n.mode&&!n._minimized&&t instanceof Smart.MenuItemsGroup&&t.container&&!t.container.$.hasClass("smart-visibility-hidden"))return;t.$.removeClass("hovered")}}}_moveDropDownsToExternalContainer(){const e=this;for(let n=0;n<e._containersInBody.length;n++){const t=e._containersInBody[n];e._dropDownParent.appendChild(t),t.$.listen("click",e._selectionHandler.bind(e)),t.$.listen("mouseleave",e._mouseleaveHandler.bind(e)),t.$.listen("mouseout",e._mouseoutMouseoverHandler.bind(e)),t.$.listen("mouseover",e._mouseoutMouseoverHandler.bind(e))}for(let n=0;n<e._containers.length;n++){const t=e._containers[n];t.ownerElement=e,""!==e.theme&&t.classList.add(e.theme),t.setAttribute("external",""),t.setAttribute("mode",e.mode),t.setAttribute("drop-down-position",e.dropDownPosition),e.checkboxes&&t.setAttribute("checkboxes","")}}_moveDropDownsToMenu(){const e=this;for(let n=0;n<e._containersInBody.length;n++){const t=e._containersInBody[n];t.$.unlisten("click"),t.$.unlisten("mouseleave"),t.$.unlisten("mouseout"),t.$.unlisten("mouseover"),t.style.left="",t.style.right="",t.style.top="",t.style.marginLeft="",t.style.marginTop="",t.menuItemsGroup.appendChild(t)}for(let n=0;n<e._containers.length;n++){const t=e._containers[n];""!==e.theme&&t.classList.remove(e.theme),t.removeAttribute("external"),t.removeAttribute("mode"),t.removeAttribute("drop-down-position"),t.removeAttribute("checkboxes")}}_navigate(e,n,t){const o=this;if(!n)return void("_getNextEnabledChild"===e?o._hoverViaKeyboard(o._getFirstEnabledChild(t)):o._hoverViaKeyboard(o._getLastEnabledChild(t)));const i=o[e](n);i&&(n.$.removeClass("hovered"),o._hoverViaKeyboard(i))}_positionExternalContainer(e,n){const t=this;if(null===t.dropDownAppendTo||2!==e.level)return;const o=t.dropDownPosition,i=t.mode,r=n.getBoundingClientRect(),a=t._positionedParent.getBoundingClientRect(),d=window.scrollX||window.pageXOffset,l=window.scrollY||window.pageYOffset,s=r.top-a.top+l,m=r.bottom-a.top+l;let c=r.left-a.left+d;e.style.left="",e.style.right="",e.style.top="",-1===o.indexOf("left")?"horizontal"===i||"overlay-right"===o?e.style.left=c+"px":e.style.left=c+r.width+"px":(c-=e.offsetWidth,("horizontal"===i||"overlay-left"===o)&&(c+=r.width),e.style.left=c+"px",e.style.right="initial");"bottom-right"===o||"bottom-left"===o||"auto"===o?e.style.top="horizontal"===i?m+"px":s+"px":"top-right"===o||"top-left"===o?e.style.top="horizontal"===i?s-e.offsetHeight+"px":m-e.offsetHeight+"px":"overlay-right"===o||"overlay-left"===o?e.style.top=s+r.height/2+"px":void 0}_processDataSource(){function e(t,o){let r;if(t.items instanceof Array&&0<t.items.length){r=document.createElement("smart-menu-items-group"),!0===t.checkable&&(r.checkable=!0),("checkbox"===t.checkMode||"radioButton"===t.checkMode)&&(r.checkMode=t.checkMode),t.dropDownHeight&&(r.dropDownHeight=t.dropDownHeight),!0===t.expanded&&"tree"===n.mode&&(r.expanded=!0);for(let n=0;n<t.items.length;n++)e(t.items[n],r)}else r=document.createElement("smart-menu-item"),void 0!==t.shortcut&&(r.shortcut=t.shortcut);!0===t.checked&&(r.checked=!0),!0===t.disabled&&(r.disabled=!0),t.label!==void 0&&(r.label=t.label),!0===t.separator&&(r.separator=!0),t.value!==void 0&&(r.value=t.value),o.appendChild(r)}const n=this,t=n.dataSource;n.$.mainContainer.innerHTML="";for(let o=0;o<t.length;o++){const i=t[o];e(i,n.$.mainContainer)}n._processHTML(void 0,1)}_processHTML(e,n){const t=this;let o,r;e===void 0&&(e=t.$.mainContainer),1<n&&(o=t._createMenuItemsGroupContainer(e,n),r=o.itemContainer,e.expanded&&"tree"===t.mode?t._menuItemsGroupsToExpand.push(e):e.expanded=!1);const a=Array.from(e.children),d=[];let l=0;for(let o=0;o<a.length;o++){if(1<n&&0==o){l++;continue}const i=a[o];if(!(i instanceof Smart.MenuItem||i instanceof Smart.MenuItemsGroup)){i.parentElement.removeChild(i),l++;continue}t._createItemHTMLStructure(i,n,e,o-l),i.checked&&(i.disabled||i.templateApplied?i.checked=!1:d.push(i)),1<n&&r.appendChild(i),i instanceof Smart.MenuItemsGroup&&t._processHTML(i,n+1)}if(1<n){if(e.container=o,e.itemContainer=r,e instanceof Smart.MenuItemsGroup){const o=document.createElement("div");o.className="smart-menu-items-group-arrow",t._setArrowDirection(o,n),e.children[0].appendChild(o)}t._containers.push(o),2==n&&(t._containersInBody.push(o),t._edge&&o.addEventListener("transitionend",function(e){e.target===this&&this.$.hasClass("smart-visibility-hidden")&&(this.style.left="",this.style.top="",this.$.addClass("not-in-view"))})),null===t.dropDownAppendTo||"tree"===t.mode||t._minimized?e.appendChild(o):(o.ownerElement=t,o.setAttribute("external",""),o.setAttribute("mode",t.mode),o.setAttribute("drop-down-position",t.dropDownPosition),t.checkboxes&&o.setAttribute("checkboxes",""),""!==t.theme&&o.$.addClass(t.theme),t.$.hasClass("animation")?o.$.addClass("animation"):o.$.removeClass("animation"),2===n?(t._dropDownParent.appendChild(o),o.$.listen("click",t._selectionHandler.bind(t)),o.$.listen("mouseleave",t._mouseleaveHandler.bind(t)),o.$.listen("mouseout",t._mouseoutMouseoverHandler.bind(t)),o.$.listen("mouseover",t._mouseoutMouseoverHandler.bind(t))):e.appendChild(o))}t._validateRadioButtonSelection(e,n,d)}_processUList(){const e=this,n=new RegExp(/<li>(.(?!<\/li>)|\n)*?<ul>/),t=new RegExp(/<\/ul>(.|\n)*?<\/li>/);let o=e.$.mainContainer.firstElementChild.innerHTML;for(o=o.replace(/\r?\n|\r/g,""),o=o.replace(/<li(.|\n)*?>/g,"<li>"),o=o.replace(/<li><\/li>/g,"<li> </li>"),o=o.replace(/<ul(.|\n)*?>/g,"<ul>");n.test(o);){const e=n.exec(o),t="<smart-menu-items-group>"+e[0].slice(4,e[0].length-4);o=o.replace(e[0],t)}for(;t.test(o);){const e=t.exec(o);o=o.replace(e[0],"</smart-menu-items-group>")}o=o.replace(/li>/g,"smart-menu-item>"),e.$.mainContainer.innerHTML=o}_refreshContainersArrays(){const e=this;for(let n=e._containers.length-1;0<=n;n--){const t=e._containers[n];if(!document.body.contains(t)){e._containers.splice(n,1);const o=e._containersFixedHeight.indexOf(t);-1<o&&e._containersFixedHeight.splice(o,1)}}}_refreshItemPaths(e,n,t){const o=this;let i=n?e:e.container.itemContainer;const r=t?t(e):i.children;for(let a=0;a<r.length;a++){const i=r[a];let d;d=n?""+a:e.path+"."+a,i.path=d,o._menuItems[d]=i,i instanceof Smart.MenuItemsGroup&&o._refreshItemPaths(i,void 0,t)}}_removeContainerFixedHeight(){const e=this;for(let n=0;n<e._containersFixedHeight.length;n++){const t=e._containersFixedHeight[n];t.style.height="",t.itemContainer.$.removeClass("scroll-buttons-shown"),t.itemContainer.$.removeClass("one-button-shown"),t.children[0].$.addClass("smart-hidden"),t.children[2].$.addClass("smart-hidden"),t.itemContainer.checkOverflow=!0}}_removeContainersInBody(){const e=this;if(null!==e.dropDownAppendTo&&!e._minimized)for(let n=0;n<e._containersInBody.length;n++)e._dropDownParent.removeChild(e._containersInBody[n])}_resizeHandler(){const e=this,n=e.minimizeWidth,t=e.mode;if(null!==n&&"dropDown"!==t){if(e.offsetWidth<=n&&!e._minimized)return void e.minimize();e.offsetWidth>n&&e.maximize()}(null!==e.dropDownAppendTo||"tree"===t)&&e._checkOverflow(e.$.mainContainer,"horizontal"===t,[e.$.scrollButtonNear,e.$.scrollButtonFar])}_ripple(e,n){const t=this;if(-1!==t.theme.indexOf("material")&&"click"===n.type)return Smart.Utilities.Animation.Ripple.animate(e,n.pageX,n.pageY),!0}_scroll(e){const n=this,t=n.mode,o=e.classList.contains("smart-scroll-button-near")?-1:1;if(e.parentElement===n.$.container){const e=n.$.mainContainer;"tree"!==t&&n._closeSubContainers(2),"horizontal"===n.mode?(e.scrollLeft+=10*o,n._updateScrollButtonVisibility(e,!0,[n.$.scrollButtonNear,n.$.scrollButtonFar])):(e.scrollTop+=10*o,n._updateScrollButtonVisibility(e,!1,[n.$.scrollButtonNear,n.$.scrollButtonFar]))}else{const t=e.parentElement,i=t.itemContainer;n._closeSubContainers(t.level+1),i.scrollTop+=10*o,n._updateScrollButtonVisibility(i,!1,[t.children[0],t.children[2]])}}_selectionHandler(e,n){function t(){document.activeElement===o||null===o.dropDownAppendTo||"click"!==e.type||o.contains(i)||o.focus()}const o=this,i=e.target;if(!o.disabled){const r=o.mode;if(void 0===n){if("click"===e.type){const n=i.closest("smart-repeat-button");if(n)return void o._scroll(n,e)}if(!e.isTrusted)return;const a=i.closest("smart-menu-item");if(a){if(a.disabled||a.templateApplied)return void t();if(!o._toggleItem(a)&&(o.$.fireEvent("itemClick",{item:a,label:a.label,value:a.value}),"tree"!==r&&(o._close(),"dropDown"===r))){const n=o._ripple(a,e);return void(n?setTimeout(function(){o.close()},300):o.close())}return o._ripple(a,e),void t()}if(!e.isTrusted)return;if(n=i.closest("smart-menu-items-group"),n&&(i===n.container||i===n.container.firstElementChild))return}n&&!n.disabled&&o._menuItemsGroupSelectionHandler(n,r,e)}}_setArrowDirection(e,n){const t=this;e.innerHTML="overlay"===t.dropDownPosition.slice(0,7)?"&#xe806":2===n&&"horizontal"===t.mode?"top"===t.dropDownPosition.slice(0,3)?"&#xe801":"&#xe804":"&#xe802"}_setLabel(e,n,t,o){const i=document.getElementById(e);if(null!==i&&"template"===i.tagName.toLowerCase()){const e=document.importNode(i.content,!0);if(t instanceof Smart.MenuItem)n.appendChild(e),o&&(t.setAttribute("template-applied",""),t.templateApplied=!0);else{const o=new RegExp(/{{title="(.*)"}}/);for(let n=0;n<e.childNodes.length;n++)o.test(e.childNodes[n].innerHTML)?(t.titleLabel=o.exec(e.childNodes[n].innerHTML)[1],e.childNodes[n].innerHTML=e.childNodes[n].innerHTML.replace(o,"")):o.test(e.childNodes[n].textContent)&&(t.titleLabel=o.exec(e.childNodes[n].textContent)[1],e.childNodes[n].textContent=e.childNodes[n].textContent.replace(o,""));t.titleLabel===void 0&&(t.titleLabel=e.textContent),n.appendChild(e)}}else n.innerHTML=e,t instanceof Smart.MenuItemsGroup&&(t.titleLabel=e)}_toggleItem(e){const n=this;if(n.checkboxes){const t=1===e.level?n:e.parentItem;if(t.checkable)return"checkbox"===t.checkMode?(e.checked=!e.checked,n.$.fireEvent("itemCheckChange",{item:e,label:e.label,value:e.value,checked:e.checked})):!e.checked&&(e.checked=!0,n._uncheckSiblings(e),n.$.fireEvent("itemCheckChange",{item:e,label:e.label,value:e.value,checked:!0})),!0}return!1}_transitionendHandler(){const e=this;"dropDown"===e.mode&&e.opened&&document.activeElement!==e&&e.focus()}_uncheckSiblings(e){for(let n=0;n<e.parentElement.childElementCount;n++){const t=e.parentElement.children[n];t!==e&&t.checked&&(t.checked=!1,this.$.fireEvent("itemCheckChange",{item:t,label:t.label,value:t.value,checked:!1}))}}_updateScrollButtonVisibility(e,n,t){var o=Math.round;const i=this;let r,a,d,l=!0,s=!0;if(n?(r="scrollLeft",a="offsetWidth",d="scrollWidth"):(r="scrollTop",a="offsetHeight",d="scrollHeight"),0===o(e[r])&&(l=!1),o(e[a]+e[r])>=o(e[d])&&(s=!1),e!==i.$.mainContainer||"auto"===i.overflow){if(l&&s)return t[0].$.removeClass("smart-hidden"),t[1].$.removeClass("smart-hidden"),void e.classList.remove("one-button-shown");l?t[0].$.removeClass("smart-hidden"):t[0].$.addClass("smart-hidden"),s?t[1].$.removeClass("smart-hidden"):t[1].$.addClass("smart-hidden"),e.classList.add("one-button-shown")}else"scroll"!==i.overflow||i.disabled||(t[0].disabled=!l,t[1].disabled=!s)}_validateRadioButtonSelection(e,n,t){const o=this;if(o.checkboxes){let i,r;if(1===n?(i=o,r=o.$.mainContainer):(i=e,r=e.itemContainer),"radioButton"===i.checkMode&&i.checkable)if(1<t.length)for(let e=t.length-2;0<=e;e--)t[e].checked=!1;else if(0===t.length){const e=o._getFirstEnabledChild(r);e&&(e.checked=!0)}}}});