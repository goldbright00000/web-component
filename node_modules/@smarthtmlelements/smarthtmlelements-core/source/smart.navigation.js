
/* Smart HTML Elements v1.1.0 (2018-June) 
Copyright (c) 2011-2018 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-accordion-item",class extends Smart.ContentElement{static get properties(){return{dragged:{value:!1,type:"boolean"},expanded:{value:!1,type:"boolean"},focused:{value:!1,type:"boolean"},index:{value:null,type:"number?"},label:{value:"",type:"string"}}}static get listeners(){return{"accordionItemHeader.mouseenter":"_headerMouseEnterHandler","accordionItemHeader.mouseleave":"_headerMouseLeaveHandler","accordionItemHeader.down":"_ripple"}}template(){return`<div id="container">
                    <div id="accordionItemHeader" class ="smart-accordion-item-header smart-unselectable">
                        <span id="arrow" class ="smart-arrow"></span>
                        <span id="label" class ="smart-label" inner-h-t-m-l='[[label]]'></span>
                    </div>
                    <div id="accordionItemContent" class ="smart-accordion-item-content">
                        <div id="contentContainer" class ="smart-content-container"><content></content></div>
                    </div>
                </div>`}propertyChangedHandler(e,t,n){if(super.propertyChangedHandler(e,t,n),t=parseInt(t),n=parseInt(n),!("index"!==e||isNaN(t)||isNaN(n))){const e=this,o=e.parentElement.parentElement._items.length;0>n?n=0:n>=o&&(n=o-1),n!==t&&e.$.fireEvent("indexChange",{newIndex:n,oldIndex:t}),e.index=n}}_headerMouseEnterHandler(){const e=this;e.disabled||e.$.addClass("hovered")}_headerMouseLeaveHandler(){const e=this;e.disabled||e.$.removeClass("hovered")}_ripple(e){const t=this;t.disabled||-1!==t.closest("smart-accordion").theme.indexOf("material")&&Smart.Utilities.Animation.Ripple.animate(t.$.container,e.pageX,e.pageY)}_setIndex(e){const t=this,n=t.context;t.context=t,t.index=e,t.context=n}}),Smart("smart-accordion",class extends Smart.BaseElement{static get properties(){return{expandedIndexes:{value:[],type:"array"},expandMode:{allowedValues:["single","singleFitHeight","multiple","toggle","none"],value:"singleFitHeight",type:"string"},messages:{extend:!0,value:{en:{accordionItemRequired:"{{elementType}}: \"{{method}}\" requires an item from type \"smart-accordion-item\".",indexOutOfBound:"{{elementType}}: Out of bound index/indexes in \"{{method}}\" method.",invalidSettings:"{{elementType}}: \"{{method}}\" method accepts a string or an object as it's second parameter.",missingReference:"{{elementType}}: Missing reference to {{files}}.",noItems:"{{elementType}}: No child elements found.",overridingProperties:"{{elementType}}: Overriding properties {{property1}} and {{property2}} applied. The \"{{property1}}\" property is used by default."}},type:"object"},reorder:{value:!1,type:"boolean"}}}static get listeners(){return{down:"_downHandler",focus:"_focusHandler",indexChange:"_indexChangeHandler",keydown:"_keyDownHandler",move:"_moveHandler",resize:"_resizeHandler",styleChanged:"_resizeHandler","document.up":"_upHandler"}}template(){return`<div id="container">
                    <content></content>
                </div>`}ready(){super.ready();const e=this;e._createElement()}propertyChangedHandler(e,t,n){function o(){a._toggleItems("expand",[0]),a.expandedIndexes=[0]}const a=this;if("expandedIndexes"===e){if(t.toString()===n.toString())return;let e=[];if(0<a._items.length)for(let t=0,o;t<n.length;t++)if(o=parseInt(n[t]),!isNaN(o))if(a._expandModeIs(["single","singleFitHeight","toggle"])){1>e.length&&0<=o&&o<a._items.length&&e.push(o);break}else 0<=o&&o<=a._items.length&&-1===e.indexOf(o)&&e.push(o);if(0===e.length&&a._expandModeIs(["single","singleFitHeight"]))return n=t.slice(),void(a.expandedIndexes=n);n=e;const o=a._compareExpandedIndexes(t,n);return a._toggleItems("collapse",o.collapse),a._toggleItems("expand",o.expand),void(a.expandedIndexes=n)}switch(super.propertyChangedHandler(e,t,n),e){case"disabled":a._setFocusable(),a._enableDisableHandler();break;case"expandMode":if(0===a._items.length)break;if("multiple"===t&&"none"!==n||"none"===t&&"multiple"!==n){const e=a.expandedIndexes.slice(1);a._toggleItems("collapse",e),0===a.expandedIndexes.length&&a._expandModeIs(["single","singleFitHeight"])&&o()}else"toggle"===t&&a._expandModeIs(["single","singleFitHeight"])&&0===a.expandedIndexes.length&&o();if(!a._supportCSSVariables||!a._usedCSSVariables){const e=a.expandedIndexes[0];"singleFitHeight"===t?a._items[e].$.accordionItemContent.style.height="":"singleFitHeight"===n&&(a._items[e].$.accordionItemContent.style.height=a._expandedItemsContainerHeight-1+"px")}break;case"unfocusable":a._setFocusable();break;default:}}appendChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&(e.classList.contains("smart-resize-trigger-container")||e.classList.contains("smart-measure-element"))){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.AccordionItem||t.error(t.localize("accordionItemRequired",{method:"appendChild"})),t.insert(t._items.length,e)}collapse(e,t){const n=this;e=n._validateItemsIndex(e,"collapse");const o=n._items[e].expanded;!o||n._expandModeIs(["single","singleFitHeight"])&&-1<n.expandedIndexes.indexOf(e)||n._collapseItem(e,t)}expand(e,t){const n=this;e=n._validateItemsIndex(e,"expand");const o=n._items[e].expanded;o||(n._expandModeIs(["single","singleFitHeight","toggle"])&&n._toggleItems("collapse",n.expandedIndexes),n._expandItem(e,t))}insert(e,t){const n=this,o=0===n._items.length;let i,a;if(t||("number"==typeof e?t=[{label:"",content:""}]:(t=[{label:e?e.toString():"",content:e?e.toString():""}],e=0)),t instanceof HTMLElement)t instanceof Smart.AccordionItem?i=t:n.error(n.localize("accordionItemRequired",{method:"insert"}));else if(Array.isArray(t)){a=document.createDocumentFragment();for(let e=0;e<t.length;e++){const o=n._createItem(t[e]);a.appendChild(o)}}else i=t instanceof Object?n._createItem(t):"string"==typeof t||"number"==typeof t?n._createItem({label:t.toString(),content:t.toString()}):n._createItem({label:"",content:""});e>n._items.length?i?n.$.container.appendChild(i):n.$.container.appendChild(a):i?n.$.container.insertBefore(i,n._items[e]):n.$.container.insertBefore(a,n._items[e]),n._storeItems(),o&&n._expandModeIs(["single","singleFitHeight"])?n._expandItem(0):n.expandedIndexes=n._getExpandedIndexes(),n._updateExpanedContentHeight(),n._updateInlineHeight(),n._storeItemsCoordinates(),n._updateItemsIndexProperty()}insertBefore(e,t){const n=this;if(!n.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,e.concat(Array.prototype.slice.call(arguments)))}e!==void 0&&t!==void 0&&e instanceof Smart.AccordionItem&&t instanceof Smart.AccordionItem||n.error(n.localize("accordionItemRequired",{method:"insertBefore"})),t!==void 0&&null!==t?(!n.contains(t)&&n.error(n.localize("referenceNodeNotChild",{argument:"referenceNode"})),n.insert(n._items.indexOf(t),e)):n.insert(n._items.indexOf(t),e)}remove(e){const t=this;let n;e instanceof HTMLElement?(e instanceof Smart.AccordionItem?!t.contains(e)&&t.error(t.localize("referenceNodeNotChild",{argument:"node"})):t.error(t.localize("accordionItemRequired",{method:"remove"})),n=e,e=n.index):(e=t._validateItemsIndex(e,"remove"),n=t._items[e]),n&&(n.parentNode.removeChild(n),t._storeItems(),t._expandModeIs(["singleFitHeight"])&&(t._preventAnimation=!0),t._expandModeIs(["single","singleFitHeight"])&&e===t.expandedIndexes[0]&&0<t._items.length&&(t._expandItem(0),t._selectedItem=t._items[0],t._selectedItemIndex=0,t._itemIsFocussed=!0),t.expandedIndexes=t._getExpandedIndexes(),t._updateExpanedContentHeight(),t._updateInlineHeight(),t._storeItemsCoordinates(),t._updateItemsIndexProperty())}removeChild(e){const t=this;if(!t.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}return(e instanceof HTMLElement||t.error(t.localize("accordionItemRequired",{method:"removeChild"})),"smart-resize-trigger-container"===e.className)?void super.removeChild(e):void(e instanceof Smart.AccordionItem||t.error(t.localize("accordionItemRequired",{method:"removeChild"})),t.contains(e)||t.error(t.localize("referenceNodeNotChild",{argument:"node"})),t.remove(e))}_setFocusable(){const e=this;if(e.disabled||e.unfocusable){e.removeAttribute("tabindex");for(let t=0;t<e._items.length;t++)e._items[t].removeAttribute("tabindex");return}e.tabIndex=e._tabIndex;for(let t=0;t<e._items.length;t++)e._items[t].tabIndex=e._tabIndex}update(e,t){const n=this;e=n._validateItemsIndex(e,"update");let o=n._items[e];if(t||n.error(n.localize("invalidSettings",{elementType:n.nodeName.toLowerCase(),method:"update"})),o)if(Array.isArray(t)&&(0===t.length?t={label:"",content:""}:t=t[0]),"string"==typeof t)o.content=t;else for(let e in t)o[e]=t[e];const i=n._getItemsHeights(e);n._updateExpanedContentLocalHeight(n._items[e],i),n._updateInlineHeight(),n._storeItemsCoordinates()}_collapseItem(e,t){const n=this;let o=n._items[e];if(o.expanded&&!("none"===n.expandMode&&t)){if(o.expanded=!1,n.$.fireEvent("collapsing",{index:e,label:o.label,content:o.content.innerHTML}),-1<n.expandedIndexes.indexOf(e)){let t=n.expandedIndexes.indexOf(e),o=n.expandedIndexes.slice();o.splice(t,1),n.expandedIndexes=o}o.$.accordionItemContent.style.height="",n._handleAnimationsDuration(o,e,"collapsed")}}_compareExpandedIndexes(e,t){let n=[],o=[],a=[],r=e.length,s=t.length;for(let a=0;a<r;a++)-1===t.indexOf(e[a])?-1===n.indexOf(e[a])&&n.push(e[a]):-1===o.indexOf(e[a])&&o.push(e[a]);for(let n=0;n<s;n++)-1===o.indexOf(t[n])&&a.push(t[n]);return{collapse:n,expand:a}}_createElement(){const e=this;e._reorderItemsByIndex(),e._usedCSSVariables=!!window.getComputedStyle(e.$.container).getPropertyValue("--smart-accordion-animation-duration"),e._supportCSSVariables=Smart.Utilities.Core.CSSVariablesSupport(),e._storeItems(),e._enableDisableHandler(),e._updateExpanedContentHeight(),e._expandedIndexesHandler(),e._tabIndex=0>=e.tabIndex?0:e.tabIndex,e._setFocusable(),e._updateItemsIndexProperty(),e._updateInlineHeight()}_createItem(e){const t=this,n=document.createElement("smart-accordion-item");if(e)return(n.disabled=t.disabled,-1<t._tabIndex&&(n.tabIndex=t._tabIndex),"string"==typeof e||"number"==typeof e)?(n.label=e+"",n.content=e+"",n):(n.label=e.label||"",n.content=e.content||"",n)}_downHandler(e){const t=this;if(t.disabled||t.readonly||"none"===t.expandMode||t._toggled)return;const n=e.originalEvent.target,o=n.closest(".smart-accordion-item-header"),i=n.closest("smart-accordion-item");return o?void(t._selectedItem=i,t._itemIsPressed=t._itemIsFocussed=!0,t._reorderedIndex=t._selectedItemIndex=t._items.indexOf(i),t._storeItemsCoordinates()):void(i&&(i.focused=!0))}_enableDisableHandler(){const e=this;if(e.disabled)for(let t=0;t<e._items.length;t++)e._items[t].disabled=!0;else for(let t=0;t<e._items.length;t++)e._items[t].disabled=!1}_expandedIndexesHandler(){const e=this;let t=e._getExpandedIndexes("initial"),n=t.length,o=e.expandedIndexes.length;if(0!==e._items.length){if(0===o&&0<n&&(e.expandedIndexes=t,o=n),e._expandModeIs(["multiple","none"])||1===o)return void e._toggleItems("expand",e.expandedIndexes);switch(e.expandMode){case"single":case"singleFitHeight":0===o?e._toggleItems("expand",[0]):1<o&&(e._toggleItems("collapse",e.expandedIndexes.splice(0,1)),e._toggleItems("expand",e.expandedIndexes));break;case"toggle":1<o&&(e._toggleItems("collapse",e.expandedIndexes.splice(0,1)),e._toggleItems("expand",e.expandedIndexes));break;default:}}}_expandItem(e,t){const n=this;let o=n._items[e];if(!(o.expanded||"none"===n.expandMode&&t)){if(o.expanded=!0,n.$.fireEvent("expanding",{index:e,label:o.label,content:o.content.innerHTML}),-1===n.expandedIndexes.indexOf(e)){let t=n.expandedIndexes.slice();t.push(e),n.expandedIndexes=t}n._supportCSSVariables&&n._usedCSSVariables||"singleFitHeight"!==n.expandMode||(o.$.accordionItemContent.style.height=n._expandedItemsContainerHeight-1+"px"),n._handleAnimationsDuration(o,e,"expanded")}}_expandModeIs(e){const t=this;return-1<e.indexOf(t.expandMode)}_focusHandler(){const e=this;e.disabled||0===e._items.length||(e._itemIsFocussed?e._selectedItem.focused=!1:e._items[0].focused=!1)}_getExpandedIndexes(e){const t=this,n=[];for(let o=0;o<t._items.length;o++)"initial"===e?t._items[o].hasAttribute("expanded")&&(n.push(o),t._items[o].removeAttribute("expanded")):t._items[o].expanded&&n.push(o);return n.slice()}_getItemsHeights(e){const t=this,n=t._items,o=n.length;let a=[];if(0!==o){if(!isNaN(e)&&0<=e&&e<o){const t=n[e];let o=0;return t.expanded?o=t.$.accordionItemContent.getBoundingClientRect().height:(t.expanded=!0,o=t.$.accordionItemContent.getBoundingClientRect().height,t.expanded=!1),o+"px"}for(let e=0;e<o;e++){const t=n[e];let o=0;t.expanded?o=t.$.accordionItemContent.getBoundingClientRect().height:(t.expanded=!0,o=t.$.accordionItemContent.getBoundingClientRect().height,t.expanded=!1),a.push(o+"px")}return t._heightCalcAfterInitialization=!0,a}}_handleAnimationsDuration(e,t,n){const o=this;if(!o._animationAfterInitialization)return void(o._animationAfterInitialization=!0);if(1===o._items.length&&"singleFitHeight"===o.expandMode)return void o.$.fireEvent(n,{index:t,label:e.label,content:e.content.innerHTML});if(-1===o.className.split(" ").indexOf("animation")||!o._supportCSSVariables)return void o.$.fireEvent(n,{index:t,label:e.label,content:e.content.innerHTML});if(o._preventAnimation)return o.$.fireEvent(n,{index:t,label:e.label,content:e.content.innerHTML}),void(o._preventAnimation=!1);o._toggled=!0;let i=window.getComputedStyle(o).animationDuration,a;if(-1<i.indexOf("ms"))i=parseFloat(i.substring(0,i.length-2)),a=isNaN(i)||0>i?0:i-50;else if(-1<i.indexOf("s"))i=parseFloat(i.substring(0,i.length-1)),a=isNaN(i)||0>i?0:1e3*i-50;else return void o.$.fireEvent(n,{index:t,label:e.label,content:e.content.innerHTML});e instanceof Smart.AccordionItem&&(e.$.addClass("smart-toggled-item"),o.$container.addClass("smart-toggling"),setTimeout(function(){e.$.removeClass("smart-toggled-item"),o.$container.removeClass("smart-toggling"),o.$.fireEvent(n,{index:t}),o._toggled=!1},a))}_indexChangeHandler(e){const t=this,n=t._items,o=n.length,i=e.detail;i.newIndex>=o?t.$.container.appendChild(n[i.oldIndex]):i.newIndex>i.oldIndex?t.$.container.insertBefore(n[i.oldIndex],n[i.newIndex+1]):t.$.container.insertBefore(n[i.oldIndex],n[i.newIndex]);let a=t.getElementsByTagName("smart-accordion-item");t._items=Array.from(a),t._updateItemsIndexProperty()}_keyDownHandler(e){function t(e){e===l||(s.focused=!1,l=e,s=o._items[l],s.focused=!0)}function n(e){return"up"===e?void(0>l-1?t(0):t(l-1)):void(l+1>r?t(r):t(l+1))}const o=this,i=e.key;if("none"===o.expandMode||o.disabled||o.readonly||o._toggled)return;if(-1===["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","End","Home"," ","Enter","Tab"].indexOf(i)||!(document.activeElement instanceof Smart.AccordionItem))return;"Tab"!==i&&e.preventDefault();let a=o._items.length,r=a-1,s,l;for(let t=0,n;t<a;t++)n=o._items[t],n.focused&&(s=n,l=t);switch(i){case"Tab":e.shiftKey?n("up"):n("down");break;case"ArrowLeft":o.collapse(l);break;case"ArrowDown":n("down");break;case"ArrowRight":o.expand(l);break;case"ArrowUp":n("up");break;case"End":t(r);break;case"Home":t(0);break;case" ":case"Enter":if(s.expanded)return void o.collapse(l);o.expand(l);break;default:}}_moveHandler(e){var t=Math.abs;const n=this;if(n._itemIsPressed&&n.reorder&&!n.readonly&&!(2>n._items.length))if(n._dragStart){if(n.$container.addClass("smart-reordering"),!n._dragging){const t=n._selectedItem;n.$.fireEvent("reorderStart",{position:{left:e.pageX,top:e.pageY},target:e.originalEvent.target,index:n._selectedItemIndex,label:t.label,content:t.content.innerHTML}),n._selectedItem.dragged=n._dragging=!0}const o=e.clientY;let a=!1;for(let e=0;e<n._itemsCoordinates.length;e++){const t=n._itemsCoordinates[e];if(o>=t.fromY&&o<=t.toY){a=e;break}}if(!0!==n._preventReorder&&!1!==a&&a!==n._reorderedIndex){if(1<t(n._reorderedIndex-a)){const e=0>n._reorderedIndex-a?-1:1;n._swapItems(n._reorderedIndex,a+e)}n._swapItems(n._reorderedIndex,a),n._reorderedIndex=a,n._storeItemsCoordinates()}n._preventReorder=!!(o<n._itemsCoordinates[n._reorderedIndex].fromY||o>n._itemsCoordinates[n._reorderedIndex].toY),1<t(n._reorderedIndex-a)&&(n._preventReorder=!1)}else n._dragStart=!0}_reorderItemsByIndex(){const e=this;let t=e.getElementsByTagName("smart-accordion-item"),n=Array.from(t),o=!1,i=n.map(function(e){return null===e.index?e.index=0:o=!0,e.index});if(o){const o=n.length;if(!(2>o)){let n=i.slice();if(n.sort(function(e,t){return parseInt(e)-parseInt(t)}),i.toString()!==n.toString())for(let a=0;a<o;a++){let i;for(let e=0;e<o;e++)t[e].index===n[a]&&(i=t[e]);e.$.container.insertBefore(i,t[a])}}}}_resizeHandler(){const e=this;e._updateExpanedContentHeight(),e._updateInlineHeight(),e._storeItemsCoordinates()}_storeItems(){const e=this,t=e.getElementsByTagName("smart-accordion-item");if(e._items=Array.from(t),0===e._items.length)return void e.$container.addClass("smart-empty");e.$container.removeClass("smart-empty");const n=e._getItemsHeights();for(let t=0;t<e._items.length;t++)e._updateExpanedContentLocalHeight(e._items[t],n[t])}_storeItemsCoordinates(){const e=this;if(!e.disabled&&e.reorder){const t=[];for(let n=0;n<e._items.length;n++){const o=e._items[n],i=o.getBoundingClientRect();t.push({fromY:i.top+(window.scrollY||window.pageYOffset),toY:i.bottom+(window.scrollY||window.pageYOffset)})}e._itemsCoordinates=t}}_swapItems(e,t){const n=this,o=Math.min(e,t),i=Math.max(e,t),a=n._items;let r=n.expandedIndexes.slice();if(n._items[e].expanded&&!n._items[t].expanded){const o=r.indexOf(e);r[o]=t,n.expandedIndexes=r.slice()}else if(n._items[t].expanded&&!n._items[e].expanded){const o=r.indexOf(t);r[o]=e,n.expandedIndexes=r.slice()}n.selectedIndex=n.selectedIndex===e?t:e,n.$.container.insertBefore(a[i],a[o]),function(e,t,n){const o=e[n];e[n]=e[t],e[t]=o}(a,e,t),n._items[e].$.removeClass("hovered"),n._reorderedIndex=t}_toggleItems(e,t){const n=this,o=t.length;if(0<o)for(let a=0;a<o;a++)n["_"+e+"Item"](t[a])}_updateExpanedContentHeight(){const e=this;e.$.container.style.setProperty("--smart-accordion-item-header-height","");const t=e._items.length,n=e.$.container.offsetHeight,o=e._items[e.expandedIndexes[0]];let a=0,r=0,s=0,l=0;if(1===t){let t=e._items[0];t.expanded=!1,a=t.offsetHeight,r=t.$.accordionItemHeader.offsetHeight,t.expanded=!0}else for(;0===a&&l<t;){const t=e._items[l];t instanceof Smart.AccordionItem&&!t.expanded&&(a=t.offsetHeight,r=t.$.accordionItemHeader.offsetHeight),l++}if(1<t&&o instanceof Smart.AccordionItem){const e=o.$.accordionItemHeader.offsetHeight;s=e-r}const d=a*t;let m=n-d-s;m=0<=m?m:0,e.$.container.style.setProperty("--smart-accordion-expanded-content-height",m+"px"),e.$.container.style.setProperty("--smart-accordion-item-header-height",r+"px"),e._expandedItemsContainerHeight=m}_updateExpanedContentLocalHeight(e,t){const n=this;n._supportCSSVariables&&n._usedCSSVariables&&e.$.container.style.setProperty("--smart-accordion-expanded-content-local-height",t)}_updateInlineHeight(){const e=this;e._supportCSSVariables&&e._usedCSSVariables||"singleFitHeight"!==e.expandMode||0===e._items.length||(e._items[e.expandedIndexes[0]].$.accordionItemContent.style.height=e._expandedItemsContainerHeight-1+"px")}_updateItemsIndexProperty(){const e=this;let t=[];for(let n=0;n<e._items.length;n++)e._items[n]._setIndex(n),e._items[n].expanded&&t.push(n);e.expandedIndexes=t.slice()}_upHandler(e){const t=this;if(!(!t._itemIsPressed||t.disabled||t.readonly)){for(let e=0;e<t._items.length;e++)e!==t._selectedItemIndex&&(t._items[e].focused=!1);if(t._selectedItem.focused=!0,!t._dragging)t._selectedItem.expanded?t.collapse(t._selectedItemIndex,!0):t.expand(t._selectedItemIndex,!0);else{const n=t._selectedItem;t.$container.removeClass("smart-reordering"),t.$.fireEvent("reorderEnd",{position:{left:e.pageX,top:e.pageY},target:e.originalEvent.target,index:t._selectedItemIndex,label:n.label,content:n.content.innerHTML})}t._reorderedIndex=void 0,t._dragStart=!1,t._dragging=!1,t._itemIsPressed=!1,t._selectedItem.dragged=!1,t._updateItemsIndexProperty()}}_validateItemsIndex(e,t){const n=this;return(isNaN(parseInt(e))||0>e||e>n._items.length-1)&&n.error(n.localize("indexOutOfBound",{elementType:n.nodeName.toLowerCase(),method:t})),parseInt(e)}}),Smart("smart-menu-item",class extends Smart.BaseElement{static get properties(){return{checked:{value:!1,type:"boolean"},label:{value:"",type:"any"},level:{value:null,type:"number?"},separator:{value:!1,type:"boolean"},shortcut:{value:"",type:"string"},value:{value:null,type:"string?"}}}template(){return""}ready(){super.ready(),this.$.addClass("smart-unselectable")}propertyChangedHandler(e,t,n){const o=this;if("disabled"===e&&!1!==n&&o.checked){const i=o.menu;if(i){super.propertyChangedHandler(e,t,n),o.checked=!1;const a=o.parentItem,r=a?a.checkMode:i.checkMode;"radioButton"===r&&i._validateRadioButtonSelection(a,o.level,[])}}}}),Smart("smart-menu-items-group",class extends Smart.BaseElement{static get properties(){return{checkable:{value:!1,type:"boolean"},checked:{value:!1,type:"boolean"},checkMode:{value:"checkbox",allowedValues:["checkbox","radioButton"],type:"string"},dropDownHeight:{value:null,type:"number?"},expanded:{value:!1,type:"boolean"},label:{value:"",type:"any"},level:{value:null,type:"number?"},separator:{value:!1,type:"boolean"}}}template(){return""}ready(){super.ready(),this.$.addClass("smart-unselectable")}propertyChangedHandler(e,t,n){if(-1!==["checkable","checkMode","disabled"].indexOf(e)){const o=this,i=o.menu;if(i)switch(super.propertyChangedHandler(e,t,n),e){case"checkable":n?o.itemContainer.setAttribute("checkable",""):o.itemContainer.removeAttribute("checkable"),i._isContainerOpened(o.container.level,o.container)&&"tree"!==i.mode&&!i._minimized&&i._closeSubContainers(o.level+2);break;case"checkMode":o.itemContainer.setAttribute("check-mode",n),i._changeToRadioButtonMode(n,o.itemContainer,o);break;case"disabled":{if(!(Smart.ListMenu&&i instanceof Smart.ListMenu))i._isContainerOpened(o.container.level,o.container)&&i._closeSubContainers(o.level+1,o.container);else if(i._view)for(;o.contains(i._view);)i._backButtonClickHandler();if(!o.checked)return;o.checked=!1;const e=o.parentItem,t=e?e.checkMode:i.checkMode;"radioButton"===t&&i._validateRadioButtonSelection(e,o.level,[]);break}}}}}),Smart("smart-menu",class extends Smart.BaseElement{static get properties(){return{autoFocusOnMouseenter:{value:!1,type:"boolean"},checkable:{value:!1,type:"boolean"},checkboxes:{value:!1,type:"boolean"},checkMode:{value:"checkbox",allowedValues:["checkbox","radioButton"],type:"string"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},dropDownAppendTo:{value:null,type:"any?"},dropDownPosition:{value:"auto",allowedValues:["top-left","top-right","bottom-left","bottom-right","overlay-left","overlay-right","auto"],type:"string"},minimizeIconTemplate:{value:null,type:"string?"},minimizeWidth:{value:null,type:"number?"},mode:{value:"horizontal",allowedValues:["horizontal","vertical","dropDown","tree"],type:"string"},opened:{value:!1,type:"boolean"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},selectionMode:{value:"click",allowedValues:["click","mouseenter"],type:"string"}}}static get listeners(){return{click:"_selectionHandler",keydown:"_keydownHandler",mouseenter:"_mouseenterHandler",mouseleave:"_mouseleaveHandler",mouseout:"_mouseoutMouseoverHandler",mouseover:"_mouseoutMouseoverHandler",resize:"_resizeHandler",transitionend:"_transitionendHandler","hamburgerIcon.click":"_hamburgerIconClickHandler","mainContainer.click":"_mainContainerHandler","mainContainer.mouseleave":"_mainContainerHandler","mainContainer.mouseout":"_mainContainerHandler","mainContainer.mouseover":"_mainContainerHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}template(){return`<div id="container">
                    <div id="hamburgerIcon" class="smart-hamburger-icon smart-hidden">
                        <div id="hamburgerIconLineTop" class="smart-hamburger-icon-line smart-hamburger-icon-line-top"></div>
                        <div id="hamburgerIconLineCenter" class="smart-hamburger-icon-line smart-hamburger-icon-line-center"></div>
                        <div id="hamburgerIconLineBottom" class="smart-hamburger-icon-line smart-hamburger-icon-line-bottom"></div>
                        <div id="customIconContainer" class="smart-hamburger-icon-custom-container smart-hidden"></div>
                    </div>
                    <smart-repeat-button id="scrollButtonNear" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-near smart-hidden">
                        <div id="arrowNear" class="smart-arrow"></div>
                    </smart-repeat-button>
                    <div id="mainContainer" class="smart-menu-main-container">
                        <content></content>
                    </div>
                    <smart-repeat-button id="scrollButtonFar" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-far smart-hidden">
                        <div id="arrowFar" class="smart-arrow"></div>
                    </smart-repeat-button>
                </div>`}attached(){const e=this;if((super.attached(),!(Smart.ListMenu&&e instanceof Smart.ListMenu))&&e.isCompleted&&null!==e.dropDownAppendTo)if(e._minimized)e._dropDownParent.appendChild(e.$.mainContainer);else for(let t=0;t<e._containersInBody.length;t++)e._dropDownParent.appendChild(e._containersInBody[t])}detached(){const e=this;super.detached();Smart.ListMenu&&e instanceof Smart.ListMenu||null!==e.dropDownAppendTo&&(e._minimized?e._dropDownParent.removeChild(e.$.mainContainer):e._removeContainersInBody())}ready(){super.ready();const e=this;e._edge=Smart.Utilities.Core.Browser.Edge,e._containers=[],e._containersInBody=[],e._openedContainers=[],e._containersFixedHeight=[],e._menuItemsGroupsToExpand=[],e._createElement()}addItem(e,t){const n=this;if(!(e instanceof Smart.MenuItem||e instanceof Smart.MenuItemsGroup))return;let o,i;if(void 0===t)t=n.$.mainContainer,o=1,i=t;else{if("string"==typeof t&&(t=n.getItem(t)),void 0===t||!(t instanceof Smart.MenuItemsGroup&&(n.contains(t)||t.container.ownerElement===n)))return;o=t.level+1,i=t.itemContainer}if(n._createItemHTMLStructure(e,o,t,i.childElementCount,0),e instanceof Smart.MenuItemsGroup&&n._processHTML(e,o+1),i.appendChild(e),n._checkOverflowAddRemove(e.level,i),e instanceof Smart.MenuItemsGroup&&("tree"===n.mode||n._minimized)){const t=e.getElementsByClassName("smart-menu-items-group-arrow");for(let e=0;e<t.length;e++)t[e].innerHTML="&#xe804";n._expandItemsByDefault()}}checkItem(e){const t=this,n=t.getItem(e);void 0===n||n.checked||n.disabled||n.templateApplied||t._toggleItem(n)}close(){const e=this;if(!("dropDown"!==e.mode||!1===e.opened&&e.$.hasClass("smart-visibility-hidden"))){const t=e.$.fireEvent("closing");t.defaultPrevented?e.opened=!0:(e.opened=!1,e.$.addClass("smart-visibility-hidden"),e.$.fireEvent("close"))}}collapseItem(e){const t=this,n=t.getItem(e);if(!(void 0===n||n instanceof Smart.MenuItem)){const e=n.level;if(t._openedContainers[e+1]&&t._isContainerOpened(e+1,n.container)){const o=t.mode;t._closeSubContainers(e+1,n.container,void 0,!0),(1===e||"tree"===o)&&t._checkOverflow(t.$.mainContainer,"horizontal"===o,[t.$.scrollButtonNear,t.$.scrollButtonFar])}}}expandItem(e){const t=this,n=t.getItem(e);if(void 0===n||n instanceof Smart.MenuItemsGroup&&t._isContainerOpened(n.level+1,n.container))return;const o=[n];let i=n.parentItem;for(t._discardKeyboardHover();i;)o.unshift(i),i=i.parentItem;for(let n=0;n<o.length;n++){const e=o[n];if(n==o.length-1&&e instanceof Smart.MenuItem){e.disabled||e.templateApplied||t._hoverViaKeyboard(e);break}t._isContainerOpened(e.container.level,e.container)||t._selectionHandler({target:e,type:"expand",isTrusted:!0},e)}}getItem(e){const t=this;let n=document.getElementById(e);return null!==n&&(n instanceof Smart.MenuItem||n instanceof Smart.MenuItemsGroup)&&(t.contains(n)||n.parentElement.ownerElement===t)||(n=t._menuItems[e]),n}maximize(){const e=this;if(e._minimized){if(e.$.mainContainer.style.marginTop="",e.$.mainContainer.style.marginLeft="",e._closeSubContainers(2),e._minimized=!1,e._minimizedDropDownOpened&&(e.$hamburgerIcon.removeClass("smart-close-button"),e._minimizedDropDownOpened=!1),null!==e.dropDownAppendTo&&e._appendMinimizedContainerToMenu(e.$.mainContainer,e.$.scrollButtonFar),"tree"!==e.mode){e.$mainContainer.addClass("smart-menu-main-container"),e.$mainContainer.removeClass("smart-menu-minimized-items-container");const t=e.getElementsByClassName("smart-menu-items-group-arrow");for(let n=0;n<t.length;n++)e._setArrowDirection(t[n],t[n].parentElement.parentElement.level+1);null!==e.dropDownAppendTo&&e._moveDropDownsToExternalContainer(),e._applyContainerFixedHeight()}e.$mainContainer.removeClass("smart-visibility-hidden"),e.$hamburgerIcon.addClass("smart-hidden"),e.removeAttribute("minimized"),e._checkOverflow(e.$.mainContainer,"horizontal"===e.mode,[e.$.scrollButtonNear,e.$.scrollButtonFar])}}minimize(){const e=this;if(!(e._minimized||"dropDown"===e.mode)){e._closeSubContainers(2),"tree"!==e.mode&&(null!==e.dropDownAppendTo&&e._moveDropDownsToMenu(),e._removeContainerFixedHeight());const t=e.getElementsByClassName("smart-menu-items-group-arrow");e._hideMainContainerScrollButtons(),e.$mainContainer.removeClass("smart-menu-main-container"),e.$mainContainer.addClass("smart-visibility-hidden"),e._edge&&e.$mainContainer.addClass("not-in-view"),e.$hamburgerIcon.removeClass("smart-hidden"),setTimeout(function(){null!==e.dropDownAppendTo&&e._appendMinimizedContainerToExternalElement(e.$.mainContainer),e.$mainContainer.addClass("smart-menu-minimized-items-container")},0);for(let e=0;e<t.length;e++)t[e].innerHTML="&#xe804";e._minimized=!0,e.setAttribute("minimized","")}}open(e,t){const n=this;if("dropDown"===n.mode){const o=n.$.fireEvent("opening");o.defaultPrevented?n.opened=!1:(n.opened=!0,!isNaN(e)&&(n.style.left=e+1+"px"),!isNaN(t)&&(n.style.top=t+1+"px"),n.$.removeClass("smart-visibility-hidden"),n.$.fireEvent("open"),!n.$.hasClass("animation")&&n.focus())}}removeItem(e){const t=this;if("string"==typeof e&&(e=t.getItem(e)),void 0!==e&&(e instanceof Smart.MenuItem||e instanceof Smart.MenuItemsGroup)&&(t.contains(e)||e.parentElement.container.ownerElement===t)){const n=e.parentElement;if(e instanceof Smart.MenuItemsGroup){const n=e.container;if(t._isContainerOpened(n.level,n)&&t._closeSubContainers(n.level,n),1===e.level){const e=t._containersInBody.indexOf(n);-1!==e&&(t._containersInBody.splice(e,1),null!==t.dropDownAppendTo&&"tree"!==t.mode&&!t._minimized&&t._dropDownParent.removeChild(n))}}n.removeChild(e),t._refreshContainersArrays(),t._menuItems={},t._refreshItemPaths(t.$.mainContainer,!0),t._checkOverflowAddRemove(e.level,n)}}_setFocusable(){const e=this;return e.disabled||e.unfocusable?void e.removeAttribute("tabindex"):void((null===e.getAttribute("tabindex")||0>e.getAttribute("tabindex"))&&e.setAttribute("tabindex",0))}uncheckItem(e){const t=this,n=t.getItem(e);void 0===n||!n.checked||n.disabled||n.templateApplied||t._toggleItem(n)}propertyChangedHandler(e,t,n){function o(){(null!==r.dropDownAppendTo||"tree"===r.mode)&&r._checkOverflow(r.$.mainContainer,"horizontal"===r.mode,[r.$.scrollButtonNear,r.$.scrollButtonFar])}function a(e,t,n){n?t.setAttribute(e,""):t.removeAttribute(e)}super.propertyChangedHandler(e,t,n);const r=this;switch(e){case"checkable":"tree"===r.mode||r._minimized?r._minimized&&null!==r.dropDownAppendTo&&a("checkable",r.$.mainContainer,n):r._closeSubContainers(2);break;case"checkboxes":if(r._close(),null!==r.dropDownAppendTo){for(let e=0;e<r._containers.length;e++){const t=r._containers[e];a("checkboxes",t,n)}r._minimized&&a("checkboxes",r.$.mainContainer,n)}break;case"checkMode":r._changeToRadioButtonMode(n,r.$.mainContainer),r._minimized&&null!==r.dropDownAppendTo&&r.$.mainContainer.setAttribute("check-mode",n);break;case"dataSource":{let e=!1;r._minimized&&(r.maximize(),e=!0),r._removeContainersInBody(),r._containersInBody=[],r._menuItems={},r._processDataSource(),e?r.minimize():o(),r._expandItemsByDefault();break}case"dropDownAppendTo":{const e=r._dropDownParent;if(r._getDropDownParent(),r._dropDownParent===e||"tree"===r.mode&&!r._minimized)return;if(r._close(),r._minimized)return void(null===n?r._appendMinimizedContainerToMenu(r.$.mainContainer,r.$.scrollButtonFar):r._appendMinimizedContainerToExternalElement(r.$.mainContainer));if(null!==r._dropDownParent&&null===e)r._moveDropDownsToExternalContainer();else if(null===r._dropDownParent&&null!==e)r._moveDropDownsToMenu();else if(null!==r._dropDownParent&&null!==e)for(let e=0;e<r._containersInBody.length;e++)r._dropDownParent.appendChild(r._containersInBody[e]);null===n?r._hideMainContainerScrollButtons():r._checkOverflow(r.$.mainContainer,"horizontal"===r.mode,[r.$.scrollButtonNear,r.$.scrollButtonFar]);for(let e=0;e<r._containersFixedHeight.length;e++)r._containersFixedHeight[e].itemContainer.checkOverflow=!0;break}case"disabled":n&&r._close(),r._setFocusable(),r.$.scrollButtonNear.disabled=n,r.$.scrollButtonFar.disabled=n,n||"hidden"===r.overflow||null===r.dropDownAppendTo&&"tree"!==r.mode||r._updateScrollButtonVisibility(r.$.mainContainer,"horizontal"===r.mode,[r.$.scrollButtonNear,r.$.scrollButtonFar]);break;case"dropDownPosition":case"mode":{if("mode"===e){if("tree"===t||r._minimized?(r._closeSubContainersTreeMode(2,void 0,void 0,void 0,!0),r._openedContainers=[]):r._closeSubContainersDefaultMode(2),r._discardKeyboardHover(!0),r._minimized&&r._minimizedDropDownOpened&&(r.$mainContainer.addClass("smart-visibility-hidden"),r.$hamburgerIcon.removeClass("smart-close-button"),r._minimizedDropDownOpened=!1),("horizontal"===n||"horizontal"===t)&&r._changeScrollButtonsArrows(),r._minimized)return void("dropDown"===n&&(r.mode=t));!1===r.opened&&("dropDown"===n?r.$.addClass("smart-visibility-hidden"):"dropDown"===t&&r.$.removeClass("smart-visibility-hidden")),"tree"===t?(null!==r.dropDownAppendTo&&r._moveDropDownsToExternalContainer(),r.$mainContainer.addClass("smart-menu-main-container"),r.$mainContainer.removeClass("smart-menu-minimized-items-container"),r._applyContainerFixedHeight()):"tree"===n&&(null!==r.dropDownAppendTo&&r._moveDropDownsToMenu(),r._applyTreeMode()),"auto"===r.overflow&&r._hideMainContainerScrollButtons(),o()}if("tree"===r.mode||r._minimized)return void(r._minimized&&null!==r.dropDownAppendTo&&r.$.mainContainer.setAttribute(r.properties[e].attributeName,n));"dropDownPosition"===e&&r._close();const a=r.getElementsByTagName("smart-menu-items-group");for(let e=0;e<a.length;e++){const t=a[e];r._setArrowDirection(t.children[0].children[1],t.level+1)}if(null!==r.dropDownAppendTo)for(let t=0;t<r._containers.length;t++){const o=r._containers[t];o.setAttribute(Smart.Utilities.Core.toDash(e),n),2<o.level&&r._setArrowDirection(o.menuItemsGroup.children[0].children[1],o.level)}break}case"minimizeIconTemplate":r._applyMinimizeIconTemplate(n,t);break;case"minimizeWidth":r._resizeHandler();break;case"opened":n?r.open():r.close();break;case"overflow":r._handleOverflowChange();break;case"theme":if(null===r.dropDownAppendTo||Smart.ListMenu&&r instanceof Smart.ListMenu)return;if(r._minimized)""!==t&&r.$mainContainer.removeClass(t),""!==n&&r.$mainContainer.addClass(n);else for(let e=0;e<r._containers.length;e++){const o=r._containers[e];""!==t&&o.classList.remove(t),""!==n&&o.classList.add(n)}break;case"unfocusable":r._setFocusable();}}_addOpenedContainer(e,t){const n=this;return"tree"===n.mode||n._minimized?(n._openedContainers[e]||(n._openedContainers[e]=[]),t.menuItemsGroup.expanded=!0,n._openedContainers[e].push(t)):void(n._openedContainers[e]=t)}_appendMinimizedContainerToExternalElement(e){const t=this;e.ownerElement=t,t._dropDownParent.appendChild(e),t.$.hasClass("animation")&&e.$.addClass("animation"),""!==t.theme&&e.$.addClass(t.theme),e.$.addClass("smart-menu-drop-down"),e.setAttribute("external",""),e.setAttribute("check-mode",t.checkMode),e.setAttribute("drop-down-position",t.dropDownPosition),e.setAttribute("mode",t.mode),e.setAttribute("loading-indicator-position",t.loadingIndicatorPosition),t.checkable&&e.setAttribute("checkable",""),t.checkboxes&&e.setAttribute("checkboxes",""),t.$.view&&t.detachedChildren.indexOf(t.$.view)&&t.detachedChildren.push(t.$.view)}_appendMinimizedContainerToMenu(e,t){const n=this;delete e.ownerElement,n.$.container.insertBefore(e,t),e.$.removeClass("animation"),""!==n.theme&&e.$.removeClass(n.theme),e.$.removeClass("smart-menu-drop-down"),e.removeAttribute("external"),e.removeAttribute("checkable"),e.removeAttribute("checkboxes"),e.removeAttribute("check-mode"),e.removeAttribute("drop-down-position"),e.removeAttribute("mode"),e.removeAttribute("loading-indicator-position"),e.removeAttribute("style")}_applyContainerFixedHeight(){const e=this;for(let t=0;t<e._containers.length;t++){const n=e._containers[t];-1===e._containersFixedHeight.indexOf(n)?n.style.height="":(n.style.height=n.menuItemsGroup.dropDownHeight+"px",n.itemContainer.checkOverflow=!0)}}_applyMinimizeIconTemplate(e,t){const n=this;if(null===e){if(null===t)return;n.$customIconContainer.addClass("smart-hidden"),n.$.customIconContainer.innerHTML="",n.$hamburgerIconLineTop.removeClass("smart-hidden"),n.$hamburgerIconLineCenter.removeClass("smart-hidden"),n.$hamburgerIconLineBottom.removeClass("smart-hidden")}else{const o=document.getElementById(e);if(null!==o&&"template"===o.tagName.toLowerCase()){const e=document.importNode(o.content,!0);n.$hamburgerIconLineTop.addClass("smart-hidden"),n.$hamburgerIconLineCenter.addClass("smart-hidden"),n.$hamburgerIconLineBottom.addClass("smart-hidden"),n.$.customIconContainer.innerHTML="",n.$.customIconContainer.appendChild(e),n.$customIconContainer.removeClass("smart-hidden")}else n.minimizeIconTemplate=t}}_applyTreeMode(){const e=this,t=e.getElementsByClassName("smart-menu-items-group-arrow");e.$mainContainer.removeClass("smart-menu-main-container"),e.$mainContainer.addClass("smart-menu-minimized-items-container");for(let e=0;e<t.length;e++)t[e].innerHTML="&#xe804";e._removeContainerFixedHeight()}_arrowLeftHandler(e,t,n,o){const i=this;1===e?"horizontal"===t&&i._levelOneNavigate("_getLastEnabledChild",n,o):2===e?i._levelOneNavigateFromLowerLevel("_getPreviousEnabledChild",n):i._escapeHandler(n,e,o)}_arrowRightHandler(e,t,n,o){const i=this;1===e?"horizontal"===t?i._levelOneNavigate("_getFirstEnabledChild",n,o):i._levelOneOpenDropDown(n):n instanceof Smart.MenuItemsGroup?i._selectionHandler({target:n,isTrusted:!0}):i._levelOneNavigateFromLowerLevel("_getNextEnabledChild",n)}_browserBoundsDetection(e){const t=this;if(("tree"!==t.mode||t._minimized)&&(e.style.marginTop="",e.style.marginLeft="","auto"===t.dropDownPosition)){const t=document.documentElement.clientWidth,n=document.documentElement.clientHeight,o=e.getBoundingClientRect(),i=t-o.left-e.offsetWidth,a=n-o.top-e.offsetHeight;0>i&&(e.style.marginLeft=i+"px"),0>a&&(e.style.marginTop=a+"px")}}_changeScrollButtonsArrows(){const e=this;"horizontal"===e.mode?(e.$arrowNear.removeClass("smart-arrow-up"),e.$arrowNear.addClass("smart-arrow-left"),e.$arrowFar.removeClass("smart-arrow-down"),e.$arrowFar.addClass("smart-arrow-right")):(e.$arrowNear.removeClass("smart-arrow-left"),e.$arrowNear.addClass("smart-arrow-up"),e.$arrowFar.removeClass("smart-arrow-right"),e.$arrowFar.addClass("smart-arrow-down"))}_changeToRadioButtonMode(e,t,n){if("radioButton"===e){const e=[];for(let n=0;n<t.childElementCount;n++){const o=t.children[n];!o.checked||o.disabled||o.templateApplied||e.push(o)}this._validateRadioButtonSelection(n,n?n.level+1:1,e)}}_checkOverflow(e,t,n){var o=Math.round;const i=this,a=e===i.$.mainContainer?i.overflow:"auto";if(i._minimized||"hidden"===a||null===i.dropDownAppendTo&&"tree"!==i.mode&&e===i.$.mainContainer)return;let r,s,l;if(t?(r=o(e.scrollWidth)>o(e.offsetWidth),s=0<o(e.scrollLeft),l=o(e.offsetWidth+e.scrollLeft)<o(e.scrollWidth)):(r=o(e.scrollHeight)>o(e.offsetHeight),s=0<o(e.scrollTop),l=o(e.offsetHeight+e.scrollTop)<o(e.scrollHeight)),r)"auto"===a?(!e.classList.contains("scroll-buttons-shown")&&e.classList.add("scroll-buttons-shown"),s?n[0].$.removeClass("smart-hidden"):n[0].$.addClass("smart-hidden"),l?n[1].$.removeClass("smart-hidden"):n[1].$.addClass("smart-hidden"),!1===(s&&l)?e.classList.add("one-button-shown"):e.classList.remove("one-button-shown"),!i.disabled&&(n[0].disabled=!1,n[1].disabled=!1)):(n[0].$.removeClass("smart-hidden"),n[1].$.removeClass("smart-hidden"),i.disabled?(n[0].disabled=!0,n[1].disabled=!0):(n[0].disabled=!s,n[1].disabled=!l));else if(!r&&"auto"===a&&e.classList.contains("scroll-buttons-shown"))e.classList.remove("scroll-buttons-shown"),e.classList.remove("one-button-shown"),n[0].$.addClass("smart-hidden"),n[1].$.addClass("smart-hidden");else if(!r&&"scroll"===a)n[0].disabled=!0,n[1].disabled=!0;else return;e===i.$.mainContainer&&"tree"!==i.mode&&i._close()}_checkOverflowAddRemove(e,t){const n=this;1===e&&null!==n.dropDownAppendTo||"tree"===n.mode?n._checkOverflow(n.$.mainContainer,"horizontal"===n.mode,[n.$.scrollButtonNear,n.$.scrollButtonFar]):1<e&&t.dropDownHeightSet&&(n._isContainerOpened(e,t.container)?n._checkOverflow(t,!1,[t.container.children[0],t.container.children[2]]):t.checkOverflow=!0)}_close(){const e=this;e._closeSubContainers(2),e._discardKeyboardHover(!0),e._minimized&&e._minimizedDropDownOpened&&(e.$mainContainer.addClass("smart-visibility-hidden"),e._edge&&(e.$.mainContainer.style.left="",e.$.mainContainer.style.top="",e.$mainContainer.addClass("not-in-view")),e.$hamburgerIcon.removeClass("smart-close-button"),e._minimizedDropDownOpened=!1)}_closeSubContainers(e,t,n,o){const i=this;"tree"===i.mode||i._minimized?i._closeSubContainersTreeMode(e,t,n,o):i._closeSubContainersDefaultMode(e,t,n,o)}_closeSubContainersDefaultMode(e,t,n,o){function a(t){const i=s[t].menuItemsGroup;n&&t===e||i.$.removeClass("hovered"),i.$.removeClass("smart-menu-items-group-opened"),s[t].$.addClass("smart-visibility-hidden"),r._edge&&2===t&&!r.$.hasClass("animation")&&(s[t].style.left="",s[t].style.top="",s[t].$.addClass("not-in-view")),r._minimized&&r._browserBoundsDetection(r.$.mainContainer),o&&r.$.fireEvent("collapse",{item:i,label:i.label,path:i.path,value:i.value}),s[t]=void 0}const r=this,s=r._openedContainers;for(let r=s.length-1;r>=e;r--)void 0!==s[r]&&a(r,!0)}_closeSubContainersTreeMode(e,t,n,o,a){const r=this;if(void 0===t){for(let e=r._openedContainers.length-1;2<=e&&void 0!==r._openedContainers[e];e--)for(let t=r._openedContainers[e].length-1;0<=t;t--)r._closeSubContainersTreeMode(e,r._openedContainers[e][t],void 0,void 0,a);return void(r._openedContainers=[])}const i=t.menuItemsGroup;if(i.expanded=!1,n?i.$.addClass("hovered"):i.$.removeClass("hovered"),i.$.removeClass("smart-menu-items-group-opened"),a||!r.$.hasClass("animation")?(t.$.addClass("smart-visibility-hidden"),r._minimized&&r._browserBoundsDetection(r.$.mainContainer)):r._collapseSection(t),o&&r.$.fireEvent("collapse",{item:i,label:i.label,path:i.path,value:i.value}),!!r._openedContainers[e]){const n=r._openedContainers[e].indexOf(t);-1!==n&&r._openedContainers[e].splice(n,1)}}_collapseSection(e){const t=this,n=e.scrollHeight+"px";e.style.transition="none",requestAnimationFrame(function(){return"tree"===t.mode||t._minimized?void(e.style.height=n,e.style.transition="",requestAnimationFrame(function(){e.style.height="0px"})):void(e.style.transition="")}),e.addEventListener("transitionend",function n(){e.removeEventListener("transitionend",n),e.$.addClass("smart-visibility-hidden"),t._checkOverflow(t.$.mainContainer,!1,[t.$.scrollButtonNear,t.$.scrollButtonFar]),t._minimized&&t._browserBoundsDetection(t.$.mainContainer)})}_createElement(){const e=this,t=e.mode;e.disabled&&(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0),null===e.dataSource&&e.$.mainContainer.firstElementChild instanceof HTMLUListElement&&e._processUList();const n=e.querySelectorAll("smart-menu-item"),o=function(){e._changeScrollButtonsArrows(),e._setFocusable(),"dropDown"===t&&!1===e.opened&&(e.$.hasClass("animation")?(e.$.removeClass("animation"),e.$.addClass("smart-visibility-hidden"),e.$.addClass("animation")):e.$.addClass("smart-visibility-hidden")),e._getDropDownParent(),e._menuItems={},null===e.dataSource?e._processHTML(void 0,1):e._processDataSource(),(null!==e.dropDownAppendTo||"tree"===e.mode)&&"scroll"===e.overflow&&(e.$mainContainer.addClass("scroll-buttons-shown"),e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden"),e._updateScrollButtonVisibility(e.$.mainContainer,"horizontal"===t,[e.$.scrollButtonNear,e.$.scrollButtonFar])),e._applyMinimizeIconTemplate(e.minimizeIconTemplate,null),"tree"===t&&e._applyTreeMode(),null!==e.minimizeWidth&&e.offsetWidth<=e.minimizeWidth?e.minimize():e._checkOverflow(e.$.mainContainer,"horizontal"===t,[e.$.scrollButtonNear,e.$.scrollButtonFar]),e._expandItemsByDefault(),e.__onCompleted&&(e._onCompleted=e.__onCompleted,e.__onCompleted=null,e._onCompleted())};0===n.length?o():(e._onCompleted&&(e.__onCompleted=e._onCompleted,e._onCompleted=null),e._ensureItemsReady(n,o))}_ensureItemsReady(e,t){const n=this,o=function(){const n=function(t){for(let n=0;n<e.length;n++)e[n].context="node"===t?e[n]:document};n("node"),t(),n()};if(0===e.length)o();else{n._nodesReadyListeners=0;for(let t=0;t<e.length;t++){const i=e[t],a=function(){n._nodesReadyListeners--,0===n._nodesReadyListeners&&(o(),delete n._nodesReadyListeners)}.bind(n);i.isCompleted||(n._nodesReadyListeners++,i.completeHandlers=[],i._onCompleted=a)}0===n._nodesReadyListeners&&o()}}_createItemHTMLStructure(e,t,n,o){const i=this,a=document.createElement("div"),r=document.createElement("div");let s;e.menu=i,1<t?(e.originalIndex=o,s=n.path+"."+e.originalIndex,e.parentItem=n):(e.originalIndex=o,s=""+o),e.path=s,i._menuItems[s]=e,a.className="smart-menu-item-label-container",r.className="smart-menu-item-label-element";const l=Array.from(e.childNodes);for(let a=0;a<l.length;a++){const e=l[a];if(e instanceof Smart.MenuItem||e instanceof Smart.MenuItemsGroup)break;r.appendChild(e)}if(""===r.innerHTML.trim()){const t=e.label;t&&""!==t?i._setLabel(t,r,e,!0):(e.label="Item "+o,r.innerHTML="Item "+o)}else e.label=r.innerHTML.trim();if(e instanceof Smart.MenuItemsGroup&&void 0===e.titleLabel&&(e.titleLabel=e.label),a.appendChild(r),e.level=t,e.shortcut&&e instanceof Smart.MenuItem){const t=document.createElement("div");t.className="smart-menu-item-shortcut",i._setLabel(e.shortcut,t,e),a.appendChild(t)}e.insertBefore(a,e.children[0])}_createMenuItemsGroupContainer(e,t){const n=this,o=document.createElement("div"),i=document.createElement("div");if(o.className="smart-menu-drop-down smart-visibility-hidden",n._edge&&2===t&&"tree"!==n.mode&&(o.className+=" not-in-view"),o.$=Smart.Utilities.Extend(o),o.level=t,o.setAttribute("level",t),o.menuItemsGroup=e,i.className="smart-menu-item-container",i.$=Smart.Utilities.Extend(i),i.container=o,i.menuItemsGroup=e,e.checkable&&i.setAttribute("checkable",""),i.setAttribute("check-mode",e.checkMode),o.itemContainer=i,o.appendChild(i),null!==e.dropDownHeight){const t=document.createElement("smart-repeat-button"),a=document.createElement("smart-repeat-button");t.className="smart-menu-scroll-button smart-spin-button smart-scroll-button-near smart-hidden",t.innerHTML="<div id=\"arrowNear\" class=\"smart-arrow smart-arrow-up\"></div>",a.className="smart-menu-scroll-button smart-spin-button smart-scroll-button-far smart-hidden",a.innerHTML="<div id=\"arrowNear\" class=\"smart-arrow smart-arrow-down\"></div>",o.insertBefore(t,i),o.appendChild(a),o.$.addClass("drop-down-height-set"),i.dropDownHeightSet=!0,i.checkOverflow=!0,o.style.height=e.dropDownHeight+"px",n._containersFixedHeight.push(o)}return o}_discardKeyboardHover(e){const t=this;!t._hoveredViaKeyboard||!e&&t._hoveredViaKeyboard instanceof Smart.MenuItemsGroup&&t._isContainerOpened(t._hoveredViaKeyboard.level+1,t._hoveredViaKeyboard.container)||(t._hoveredViaKeyboard.$.removeClass("hovered"),t._hoveredViaKeyboard=void 0)}_documentUpHandler(e){const t=this,n=e.originalEvent.target;if(!t.disabled&&n.closest)if(!t.contains(n)&&null===n.closest(".smart-menu-drop-down")||n===t.$.mainContainer){if("tree"===t.mode)return;t._close()}else(t.contains(n)||n.closest(".smart-list-menu-view")===t.$.view)&&t!==document.activeElement&&null===document.activeElement.closest("[template-applied]")&&t.focus()}_ensureVisible(e){const t=this;if(t._minimized)return;const n=t.mode;let o,i;if("tree"!==n&&e.parentElement!==t.$.mainContainer?(o=e.parentElement,i=[o.container.children[0],o.container.children[2]]):(o=t.$.mainContainer,i=[t.$.scrollButtonNear,t.$.scrollButtonFar]),o!==t.$.mainContainer||(null!==t.dropDownAppendTo||"tree"===t.mode)&&("auto"!==t.overflow||o.$.hasClass("scroll-buttons-shown"))){const a=o.getBoundingClientRect(),r=e.getBoundingClientRect();if("tree"===n)return void t._ensureVisibleTreeMode(e,r,o,a);if(o===t.$.mainContainer&&"horizontal"===n&&(a.left>r.left||a.right<r.right))o.scrollLeft=e.offsetLeft,t._updateScrollButtonVisibility(o,!0,i);else if(a.top>r.top||a.bottom<r.bottom){let n=e.offsetTop;o===t.$.mainContainer||i[0].$.hasClass("smart-hidden")||(n-=i[0].offsetHeight),o.scrollTop=n,t._updateScrollButtonVisibility(o,!1,i)}}}_ensureVisibleTreeMode(e,t,n,o){const i=this;o.top<=t.top&&o.bottom>=t.top+e.firstElementChild.offsetHeight||(e.scrollIntoView(),i._updateScrollButtonVisibility(n,!1,[i.$.scrollButtonNear,i.$.scrollButtonFar]))}_escapeHandler(e,t,n){const o=this;e&&e.$.removeClass("hovered"),o._closeSubContainers(t,void 0,void 0,!0),o._hoverViaKeyboard(n.menuItemsGroup)}_expandItemsByDefault(){const e=this;if(0!==e._menuItemsGroupsToExpand.length&&("tree"===e.mode||e._minimized)){const t=e.$.hasClass("animation");t&&e.$.removeClass("animation");for(let t=0;t<e._menuItemsGroupsToExpand.length;t++)e.expandItem(e._menuItemsGroupsToExpand[t].path);t&&e.$.addClass("animation"),e._menuItemsGroupsToExpand=[]}}_expandSection(e){const t=this,n=e.scrollHeight+"px";e.style.height=n,e.addEventListener("transitionend",function n(){e.removeEventListener("transitionend",n),e.style.height=null,t._checkOverflow(t.$.mainContainer,!1,[t.$.scrollButtonNear,t.$.scrollButtonFar]),t._minimized&&t._browserBoundsDetection(t.$.mainContainer)})}_getFirstEnabledChild(e){const t=e.children;for(let n=0;n<t.length;n++)if(this._isChildEnabled(t[n]))return t[n]}_getLastEnabledChild(e){const t=e.children;for(let n=t.length-1;0<=n;n--)if(this._isChildEnabled(t[n]))return t[n]}_getNextEnabledChild(e){if(e)for(;e.nextElementSibling;){const t=e.nextElementSibling;if(this._isChildEnabled(t))return t;e=t}}_getDropDownParent(){const e=this;let t=e.dropDownAppendTo;null===t?e._dropDownParent=null:"body"===t||t===document.body?e._dropDownParent=document.body:t instanceof HTMLElement?e._dropDownParent=t:"string"==typeof t?(t=document.getElementById(t),t instanceof HTMLElement?e._dropDownParent=t:(e.dropDownAppendTo=null,e._dropDownParent=null)):(e.dropDownAppendTo=null,e._dropDownParent=null),e._getPositionedParent()}_getPositionedParent(){const e=this,t={getBoundingClientRect:function(){return{left:0,top:0}}};if(null===e._dropDownParent)e._positionedParent=null;else if(e._dropDownParent===document.body)e._positionedParent=t;else{let n=e._dropDownParent;for(;"static"===window.getComputedStyle(n).position&&n!==document.body;)n=n.parentElement;e._positionedParent=n===document.body?t:n}}_getPreviousEnabledChild(e){if(e)for(;e.previousElementSibling;){const t=e.previousElementSibling;if(this._isChildEnabled(t))return t;e=t}}_hamburgerIconClickHandler(e,t){e&&e.stopPropagation();const n=this;if(void 0===t&&(Smart.ListMenu&&n instanceof Smart.ListMenu?t=n.$.view:t=n.$.mainContainer),!n.disabled)if(!n._minimizedDropDownOpened){if(null!==n.dropDownAppendTo){const e=n.dropDownPosition,o=window.scrollX||window.pageXOffset,i=window.scrollY||window.pageYOffset,a=n.getBoundingClientRect(),r=n._positionedParent.getBoundingClientRect();-1!==e.indexOf("right")||"auto"===e?(t.style.left=a.left-r.left+o+"px",t.style.right="initial"):-1!==e.indexOf("left")&&(t.style.left=a.right-r.left-t.offsetWidth+o+"px",t.style.right="initial"),-1!==e.indexOf("bottom")||-1!==e.indexOf("overlay")||"auto"===e?t.style.top=a.bottom-r.top+i+"px":-1!==e.indexOf("top")&&(t.style.top=a.top-r.top+i+"px")}n._edge&&t.$.removeClass("not-in-view"),t.$.removeClass("smart-visibility-hidden"),n.$hamburgerIcon.addClass("smart-close-button"),n._minimizedDropDownOpened=!0,n._browserBoundsDetection(t)}else n._close()}_handleOverflowChange(){const e=this;if((e._minimized||null===e.dropDownAppendTo&&"tree"!==e.mode)&&!(Smart.ListMenu&&e instanceof Smart.ListMenu))return;const t=e.overflow;let n;"horizontal"===e.mode?(n=!0,e.$.mainContainer.scrollLeft=0):(n=!1,e.$.mainContainer.scrollTop=0),"hidden"===t?(e.$mainContainer.removeClass("scroll-buttons-shown"),e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden")):(e.$.scrollButtonNear.disabled=e.disabled,e.$.scrollButtonFar.disabled=e.disabled,"auto"===t?(e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden"),e._checkOverflow(e.$.mainContainer,n,[e.$.scrollButtonNear,e.$.scrollButtonFar])):(e.$mainContainer.addClass("scroll-buttons-shown"),e.$mainContainer.removeClass("one-button-shown"),e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden"),e._updateScrollButtonVisibility(e.$.mainContainer,n,[e.$.scrollButtonNear,e.$.scrollButtonFar])))}_hideMainContainerScrollButtons(){const e=this;e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden"),e.$mainContainer.removeClass("scroll-buttons-shown"),e.$mainContainer.removeClass("one-button-shown")}_hoverViaKeyboard(e){if(e){const t=this;e.$.addClass("hovered"),t._hoveredViaKeyboard=e,t._ensureVisible(e)}}_isChildEnabled(e){return!(e.disabled||e.templateApplied||e.hidden||e instanceof HTMLDivElement)}_isContainerOpened(e,t){const n=this;return"tree"===n.mode||n._minimized?(n._openedContainers[e]||(n._openedContainers[e]=[]),-1!==n._openedContainers[e].indexOf(t)):n._openedContainers[e]===t}_keydownHandler(e){const t=this,n=e.key;if(document.activeElement!==t||-1===["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Escape","Home"," "].indexOf(n)||t.disabled)return;e.preventDefault();const o=t.mode;if("tree"===o||t._minimized)return void t._keydownHandlerTreeMode(n);const i=t.dropDownPosition,a=-1!==i.indexOf("left"),r="top-left"===i||"top-right"===i,s=t._openedContainers;let l=t.$.mainContainer,d=1,m;for(let t=s.length-1;0<=t;t--)if(void 0!==s[t]){l=s[t],d=l.level,l=l.itemContainer;break}switch(m=l.querySelector(".hovered[level=\""+d+"\""),n){case"ArrowDown":1===d?"horizontal"!==o||r?"horizontal"!==o&&t._levelOneNavigate("_getFirstEnabledChild",m,l):t._levelOneOpenDropDown(m):t._navigate("_getNextEnabledChild",m,l);break;case"ArrowLeft":a?1===d?"horizontal"===o?t._levelOneNavigate("_getLastEnabledChild",m,l):t._levelOneOpenDropDown(m):m instanceof Smart.MenuItemsGroup?t._selectionHandler({target:m,isTrusted:!0}):t._levelOneNavigateFromLowerLevel("_getPreviousEnabledChild",m):t._arrowLeftHandler(d,o,m,l);break;case"ArrowRight":a?1===d?"horizontal"===o&&t._levelOneNavigate("_getFirstEnabledChild",m,l):2===d?t._levelOneNavigateFromLowerLevel("_getNextEnabledChild",m):t._escapeHandler(m,d,l):t._arrowRightHandler(d,o,m,l);break;case"ArrowUp":1===d?"horizontal"===o&&r?t._levelOneOpenDropDown(m):"horizontal"!==o&&t._levelOneNavigate("_getLastEnabledChild",m,l):t._navigate("_getPreviousEnabledChild",m,l);break;case"End":case"Home":{const e="End"===n?t._getLastEnabledChild(l):t._getFirstEnabledChild(l);if(!e||m===e)return;m&&m.$.removeClass("hovered"),t._hoverViaKeyboard(e);break}case"Enter":m&&t._selectionHandler({target:m,isTrusted:!0});break;case"Escape":1<d&&t._escapeHandler(m,d,l);break;case" ":m&&t._toggleItem(m);}}_keydownHandlerTreeMode(e){function t(e){const t=e.level;return!1===e.disabled&&!0!==e.templateApplied&&(1===t||1<t&&a._isContainerOpened(t,e.parentElement.container)&&0<e.getBoundingClientRect().height)}function n(e){for(let n=e;n<r.length;n++){const e=r[n];if(t(e)){if(s){if(s===e)break;s.$.removeClass("hovered")}a._hoverViaKeyboard(e);break}}}function o(e){for(let n=e;0<=n;n--){const e=r[n];if(t(e)){if(s){if(s===e)break;s.$.removeClass("hovered")}a._hoverViaKeyboard(e);break}}}function i(){1<s.level&&(s.$.removeClass("hovered"),a._hoverViaKeyboard(s.parentItem))}const a=this,r=Array.from(a.$.mainContainer.querySelectorAll("smart-menu-item, smart-menu-items-group")),s=a.$.mainContainer.getElementsByClassName("hovered")[0];let l;switch(e){case"ArrowDown":l=s?r.indexOf(s)+1:0,n(l);break;case"ArrowLeft":if(!s)return;if(s instanceof Smart.MenuItem)i();else{if(a._isContainerOpened(s.level+1,s.container))return void a._closeSubContainers(s.level+1,s.container,!0,!0);i()}break;case"ArrowRight":if(!s||s instanceof Smart.MenuItem)return;a._isContainerOpened(s.level+1,s.container)?(s.$.removeClass("hovered"),a._hoverViaKeyboard(a._getFirstEnabledChild(s.itemContainer))):a._selectionHandler({target:s,type:"keydown",isTrusted:!0},s);break;case"ArrowUp":l=s?r.indexOf(s)-1:r.length-1,o(l);break;case"End":o(r.length-1);break;case"Enter":a._minimized&&!a._minimizedDropDownOpened?a._hamburgerIconClickHandler(void 0,a.$.mainContainer):s&&a._selectionHandler({target:s,type:"keydown",isTrusted:!0});break;case"Escape":a._minimized&&a._minimizedDropDownOpened&&a._close();break;case"Home":n(0);break;case" ":s&&a._toggleItem(s);}}_levelOneNavigate(e,t,n){const o=this;if(!t){const t=o[e](n);t&&o._hoverViaKeyboard(t)}else"_getLastEnabledChild"===e?o._navigate("_getPreviousEnabledChild",t,n):o._navigate("_getNextEnabledChild",t,n)}_levelOneNavigateFromLowerLevel(e,t){const n=this,o=n[e](n._openedContainers[2].menuItemsGroup);o&&(t&&t.$.removeClass("hovered"),n._closeSubContainers(2),o instanceof Smart.MenuItemsGroup?n._selectionHandler({target:o,isTrusted:!0}):n._hoverViaKeyboard(o))}_levelOneOpenDropDown(e){e&&e instanceof Smart.MenuItemsGroup&&this._selectionHandler({target:e,isTrusted:!0})}_mainContainerHandler(e){const t=this;if(t._minimized&&null!==t.dropDownAppendTo)switch(e.type){case"click":t._selectionHandler(e);break;case"mouseleave":t._mouseleaveHandler(e);break;case"mouseout":t._mouseoutMouseoverHandler(e);break;case"mouseover":t._mouseoutMouseoverHandler(e);}}_menuItemsGroupSelectionHandler(e,t,n){const o=this,i=e.container,a=i.level,r="tree"!==t&&!o._minimized;if(o._discardKeyboardHover(),document.activeElement===o||null===o.dropDownAppendTo||"click"!==n.type||o.contains(n.target)||o.focus(),"click"!==n.type||(n.target.classList.contains("smart-menu-items-group-arrow")||!o._toggleItem(e))&&("mouseenter"!==o.selectionMode||"tree"===t||o._minimized)){let s=o.$.hasClass("animation");if(o._isContainerOpened(a,i))o._closeSubContainers(a,i,!0,!0);else{if(r&&o._closeSubContainers(a),s?(i.$.addClass("animation"),!r&&o._expandSection(i)):i.$.removeClass("animation"),o._edge&&2===a&&r&&i.$.removeClass("not-in-view"),i.$.removeClass("smart-visibility-hidden"),!r&&"expand"===n.type||(e.$.addClass("hovered"),o._ensureVisible(e),"keydown"===n.type&&(o._hoveredViaKeyboard=e)),e.$.addClass("smart-menu-items-group-opened"),o._addOpenedContainer(a,i),o._positionExternalContainer(i,e),r){if(1<e.level&&e.parentElement.dropDownHeightSet){const t=o.dropDownPosition,n=e.getBoundingClientRect().top-e.parentElement.container.getBoundingClientRect().top;i.style.top=-1!==t.indexOf("bottom")||"auto"===t?n+"px":-1===t.indexOf("top")?n+e.offsetHeight/2+"px":n+e.offsetHeight+"px"}i.itemContainer.checkOverflow&&i.itemContainer.dropDownHeightSet&&(o._checkOverflow(i.itemContainer,!1,[i.children[0],i.children[2]]),delete i.itemContainer.checkOverflow)}"tree"===t||o._minimized?!s&&o._browserBoundsDetection(o.$.mainContainer):o._browserBoundsDetection(i),void 0===n.type&&o._hoverViaKeyboard(o._getFirstEnabledChild(e.itemContainer)),o.$.fireEvent("expand",{item:e,label:e.label,path:e.path,value:e.value})}r?o._ripple(e,n):"tree"===t&&!s&&o._checkOverflow(o.$.mainContainer,!1,[o.$.scrollButtonNear,o.$.scrollButtonFar])}}_mouseenterHandler(){const e=this;e.autoFocusOnMouseenter&&document.activeElement!==e&&e.focus()}_mouseleaveHandler(e){const t=this;if("mouseenter"===t.selectionMode&&"tree"!==t.mode&&!t._minimized){if(null!==t.dropDownAppendTo&&e.relatedTarget)if(t.contains(e.target)){const n=e.relatedTarget.closest(".smart-menu-drop-down");if(n&&n.ownerElement===t)return}else if(t.contains(e.relatedTarget))return;t._close()}}_mouseoutMouseoverHandler(e){if(!this.disabled){const t=this,n=e.target.closest("smart-menu-item")||e.target.closest("smart-menu-items-group");if(!(null===n||n.disabled||n.templateApplied))if(t._discardKeyboardHover(),"mouseover"===e.type)"mouseenter"!==t.selectionMode||"tree"===t.mode||t._minimized||(n instanceof Smart.MenuItemsGroup&&!n.$.hasClass("hovered")?t._selectionHandler(e,n):n instanceof Smart.MenuItem&&t._closeSubContainers(n.level+1)),n.$.addClass("hovered"),t._discardKeyboardHover(!0);else{if(e.relatedTarget!==t.$.mainContainer||"mouseenter"!==t.selectionMode||"tree"===t.mode||t._minimized||t._close(),"tree"!==t.mode&&!t._minimized&&n instanceof Smart.MenuItemsGroup&&n.container&&!n.container.$.hasClass("smart-visibility-hidden"))return;n.$.removeClass("hovered")}}}_moveDropDownsToExternalContainer(){const e=this;for(let t=0;t<e._containersInBody.length;t++){const n=e._containersInBody[t];e._dropDownParent.appendChild(n),n.$.listen("click",e._selectionHandler.bind(e)),n.$.listen("mouseleave",e._mouseleaveHandler.bind(e)),n.$.listen("mouseout",e._mouseoutMouseoverHandler.bind(e)),n.$.listen("mouseover",e._mouseoutMouseoverHandler.bind(e))}for(let t=0;t<e._containers.length;t++){const n=e._containers[t];n.ownerElement=e,""!==e.theme&&n.classList.add(e.theme),n.setAttribute("external",""),n.setAttribute("mode",e.mode),n.setAttribute("drop-down-position",e.dropDownPosition),e.checkboxes&&n.setAttribute("checkboxes","")}}_moveDropDownsToMenu(){const e=this;for(let t=0;t<e._containersInBody.length;t++){const n=e._containersInBody[t];n.$.unlisten("click"),n.$.unlisten("mouseleave"),n.$.unlisten("mouseout"),n.$.unlisten("mouseover"),n.style.left="",n.style.right="",n.style.top="",n.style.marginLeft="",n.style.marginTop="",n.menuItemsGroup.appendChild(n)}for(let t=0;t<e._containers.length;t++){const n=e._containers[t];""!==e.theme&&n.classList.remove(e.theme),n.removeAttribute("external"),n.removeAttribute("mode"),n.removeAttribute("drop-down-position"),n.removeAttribute("checkboxes")}}_navigate(e,t,n){const o=this;if(!t)return void("_getNextEnabledChild"===e?o._hoverViaKeyboard(o._getFirstEnabledChild(n)):o._hoverViaKeyboard(o._getLastEnabledChild(n)));const i=o[e](t);i&&(t.$.removeClass("hovered"),o._hoverViaKeyboard(i))}_positionExternalContainer(e,t){const n=this;if(null===n.dropDownAppendTo||2!==e.level)return;const o=n.dropDownPosition,i=n.mode,a=t.getBoundingClientRect(),r=n._positionedParent.getBoundingClientRect(),s=window.scrollX||window.pageXOffset,l=window.scrollY||window.pageYOffset,d=a.top-r.top+l,m=a.bottom-r.top+l;let c=a.left-r.left+s;e.style.left="",e.style.right="",e.style.top="",-1===o.indexOf("left")?"horizontal"===i||"overlay-right"===o?e.style.left=c+"px":e.style.left=c+a.width+"px":(c-=e.offsetWidth,("horizontal"===i||"overlay-left"===o)&&(c+=a.width),e.style.left=c+"px",e.style.right="initial");"bottom-right"===o||"bottom-left"===o||"auto"===o?e.style.top="horizontal"===i?m+"px":d+"px":"top-right"===o||"top-left"===o?e.style.top="horizontal"===i?d-e.offsetHeight+"px":m-e.offsetHeight+"px":"overlay-right"===o||"overlay-left"===o?e.style.top=d+a.height/2+"px":void 0}_processDataSource(){function e(n,o){let a;if(n.items instanceof Array&&0<n.items.length){a=document.createElement("smart-menu-items-group"),!0===n.checkable&&(a.checkable=!0),("checkbox"===n.checkMode||"radioButton"===n.checkMode)&&(a.checkMode=n.checkMode),n.dropDownHeight&&(a.dropDownHeight=n.dropDownHeight),!0===n.expanded&&"tree"===t.mode&&(a.expanded=!0);for(let t=0;t<n.items.length;t++)e(n.items[t],a)}else a=document.createElement("smart-menu-item"),void 0!==n.shortcut&&(a.shortcut=n.shortcut);!0===n.checked&&(a.checked=!0),!0===n.disabled&&(a.disabled=!0),n.label!==void 0&&(a.label=n.label),!0===n.separator&&(a.separator=!0),n.value!==void 0&&(a.value=n.value),o.appendChild(a)}const t=this,n=t.dataSource;t.$.mainContainer.innerHTML="";for(let o=0;o<n.length;o++){const i=n[o];e(i,t.$.mainContainer)}t._processHTML(void 0,1)}_processHTML(e,t){const n=this;let o,a;e===void 0&&(e=n.$.mainContainer),1<t&&(o=n._createMenuItemsGroupContainer(e,t),a=o.itemContainer,e.expanded&&"tree"===n.mode?n._menuItemsGroupsToExpand.push(e):e.expanded=!1);const r=Array.from(e.children),s=[];let l=0;for(let o=0;o<r.length;o++){if(1<t&&0==o){l++;continue}const i=r[o];if(!(i instanceof Smart.MenuItem||i instanceof Smart.MenuItemsGroup)){i.parentElement.removeChild(i),l++;continue}n._createItemHTMLStructure(i,t,e,o-l),i.checked&&(i.disabled||i.templateApplied?i.checked=!1:s.push(i)),1<t&&a.appendChild(i),i instanceof Smart.MenuItemsGroup&&n._processHTML(i,t+1)}if(1<t){if(e.container=o,e.itemContainer=a,e instanceof Smart.MenuItemsGroup){const o=document.createElement("div");o.className="smart-menu-items-group-arrow",n._setArrowDirection(o,t),e.children[0].appendChild(o)}n._containers.push(o),2==t&&(n._containersInBody.push(o),n._edge&&o.addEventListener("transitionend",function(e){e.target===this&&this.$.hasClass("smart-visibility-hidden")&&(this.style.left="",this.style.top="",this.$.addClass("not-in-view"))})),null===n.dropDownAppendTo||"tree"===n.mode||n._minimized?e.appendChild(o):(o.ownerElement=n,o.setAttribute("external",""),o.setAttribute("mode",n.mode),o.setAttribute("drop-down-position",n.dropDownPosition),n.checkboxes&&o.setAttribute("checkboxes",""),""!==n.theme&&o.$.addClass(n.theme),n.$.hasClass("animation")?o.$.addClass("animation"):o.$.removeClass("animation"),2===t?(n._dropDownParent.appendChild(o),o.$.listen("click",n._selectionHandler.bind(n)),o.$.listen("mouseleave",n._mouseleaveHandler.bind(n)),o.$.listen("mouseout",n._mouseoutMouseoverHandler.bind(n)),o.$.listen("mouseover",n._mouseoutMouseoverHandler.bind(n))):e.appendChild(o))}n._validateRadioButtonSelection(e,t,s)}_processUList(){const e=this,t=new RegExp(/<li>(.(?!<\/li>)|\n)*?<ul>/),n=new RegExp(/<\/ul>(.|\n)*?<\/li>/);let o=e.$.mainContainer.firstElementChild.innerHTML;for(o=o.replace(/\r?\n|\r/g,""),o=o.replace(/<li(.|\n)*?>/g,"<li>"),o=o.replace(/<li><\/li>/g,"<li> </li>"),o=o.replace(/<ul(.|\n)*?>/g,"<ul>");t.test(o);){const e=t.exec(o),n="<smart-menu-items-group>"+e[0].slice(4,e[0].length-4);o=o.replace(e[0],n)}for(;n.test(o);){const e=n.exec(o);o=o.replace(e[0],"</smart-menu-items-group>")}o=o.replace(/li>/g,"smart-menu-item>"),e.$.mainContainer.innerHTML=o}_refreshContainersArrays(){const e=this;for(let t=e._containers.length-1;0<=t;t--){const n=e._containers[t];if(!document.body.contains(n)){e._containers.splice(t,1);const o=e._containersFixedHeight.indexOf(n);-1<o&&e._containersFixedHeight.splice(o,1)}}}_refreshItemPaths(e,t,n){const o=this;let i=t?e:e.container.itemContainer;const a=n?n(e):i.children;for(let r=0;r<a.length;r++){const i=a[r];let s;s=t?""+r:e.path+"."+r,i.path=s,o._menuItems[s]=i,i instanceof Smart.MenuItemsGroup&&o._refreshItemPaths(i,void 0,n)}}_removeContainerFixedHeight(){const e=this;for(let t=0;t<e._containersFixedHeight.length;t++){const n=e._containersFixedHeight[t];n.style.height="",n.itemContainer.$.removeClass("scroll-buttons-shown"),n.itemContainer.$.removeClass("one-button-shown"),n.children[0].$.addClass("smart-hidden"),n.children[2].$.addClass("smart-hidden"),n.itemContainer.checkOverflow=!0}}_removeContainersInBody(){const e=this;if(null!==e.dropDownAppendTo&&!e._minimized)for(let t=0;t<e._containersInBody.length;t++)e._dropDownParent.removeChild(e._containersInBody[t])}_resizeHandler(){const e=this,t=e.minimizeWidth,n=e.mode;if(null!==t&&"dropDown"!==n){if(e.offsetWidth<=t&&!e._minimized)return void e.minimize();e.offsetWidth>t&&e.maximize()}(null!==e.dropDownAppendTo||"tree"===n)&&e._checkOverflow(e.$.mainContainer,"horizontal"===n,[e.$.scrollButtonNear,e.$.scrollButtonFar])}_ripple(e,t){const n=this;if(-1!==n.theme.indexOf("material")&&"click"===t.type)return Smart.Utilities.Animation.Ripple.animate(e,t.pageX,t.pageY),!0}_scroll(e){const t=this,n=t.mode,o=e.classList.contains("smart-scroll-button-near")?-1:1;if(e.parentElement===t.$.container){const e=t.$.mainContainer;"tree"!==n&&t._closeSubContainers(2),"horizontal"===t.mode?(e.scrollLeft+=10*o,t._updateScrollButtonVisibility(e,!0,[t.$.scrollButtonNear,t.$.scrollButtonFar])):(e.scrollTop+=10*o,t._updateScrollButtonVisibility(e,!1,[t.$.scrollButtonNear,t.$.scrollButtonFar]))}else{const n=e.parentElement,i=n.itemContainer;t._closeSubContainers(n.level+1),i.scrollTop+=10*o,t._updateScrollButtonVisibility(i,!1,[n.children[0],n.children[2]])}}_selectionHandler(e,t){function n(){document.activeElement===o||null===o.dropDownAppendTo||"click"!==e.type||o.contains(i)||o.focus()}const o=this,i=e.target;if(!o.disabled){const a=o.mode;if(void 0===t){if("click"===e.type){const t=i.closest("smart-repeat-button");if(t)return void o._scroll(t,e)}if(!e.isTrusted)return;const r=i.closest("smart-menu-item");if(r){if(r.disabled||r.templateApplied)return void n();if(!o._toggleItem(r)&&(o.$.fireEvent("itemClick",{item:r,label:r.label,value:r.value}),"tree"!==a&&(o._close(),"dropDown"===a))){const t=o._ripple(r,e);return void(t?setTimeout(function(){o.close()},300):o.close())}return o._ripple(r,e),void n()}if(!e.isTrusted)return;if(t=i.closest("smart-menu-items-group"),t&&(i===t.container||i===t.container.firstElementChild))return}t&&!t.disabled&&o._menuItemsGroupSelectionHandler(t,a,e)}}_setArrowDirection(e,t){const n=this;e.innerHTML="overlay"===n.dropDownPosition.slice(0,7)?"&#xe806":2===t&&"horizontal"===n.mode?"top"===n.dropDownPosition.slice(0,3)?"&#xe801":"&#xe804":"&#xe802"}_setLabel(e,t,n,o){const i=document.getElementById(e);if(null!==i&&"template"===i.tagName.toLowerCase()){const e=document.importNode(i.content,!0);if(n instanceof Smart.MenuItem)t.appendChild(e),o&&(n.setAttribute("template-applied",""),n.templateApplied=!0);else{const o=new RegExp(/{{title="(.*)"}}/);for(let t=0;t<e.childNodes.length;t++)o.test(e.childNodes[t].innerHTML)?(n.titleLabel=o.exec(e.childNodes[t].innerHTML)[1],e.childNodes[t].innerHTML=e.childNodes[t].innerHTML.replace(o,"")):o.test(e.childNodes[t].textContent)&&(n.titleLabel=o.exec(e.childNodes[t].textContent)[1],e.childNodes[t].textContent=e.childNodes[t].textContent.replace(o,""));n.titleLabel===void 0&&(n.titleLabel=e.textContent),t.appendChild(e)}}else t.innerHTML=e,n instanceof Smart.MenuItemsGroup&&(n.titleLabel=e)}_toggleItem(e){const t=this;if(t.checkboxes){const n=1===e.level?t:e.parentItem;if(n.checkable)return"checkbox"===n.checkMode?(e.checked=!e.checked,t.$.fireEvent("itemCheckChange",{item:e,label:e.label,value:e.value,checked:e.checked})):!e.checked&&(e.checked=!0,t._uncheckSiblings(e),t.$.fireEvent("itemCheckChange",{item:e,label:e.label,value:e.value,checked:!0})),!0}return!1}_transitionendHandler(){const e=this;"dropDown"===e.mode&&e.opened&&document.activeElement!==e&&e.focus()}_uncheckSiblings(e){for(let t=0;t<e.parentElement.childElementCount;t++){const n=e.parentElement.children[t];n!==e&&n.checked&&(n.checked=!1,this.$.fireEvent("itemCheckChange",{item:n,label:n.label,value:n.value,checked:!1}))}}_updateScrollButtonVisibility(e,t,n){var o=Math.round;const i=this;let a=!0,r=!0,s,l,d;if(t?(s="scrollLeft",l="offsetWidth",d="scrollWidth"):(s="scrollTop",l="offsetHeight",d="scrollHeight"),0===o(e[s])&&(a=!1),o(e[l]+e[s])>=o(e[d])&&(r=!1),e!==i.$.mainContainer||"auto"===i.overflow){if(a&&r)return n[0].$.removeClass("smart-hidden"),n[1].$.removeClass("smart-hidden"),void e.classList.remove("one-button-shown");a?n[0].$.removeClass("smart-hidden"):n[0].$.addClass("smart-hidden"),r?n[1].$.removeClass("smart-hidden"):n[1].$.addClass("smart-hidden"),e.classList.add("one-button-shown")}else"scroll"!==i.overflow||i.disabled||(n[0].disabled=!a,n[1].disabled=!r)}_validateRadioButtonSelection(e,t,n){const o=this;if(o.checkboxes){let i,a;if(1===t?(i=o,a=o.$.mainContainer):(i=e,a=e.itemContainer),"radioButton"===i.checkMode&&i.checkable)if(1<n.length)for(let e=n.length-2;0<=e;e--)n[e].checked=!1;else if(0===n.length){const e=o._getFirstEnabledChild(a);e&&(e.checked=!0)}}}}),Smart("smart-list-menu",class extends Smart.Menu{static get properties(){return{displayLoadingIndicator:{value:!1,type:"boolean"},dropDownPosition:{value:"auto",allowedValues:["top-left","top-right","bottom-left","bottom-right","auto"],type:"string"},enableMouseWheelAction:{value:!1,type:"boolean"},filterable:{value:!1,type:"boolean"},filterInputPlaceholder:{value:"",type:"string"},filterMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},grouped:{value:!1,type:"boolean"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"}}}static get listeners(){return{resize:"_resizeHandler","backButton.click":"_backButtonClickHandler","filterInput.keyup":"_filterInputKeyupHandler","mainContainer.down":"_mainContainerDownHandler","mainContainer.move":"_mainContainerMoveHandler","mainContainer.swipeleft":"_mainContainerSwipeHandler","mainContainer.swiperight":"_mainContainerSwipeHandler","view.click":"_viewHandler","view.mouseout":"_viewHandler","view.mouseover":"_viewHandler","view.transitionend":"_viewHandler","view.wheel":"_viewWheelHandler"}}template(){return`<div id="container">
                    <div id="hamburgerIcon" class="smart-hamburger-icon smart-hidden">
                        <div id="hamburgerIconLineTop" class="smart-hamburger-icon-line smart-hamburger-icon-line-top"></div>
                        <div id="hamburgerIconLineCenter" class="smart-hamburger-icon-line smart-hamburger-icon-line-center"></div>
                        <div id="hamburgerIconLineBottom" class="smart-hamburger-icon-line smart-hamburger-icon-line-bottom"></div>
                        <div id="customIconContainer" class="smart-hamburger-icon-custom-container smart-hidden"></div>
                    </div>
                    <div id="view" class="smart-list-menu-view">
                        <div id="header" class="smart-header smart-hidden">
                            <smart-button id="backButton" disabled=[[disabled]]>
                                <div class="smart-arrow smart-arrow-left"></div>
                            </smart-button>
                            <div id="title" class="smart-title"></div>
                        </div>
                        <input id="filterInput" class="smart-list-menu-filter-input smart-hidden" disabled="[[disabled]]" placeholder="[[filterInputPlaceholder]]" type="text" />
                        <smart-repeat-button id="scrollButtonNear" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-near smart-hidden">
                            <div id="arrowNear" class="smart-arrow smart-arrow-up"></div>
                        </smart-repeat-button>
                        <div id="mainContainer" class="smart-menu-main-container">
                            <content></content>
                        </div>
                        <smart-repeat-button id="scrollButtonFar" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-far smart-hidden">
                            <div id="arrowFar" class="smart-arrow smart-arrow-down"></div>
                        </smart-repeat-button>
                        <div id="loadingIndicatorContainer" class="smart-loader-container smart-hidden">
                            <span id="loadingIndicator" class="smart-loader"></span>
                            <span id="loadingIndicatorPlaceHolder" class="smart-loader-label smart-hidden">[[loadingIndicatorPlaceholder]]</span>
                        </div>
                    </div>
                </div>`}attached(){const e=this;super.attached(),e.isCompleted&&null!==e.dropDownAppendTo&&e._minimized&&e._dropDownParent.appendChild(e.$.view)}detached(){const e=this;super.detached(),null!==e.dropDownAppendTo&&e._minimized&&e._dropDownParent.removeChild(e.$.view)}addItem(e,t){const n=this;if(!(e instanceof Smart.MenuItem||e instanceof Smart.MenuItemsGroup))return;let o,i,a,r;if(void 0===t)t=n.$.mainContainer,o=void 0,i=1,a=t,r=n._topLevelFilter;else{if("string"==typeof t&&(t=n.getItem(t)),void 0===t||!(t instanceof Smart.MenuItemsGroup&&(n.contains(t)||t.closest(".smart-list-menu-view")===n.$.view)))return;o=t,i=t.level+1,a=t.itemContainer,r=t.filter}if(n._createItemHTMLStructure(e,i,t,n._getCurrentViewItems(o).length,0),e instanceof Smart.MenuItemsGroup&&n._processHTML(e,i+1),n._view===t||t.$.hasClass("smart-hidden")||!(0<t.offsetHeight)||!(0<t.offsetWidth)||(n._view||n.$.mainContainer.contains(t))&&(!n._view||n._view.contains(t))||e.$.addClass("smart-hidden"),n.grouped){const e=Array.from(a.children);for(let t=e.length-1;0<=t;t--)e[t].$.hasClass("smart-list-menu-group-label")&&a.removeChild(e[t]);n._unsortItems(t,!0)}if(a.appendChild(e),n.grouped){const e=n._view;n._applyGrouping(t,!0),n._home(),e&&n.changePage(e.path)}n.filterable&&void 0!==r&&""!==r&&null===n._findItem(e,r)&&(e.$.addClass("smart-hidden"),e.hidden=!0),n._toggleFilterInputGroupLabelVisibility(),n._checkOverflow()}back(){this._backButtonClickHandler()}changePage(e){const t=this,n=t.getItem(e);if(void 0===n||n instanceof Smart.MenuItem||n.hidden)return;const o=[n];let i=n.parentItem,a=0;for(t._discardKeyboardHover();i;)o.unshift(i),i=i.parentItem;if(t._view){const e=o.indexOf(t._view);-1===e?t._home():a=e+1}for(let n=a;n<o.length&&!(o[n].disabled||o[n].hidden);n++)t._menuItemsGroupSelectionHandler(o[n],{type:"expand"},!0)}maximize(){const e=this;e._minimized&&(e._minimized=!1,e._minimizedDropDownOpened&&(e.$hamburgerIcon.removeClass("smart-close-button"),e._minimizedDropDownOpened=!1),null!==e.dropDownAppendTo&&e._appendMinimizedContainerToMenu(e.$.view,null),e.$view.removeClass("smart-visibility-hidden"),e.$view.removeClass("smart-list-menu-view-minimized"),e.$hamburgerIcon.addClass("smart-hidden"),e.removeAttribute("minimized"),e.$.mainContainer.scrollTop=0,e._checkOverflow())}minimize(){const e=this;e._minimized||(e.$view.addClass("smart-visibility-hidden"),e._edge&&e.$view.addClass("not-in-view"),e.$hamburgerIcon.removeClass("smart-hidden"),setTimeout(function(){null!==e.dropDownAppendTo&&e._appendMinimizedContainerToExternalElement(e.$.view),e.$view.addClass("smart-list-menu-view-minimized"),e.$.mainContainer.scrollTop=0,e._checkOverflow()},0),e._minimized=!0,e.setAttribute("minimized",""))}removeItem(e){const t=this;if("string"==typeof e&&(e=t.getItem(e)),void 0!==e&&(e instanceof Smart.MenuItem||e instanceof Smart.MenuItemsGroup)&&(t.contains(e)||e.closest(".smart-list-menu-view")===t.$.view)){const n=e.parentElement;for(;e.contains(t._view);)t._backButtonClickHandler(void 0,!0);const o=t._view;t.grouped&&(t._home(),t._discardGrouping()),n.removeChild(e),t._menuItems={},t._refreshItemPaths(t.$.mainContainer,!0,function(e){return t._getCurrentViewItems(e===t.$.mainContainer?void 0:e)}),t.grouped&&(t._applyGrouping(t.$.mainContainer),o&&t.changePage(o.path)),t._toggleFilterInputGroupLabelVisibility(),t._checkOverflow()}}propertyChangedHandler(e,t,n){if("disabled"===e||"minimizeIconTemplate"===e||"minimizeWidth"===e||"overflow"===e||"unfocusable"===e)return void super.propertyChangedHandler(e,t,n);const o=this;switch(e){case"checkable":case"checkboxes":o._minimized&&null!==o.dropDownAppendTo&&(n?o.$.view.setAttribute(e,""):o.$.view.removeAttribute(e));break;case"checkMode":o._changeToRadioButtonMode(n,o.$.mainContainer),o._minimized&&null!==o.dropDownAppendTo&&o.$.view.setAttribute("check-mode",n);break;case"dataSource":o.$header.addClass("smart-hidden"),o.$mainContainer.removeClass("header-shown"),o._view=void 0,o._menuItems={},o._topLevelFilter="",o._processDataSource(),o._toggleFilterInputGroupLabelVisibility(),o._checkOverflow();break;case"displayLoadingIndicator":if(n){const e=o.$.mainContainer.getElementsByClassName("hovered")[0];e&&e.$.removeClass("hovered"),o.$loadingIndicatorContainer.removeClass("smart-hidden")}else o.$loadingIndicatorContainer.addClass("smart-hidden");break;case"dropDownAppendTo":{const e=o._dropDownParent;if(o._getDropDownParent(),o._dropDownParent===e||!o._minimized)return;o._close(),null===n?o._appendMinimizedContainerToMenu(o.$.view,null):o._appendMinimizedContainerToExternalElement(o.$.view);break}case"dropDownPosition":{o._close(),o._minimized&&null!==o.dropDownAppendTo&&o.$.view.setAttribute("drop-down-position",n);break}case"filterable":if(o._toggleFilterInputGroupLabelVisibility(!0),!1===n){""!==o._topLevelFilter&&o._applyFilter("");for(let e=o._filteredLowerLevelGroups.length-1;0<=e;e--)o._applyFilter("",o._filteredLowerLevelGroups[e])}o._checkOverflow();break;case"filterMode":""!==o._topLevelFilter&&o._applyFilter(o._topLevelFilter);for(let e=o._filteredLowerLevelGroups.length-1;0<=e;e--)o._applyFilter(o._filteredLowerLevelGroups[e].filter,o._filteredLowerLevelGroups[e]);break;case"grouped":o._home(),n?o._applyGrouping(o.$.mainContainer):o._discardGrouping(),o._toggleFilterInputGroupLabelVisibility(!1,!0),o._checkOverflow();break;case"loadingIndicatorPosition":null!==o.dropDownAppendTo&&o._minimized&&o.$.view.setAttribute("loading-indicator-position",n),"center"===n?o.$loadingIndicatorPlaceHolder.addClass("smart-hidden"):o.$loadingIndicatorPlaceHolder.removeClass("smart-hidden");break;case"theme":super.propertyChangedHandler(e,t,n),null!==o.dropDownAppendTo&&o._minimized&&(""!==t&&o.$view.removeClass(t),n&&o.$view.addClass(n));}}_appendGroupLabels(e,t){for(let n=0;n<e.length;n++){const o=document.createElement("div");o.$=Smart.Utilities.Extend(o),o.className="smart-list-menu-group-label",o.innerHTML=e[n],o.groupChildren=t[n],t[n][0].parentElement.insertBefore(o,t[n][0]);for(let e=0;e<t[n].length;e++)t[n][e].groupLabel=o}}_applyFilter(e,t){const n=this,o=n._getCurrentViewItems(t);for(let a=0;a<o.length;a++){const i=n._findItem(o[a],e);i&&i.hidden?(i.hidden=!1,(t===n._view||n._view!==void 0&&t!==void 0&&!t.contains(n._view)||n._view===void 0)&&i.$.removeClass("smart-hidden")):!i&&(o[a].hidden=!0,o[a].$.addClass("smart-hidden"))}if(t){t.filter=e;const o=n._filteredLowerLevelGroups.indexOf(t);""===e?-1!==o&&n._filteredLowerLevelGroups.splice(o,1):-1===o&&n._filteredLowerLevelGroups.push(t)}else n._topLevelFilter=e}_applyGrouping(e,t){const n=this;let o=e===n.$.mainContainer?Array.from(e.children):Array.from(e.container.firstElementChild.children);for(let a=0;a<o.length;a++){const e=o[a];e.originalIndex=a,e instanceof Smart.MenuItemsGroup&&t===void 0&&n._applyGrouping(e)}n._groupItems(e)}_backButtonClickHandler(e,t){const n=this,o=n._view;if(e&&e.stopPropagation(),!o||n.disabled&&e||n.displayLoadingIndicator||n._inTransition)return;let i=n.$.hasClass("animation"),a=!1;i&&t&&(i=!1,a=!0,n.$.removeClass("animation")),n._discardKeyboardHover(),o.firstElementChild.classList.remove("smart-hidden"),i?(n._inTransition=!0,o.container.$.addClass("no-transition"),o.container.$.addClass("smart-hidden"),o.$.addClass("right"),o.$.removeClass("right"),o.container.$.removeClass("no-transition")):(o.$.removeClass("smart-menu-items-group-opened"),o.container.$.addClass("smart-hidden")),n._showHideMenuItemsGroupSiblings(o,"removeClass",i),i?setTimeout(function(){o.container.style.top=o.parentElement.getBoundingClientRect().top-o.getBoundingClientRect().top+"px"},0):a&&n.$.addClass("animation"),1===o.level?(n.$header.addClass("smart-hidden"),n.$mainContainer.removeClass("header-shown"),n._view=void 0):(n.$.title.innerHTML=o.parentItem.titleLabel,n._view=o.parentItem),n._toggleFilterInputGroupLabelVisibility(),n.$.mainContainer.scrollTop=0,i||n._checkOverflow(),e&&n.focus()}_bounceBottom(e){function t(){i.scrollTop-=5,i.scrollTop>e?window.requestAnimationFrame(t):o.$mainContainer.removeClass("bounce-bottom")}function n(){i.scrollTop+=5,i.scrollTop===i.scrollHeight-i.offsetHeight?window.requestAnimationFrame(t):window.requestAnimationFrame(n)}const o=this,i=o.$.mainContainer;o.$mainContainer.addClass("bounce-bottom"),window.requestAnimationFrame(n)}_bounceTop(){function e(){o.scrollTop-=5,0<o.scrollTop?window.requestAnimationFrame(e):window.requestAnimationFrame(t)}function t(){o.scrollTop+=5,50===o.scrollTop?(o.scrollTop=0,n.$mainContainer.removeClass("bounce-top")):window.requestAnimationFrame(t)}const n=this,o=n.$.mainContainer;n.$mainContainer.addClass("bounce-top"),window.requestAnimationFrame(e)}_checkOverflow(){var e=Math.round;const t=this,n=t.overflow;if("hidden"!==n){const o=e(t.$.mainContainer.scrollHeight)>e(t.$.mainContainer.offsetHeight),i=0<e(t.$.mainContainer.scrollTop),a=e(t.$.mainContainer.offsetHeight+t.$.mainContainer.scrollTop)<e(t.$.mainContainer.scrollHeight);o?"auto"===n?(!t.$mainContainer.hasClass("scroll-buttons-shown")&&t.$mainContainer.addClass("scroll-buttons-shown"),i?t.$scrollButtonNear.removeClass("smart-hidden"):t.$scrollButtonNear.addClass("smart-hidden"),a?t.$scrollButtonFar.removeClass("smart-hidden"):t.$scrollButtonFar.addClass("smart-hidden"),!1==(i&&a)?t.$mainContainer.addClass("one-button-shown"):t.$mainContainer.removeClass("one-button-shown"),!t.disabled&&(t.$.scrollButtonNear.disabled=!1,t.$.scrollButtonFar.disabled=!1)):(t.$scrollButtonNear.removeClass("smart-hidden"),t.$scrollButtonFar.removeClass("smart-hidden"),t.disabled?(t.$.scrollButtonNear.disabled=!0,t.$.scrollButtonFar.disabled=!0):(t.$.scrollButtonNear.disabled=!i,t.$.scrollButtonFar.disabled=!a)):!o&&"auto"===n&&t.$mainContainer.hasClass("scroll-buttons-shown")?(t.$mainContainer.removeClass("scroll-buttons-shown"),t.$mainContainer.removeClass("one-button-shown"),t.$scrollButtonNear.addClass("smart-hidden"),t.$scrollButtonFar.addClass("smart-hidden")):!o&&"scroll"===n&&(t.$.scrollButtonNear.disabled=!0,t.$.scrollButtonFar.disabled=!0)}}_close(){const e=this;e._discardKeyboardHover(!0),e._minimized&&e._minimizedDropDownOpened&&(e.$view.addClass("smart-visibility-hidden"),e._edge&&(e.$.view.style.left="",e.$.view.style.top="",e.$view.addClass("not-in-view")),e.$hamburgerIcon.removeClass("smart-close-button"),e._minimizedDropDownOpened=!1)}_createElement(){const e=this;e.mode="vertical",null===e.dataSource&&e.$.mainContainer.firstElementChild instanceof HTMLUListElement&&e._processUList();const t=e.querySelectorAll("smart-menu-item"),n=function(){e._setFocusable(),e.$.backButton.firstElementChild.tabIndex=-1,e._getDropDownParent(),e._menuItems={},e._topLevelFilter="",e._filteredLowerLevelGroups=[],null===e.dataSource?e._processHTML(void 0,1):e._processDataSource(),e._toggleFilterInputGroupLabelVisibility(),"scroll"===e.overflow&&(e.$mainContainer.addClass("scroll-buttons-shown"),e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden"),e._updateScrollButtonVisibility(e.$.mainContainer,!1,[e.$.scrollButtonNear,e.$.scrollButtonFar])),e._applyMinimizeIconTemplate(e.minimizeIconTemplate,null),null!==e.minimizeWidth&&e.offsetWidth<=e.minimizeWidth?e.minimize():e._checkOverflow(),e.displayLoadingIndicator&&e.$loadingIndicatorContainer.removeClass("smart-hidden"),"center"!==e.loadingIndicatorPosition&&e.$loadingIndicatorPlaceHolder.removeClass("smart-hidden")};0===t.length?n():(e._onCompleted&&(e.__onCompleted=e._onCompleted,e._onCompleted=null),e._ensureItemsReady(t,n))}_createMenuItemsGroupContainer(e,t){const n=document.createElement("div"),o=document.createElement("div");return n.className="smart-menu-drop-down smart-hidden",n.$=Smart.Utilities.Extend(n),n.level=t,n.setAttribute("level",t),n.menuItemsGroup=e,o.className="smart-menu-item-container",o.$=Smart.Utilities.Extend(o),o.container=n,o.menuItemsGroup=e,e.checkable&&o.setAttribute("checkable",""),o.setAttribute("check-mode",e.checkMode),n.itemContainer=o,n.appendChild(o),n}_discardGrouping(){const e=this,t=Array.from(e.$.view.getElementsByClassName("smart-list-menu-group-label"));for(let e=0,n;e<t.length;e++)n=t[e],n.parentElement.removeChild(n);e._unsortItems(e.$.mainContainer)}_discardKeyboardHover(){const e=this;e._hoveredViaKeyboard&&(e._hoveredViaKeyboard===e.$.backButton?e.$.backButton.$button.removeClass("hover"):e._hoveredViaKeyboard.$.removeClass("hovered"),e._hoveredViaKeyboard=void 0)}_documentUpHandler(e){const t=this,n=e.originalEvent.target;return t._endSwiping(e,Date.now()),t._swipeDetails?("left"===t._swipeDetails.direction?t._swipeDetails.start>e.pageX&&t._swipeDetails.start-e.pageX>t.offsetWidth/4&&t._selectionHandler({target:t._swipeDetails.target},t._swipeDetails.target,!0):t._swipeDetails.start<e.pageX&&e.pageX-t._swipeDetails.start>t.offsetWidth/4&&t._backButtonClickHandler(),void delete t._swipeDetails):void(n===t.$.filterInput||t.disabled||t.displayLoadingIndicator||!n.closest||(t.contains(n)||n.closest(".smart-list-menu-view")===t.$.view?(t.contains(n)||n.closest(".smart-list-menu-view")===t.$.view)&&t!==document.activeElement&&t.focus():(t._close(),t._scrolling&&delete t._scrolling)))}_endSwiping(e,t,n){var o=Math.abs;const i=this;if(!i._dragStartDetails)return;const a=i.$.mainContainer,r=o(i._dragStartDetails.startTime-t),s=300/r,l=(i._dragStartDetails.startY-e.pageY)*s;let d=o(l);const m=function(){return!(0<l&&a.scrollTop===a.scrollHeight-a.offsetHeight||0>l&&0===a.scrollTop)};let c=.03*o(l)*s;const p=function(){if(5<c){const e=(d-c)/o(l);.1>e?c/=1.25:.15>e?c/=1.2:.2>e?c/=1.15:.25>e?c/=1.1:.3>e&&(c/=1.05)}const e=a.scrollTop;a.scrollTop=0<l?Math.min(e+c,a.scrollHeight-a.offsetHeight):Math.max(e-c,0),d-=c,i._checkOverflow();const t=m();if(0<d&&t)i._scrollingAnimationFrame=window.requestAnimationFrame(p);else if(i._wheelInProgress=!1,!t&&(i._fireScrollBottomReachedEvent(e),!0!==n)){const e=i.$.mainContainer.scrollTop;0===e?i._bounceTop():i._bounceBottom(e)}};i._scrollingAnimationFrame&&cancelAnimationFrame(i._scrollingAnimationFrame),1e3>r&&m()?i._scrollingAnimationFrame=window.requestAnimationFrame(p):i._wheelInProgress=!1,delete i._dragStartDetails}_ensureVisible(e){const t=this,n=t.$.mainContainer;if(n.$.hasClass("scroll-buttons-shown")||"hidden"===t.overflow){const o=n.getBoundingClientRect(),i=e.getBoundingClientRect(),a=[t.$.scrollButtonNear,t.$.scrollButtonFar];(o.top>i.top||o.bottom<i.bottom)&&(n.scrollTop=e.offsetTop,t._updateScrollButtonVisibility(n,!1,a))}}_filterInputKeyupHandler(){const e=this;e._filterTimer&&clearTimeout(e._filterTimer),e._filterTimer=setTimeout(function(){const t=e.context;e.context=e,e._applyFilter(e.$.filterInput.value,e._view),e._checkOverflow(),e.context=t},300)}_findItem(e,t){if(""===t)return e;const n=this;switch(n.filterMode){case"startsWith":if(0===e.label.indexOf(t))return e;break;case"startsWithIgnoreCase":if(0===e.label.toLowerCase().indexOf(t.toLowerCase()))return e;break;case"doesNotContain":if(0>e.label.indexOf(t))return e;break;case"doesNotContainIgnoreCase":if(0>e.label.toLowerCase().indexOf(t.toLowerCase()))return e;break;case"contains":if(-1<e.label.indexOf(t))return e;break;case"containsIgnoreCase":if(-1<e.label.toLowerCase().indexOf(t.toLowerCase()))return e;break;case"equals":if(0===e.label.localeCompare(t))return e;break;case"equalsIgnoreCase":if(0===e.label.toLowerCase().localeCompare(t.toLowerCase()))return e;break;case"endsWith":if(e.label.endsWith(t))return e;break;case"endsWithIgnoreCase":if(e.label.toLowerCase().endsWith(t.toLowerCase()))return e;}return null}_fireScrollBottomReachedEvent(e){const t=this,n=t.$.mainContainer,o=n.scrollTop;e===o||o!==n.scrollHeight-n.offsetHeight||t.$.fireEvent("scrollBottomReached")}_getCurrentViewItems(e){const t=this;if(!t.grouped)return void 0===e?t.$.mainContainer.children:e.container.firstElementChild.children;if(void 0===e)return t.$.view.querySelectorAll(".smart-menu-main-container > smart-menu-item, .smart-menu-main-container > smart-menu-items-group");else{const t=e.container.firstElementChild.children,n=[];for(let e=0,o;e<t.length;e++)o=t[e],(o instanceof Smart.MenuItem||o instanceof Smart.MenuItemsGroup)&&n.push(o);return n}}_groupItems(e){const t=this;if(!t.grouped)return;const n=[],o=[];let a,r;e instanceof Smart.MenuItemsGroup?(a=e.container.firstElementChild,r=Array.from(a.children)):e===t.$.mainContainer&&(a=e,r=Array.from(e.children)),r.sort(function(e,t){return e.label.localeCompare(t.label)});for(let t=r.length-1;0<=t;t--)a.insertBefore(r[t],a.firstElementChild);for(let t=0;t<r.length;t++){const e=r[t],i=e.label.charAt(0),a=n.indexOf(i.toUpperCase());-1===a?(n.push(i.toUpperCase()),o.push([e])):o[a].push(e)}t._appendGroupLabels(n,o)}_home(){for(const e=this;e._view;)e._backButtonClickHandler(void 0,!0)}_keydownHandler(e){const t=this,n=e.key;if(!(document.activeElement!==t||-1===["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Escape","Home"," "].indexOf(n)||t.disabled||t.displayLoadingIndicator)){e.preventDefault();const o=t._view,i=o?o.itemContainer:t.$.mainContainer,a=t.$.backButton.$button.hasClass("hover")?t.$.backButton:i.getElementsByClassName("hovered")[0];switch(n){case"ArrowDown":t._navigate("_getNextEnabledChild",a,i);break;case"ArrowLeft":t._backButtonClickHandler();break;case"ArrowRight":a&&a instanceof Smart.MenuItemsGroup&&t._menuItemsGroupSelectionHandler(a,{type:"keydown"});break;case"ArrowUp":t._navigate("_getPreviousEnabledChild",a,i);break;case"End":case"Home":{if(o&&"Home"===n)return t.$.mainContainer.scrollTop=0,t._checkOverflow(),t.$.backButton.$button.addClass("hover"),t._hoveredViaKeyboard=t.$.backButton,void(a&&a.$.removeClass("hovered"));const e="End"===n?t._getLastEnabledChild(i):t._getFirstEnabledChild(i);if(!e||a===e)return;a&&(a===t.$.backButton?t.$.backButton.$button.removeClass("hover"):a.$.removeClass("hovered")),t._hoverViaKeyboard(e);break}case"Enter":t._minimized&&!t._minimizedDropDownOpened?t._hamburgerIconClickHandler(void 0,t.$.view):a&&(a===t.$.backButton?t._backButtonClickHandler():t._selectionHandler({target:a}));break;case"Escape":t._minimized&&t._minimizedDropDownOpened&&!t._view?t._close():t._backButtonClickHandler();break;case" ":a&&(a===t.$.backButton?t._backButtonClickHandler():t._toggleItem(a));}}}_mainContainerDownHandler(e){const t=this;!Smart.Utilities.Core.isMobile||t.disabled||t.displayLoadingIndicator||(t._dragStartDetails={startY:e.pageY,x:e.pageX,y:e.pageY,startTime:Date.now(),target:e.originalEvent.target})}_mainContainerHandler(){}_mainContainerMoveHandler(e){const t=this;if(t._dragStartDetails){const n=e.pageY,o=t._dragStartDetails.y-n,i=t.$.mainContainer.scrollTop;t.$.mainContainer.scrollTop+=o,i!==t.$.mainContainer.scrollTop&&(t._checkOverflow(),t._fireScrollBottomReachedEvent(i)),t._dragStartDetails={startY:t._dragStartDetails.startY,x:e.pageX,y:n,startTime:t._dragStartDetails.startTime,target:e.originalEvent.target},t._scrolling=!0}}_mainContainerSwipeHandler(e){const t=this;if(!(!Smart.Utilities.Core.isMobile||t.disabled||t.displayLoadingIndicator)){const n=e.originalEvent.target,o=n.closest("smart-menu-item"),i=n.closest("smart-menu-items-group");if("swiperight"===e.type){const n=o||i;n&&(delete t._dragStartDetails,delete t._scrolling,t._swipeDetails={direction:"right",start:e.pageX,target:n})}else i&&null===o&&(delete t._dragStartDetails,delete t._scrolling,t._swipeDetails={direction:"left",start:e.pageX,target:i})}}_menuItemsGroupSelectionHandler(e,t,n){const o=this,i=e.container,a=i.level;if(o._discardKeyboardHover(),document.activeElement===o||null===o.dropDownAppendTo||"click"!==t.type||o.contains(t.target)||o.focus(),"click"===t.type&&!t.target.classList.contains("smart-menu-items-group-arrow")&&o._toggleItem(e))return void o._ripple(e,t);if(o._inTransition)return;let r=o.$.hasClass("animation"),s=!1;r&&n&&(r=!1,s=!0,o.$.removeClass("animation")),2===a&&(o.$header.removeClass("smart-hidden"),o.$mainContainer.addClass("header-shown")),o.$.title.innerHTML=e.titleLabel,o._view=e,o._toggleFilterInputGroupLabelVisibility(),e.$.removeClass("hovered"),e.$.addClass("smart-menu-items-group-opened"),o._showHideMenuItemsGroupSiblings(e,"addClass",r),r?(o._inTransition=!0,e.firstElementChild.classList.add("animate"),setTimeout(function(){i.style.top=e.parentElement.getBoundingClientRect().top-e.getBoundingClientRect().top+"px"},0)):e.firstElementChild.classList.add("smart-hidden"),i.$.removeClass("smart-hidden"),s&&o.$.addClass("animation"),o.$.mainContainer.scrollTop=0,r||o._checkOverflow(),o.$.fireEvent("expand",{item:e,label:e.label,path:e.path,value:e.value})}_mouseoutMouseoverHandler(e){const t=this;if(!(t.disabled||t.displayLoadingIndicator)){const n=e.target.closest("smart-menu-item")||e.target.closest("smart-menu-items-group");null===n||t._view&&n.level<=t._view.level||n.disabled||n.templateApplied||(t._discardKeyboardHover(),"mouseover"===e.type?(n.$.addClass("hovered"),t._discardKeyboardHover(!0)):n.$.removeClass("hovered"))}}_navigate(e,t,n){const o=this;if(!t)return void("_getNextEnabledChild"===e?o._view?(o.$.backButton.$button.addClass("hover"),o._hoveredViaKeyboard=o.$.backButton):o._hoverViaKeyboard(o._getFirstEnabledChild(n)):o._hoverViaKeyboard(o._getLastEnabledChild(n)));let i;if("_getNextEnabledChild"!==e||t!==o.$.backButton){if("_getPreviousEnabledChild"===e&&o._view&&t===o._getFirstEnabledChild(n))return o.$.backButton.$button.addClass("hover"),o._hoveredViaKeyboard=o.$.backButton,void t.$.removeClass("hovered");i=o[e](t)}else if(i=o._getFirstEnabledChild(n),i)o.$.backButton.$button.removeClass("hover");else return;i&&(t.$.removeClass("hovered"),o._hoverViaKeyboard(i))}_processHTML(e,t){const n=this;let o,a;e===void 0&&(e=n.$.mainContainer),1<t&&(o=n._createMenuItemsGroupContainer(e,t),a=o.itemContainer);const r=Array.from(e.children),s=[];let l=0;for(let o=0;o<r.length;o++){if(1<t&&0==o){l++;continue}const i=r[o];if(!(i instanceof Smart.MenuItem||i instanceof Smart.MenuItemsGroup)){i.parentElement.removeChild(i),l++;continue}n._createItemHTMLStructure(i,t,e,o-l),i.checked&&(i.disabled||i.templateApplied?i.checked=!1:s.push(i)),1<t&&a.appendChild(i),i instanceof Smart.MenuItemsGroup&&n._processHTML(i,t+1)}if(1<t){if(e.container=o,e.itemContainer=a,e instanceof Smart.MenuItemsGroup){const t=document.createElement("div");t.className="smart-menu-items-group-arrow",t.innerHTML="&#xe802",e.children[0].appendChild(t)}e.appendChild(o)}n._validateRadioButtonSelection(e,t,s),n._groupItems(e)}_resizeHandler(){const e=this,t=e.minimizeWidth;if(null!==t){if(!e._minimized&&e.offsetWidth<=t)return void e.minimize();if(e._minimized&&e.offsetWidth>t)return void e.maximize()}e._checkOverflow()}_scroll(e){const t=this,n=t.$.mainContainer,o=e.classList.contains("smart-scroll-button-near")?-1:1,i=n.scrollTop;n.scrollTop+=10*o,i!==n.scrollTop&&(t._updateScrollButtonVisibility(n,!1,[t.$.scrollButtonNear,t.$.scrollButtonFar]),t._fireScrollBottomReachedEvent(i))}_selectionHandler(e,t,n){function o(){document.activeElement===i||null===i.dropDownAppendTo||"click"!==e.type||i.contains(a)||i.focus()}const i=this,a=e.target;if(!(i.disabled||i.displayLoadingIndicator)){if(i._scrolling||i._swipeDetails&&!n)return delete i._dragStartDetails,delete i._scrolling,void delete i._swipeDetails;if(void 0===t){if("click"===e.type){const t=a.closest("smart-repeat-button");if(t)return void i._scroll(t,e)}const n=a.closest("smart-menu-item");if(n)return n.disabled||n.templateApplied?void o():(i._toggleItem(n)||i.$.fireEvent("itemClick",{item:n,label:n.label,value:n.value}),i._ensureVisible(n),i._ripple(n,e),void o());if(t=a.closest("smart-menu-items-group"),t&&(a===t.container||a===t.container.firstElementChild))return}t&&!t.disabled&&i._menuItemsGroupSelectionHandler(t,e)}}_showHideMenuItemsGroupSiblings(e,t,n){const o=e.parentElement,a=o.children;for(let o=0;o<a.length;o++){const i=a[o];i!==e&&(i.hidden||(n?"addClass"===t?i.$.addClass("animate"):(i.$.removeClass("smart-hidden"),i.$.addClass("right"),setTimeout(function(){i.$.removeClass("right")},0)):i.$[t]("smart-hidden")))}}_toggleFilterInputGroupLabelVisibility(e,t){const n=this,o=n._getCurrentViewItems(n._view).length;if(!0!==t){const e=!n.$filterInput.hasClass("smart-hidden");n.filterable&&1<o?(!e&&(n.$mainContainer.addClass("filter-input-shown"),n.$filterInput.removeClass("smart-hidden")),n.$.filterInput.value=n._view?n._view.filter||"":n._topLevelFilter):e&&(n.$mainContainer.removeClass("filter-input-shown"),n.$filterInput.addClass("smart-hidden"))}if(!e&&n.grouped&&0<o){const e=n._view?n._view.container.firstElementChild.firstElementChild.$:n.$.mainContainer.firstElementChild.$;1===o?e.addClass("smart-hidden"):e.removeClass("smart-hidden")}}_unsortItems(e,t){const n=this;let o=[],a,r;e===n.$.mainContainer?(r=e,a=e.children):(r=e.container.firstElementChild,a=r.children);for(let r=0;r<a.length;r++){const e=a[r];o[e.originalIndex]=e,e instanceof Smart.MenuItemsGroup&&t===void 0&&n._unsortItems(e)}if(!(2>o.length))for(let e=0;e<o.length;e++)r.appendChild(o[e])}_viewHandler(e){const t=this;if("transitionend"===e.type){const n=e.target;return n===t.$.view||t.$.backButton.contains(n)?void 0:(n.classList.contains("animate")&&(n.classList.remove("animate"),n.classList.add("smart-hidden")),n.classList.contains("smart-menu-drop-down")&&(n.style.top=""),n.classList.contains("smart-menu-items-group-opened")&&n.classList.remove("smart-menu-items-group-opened"),t._checkOverflow(),void(t._inTransition=!1))}if(t._minimized&&null!==t.dropDownAppendTo)switch(e.type){case"click":t._selectionHandler(e);break;case"mouseout":t._mouseoutMouseoverHandler(e);break;case"mouseover":t._mouseoutMouseoverHandler(e);}}_viewWheelHandler(e){const t=this;if(!t.enableMouseWheelAction||t._wheelInProgress||t.disabled||t.displayLoadingIndicator||t.$.mainContainer.offsetHeight===t.$.mainContainer.scrollHeight)return void(t._wheelInProgress&&e.preventDefault());e.preventDefault(),t._dragStartDetails={startY:e.pageY,x:e.pageX,y:e.pageY,startTime:Date.now(),target:e.target},t._wheelInProgress=!0;const n={pageY:e.pageY+35*(0<e.deltaY?-1:1)};t._endSwiping(n,t._dragStartDetails.startTime+100,!0)}}),Smart("smart-pager",class extends Smart.BaseElement{static get properties(){return{currentItem:{value:0,type:"number"},currentPage:{value:0,type:"number"},disabledItems:{value:[],type:"array"},ellipsis:{value:!1,type:"boolean"},firstLastButtons:{value:!1,type:"boolean"},goToPage:{value:!1,type:"boolean"},hideItems:{value:!1,type:"boolean"},items:{value:0,type:"number"},itemsPerPage:{value:3,type:"number"},itemTemplate:{value:null,type:"string?"},labelMap:{value:null,type:"object?",reflectToAttribute:!1},localization:{value:null,type:"object?",reflectToAttribute:!1},pagesCount:{value:0,type:"number"},prevNextButtons:{value:!1,type:"boolean"},prevNextPageButtons:{value:!1,type:"boolean"},showRange:{value:!1,type:"boolean"},showRowsCount:{value:!1,type:"boolean"},rowsCountOptions:{value:[],type:"array"}}}static get listeners(){return{click:"_navigationButtonsClickHandler",down:"_navigationButtonsDownHandler","goToInput.change":"_goToButtonClickHandler","itemsContainer.click":"_itemsContainerClickHandler","itemsPerPageDropDown.change":"_itemsPerPageDropDownChangeHandler",keydown:"_keyDownHandler"}}static get requires(){return{"Smart.Button":"smart.button.js","Smart.DropDownList":"smart.dropdownlist.js"}}template(){return`<div id="container">
                    <smart-button id="firstButton" class ="smart-first-button"></smart-button>
                    <smart-repeat-button id="previousPageButton" class ="smart-previous-page-button"></smart-repeat-button>
                    <smart-repeat-button id="previousButton" class ="smart-previous-button"></smart-repeat-button>
                    <smart-button id="previousEllipsisButton" class ="smart-previous-ellipsis-button"></smart-button>
                    <div id="itemsContainer" tabindex="0" class ="smart-items-container"></div>
                    <smart-button id="nextEllipsisButton" class ="smart-next-ellipsis-button"></smart-button>
                    <smart-repeat-button id="nextButton" class ="smart-next-button"></smart-repeat-button>
                    <smart-repeat-button id="nextPageButton" class ="smart-next-page-button"></smart-repeat-button>
                    <smart-button id="lastButton" class="smart-last-button"></smart-button>
                    <div id="goToBlock" class ="smart-go-to-block">
                        <input type="text" id="goToInput" class ="smart-go-to-input" />
                        <smart-button id="goToButton" class ="smart-go-to-button"></smart-button>
                    </div>
                    <div id="itemsPerPageBlock" class ="smart-items-per-page-block">
                        <smart-drop-down-list id="itemsPerPageDropDown" class ="smart-items-per-page-drop-down"
                            data-source="[[rowsCountOptions]]"
                            drop-down-height="auto"
                            selection-mode="one"
                            theme="[[theme]]"
                            disabled="[[disabled]]">
                        </smart-drop-down-list>
                    </div>
                    <span id="range" class ="smart-range"></span>
                </div>`}ready(){super.ready();const e=this;e.navigationButtons=["firstButton","lastButton","previousButton","nextButton","previousPageButton","nextPageButton"],e.customButtons=["previousEllipsisButton","nextEllipsisButton","goToButton","goToInput"],e._handleLocalization(),e._createPageItems(),e._selectItem(e.currentItem),e._calculatePagesCount(),e._updateButtonsNames(),e._handleEllipsis(),e._updateRange(),e._handleMaterialDropDown(),e.disabled&&(e._enableDisableElements(e.navigationButtons,!0),e._enableDisableElements(e.customButtons,!0))}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const o=this;"disabled"===e?(n?o._enableDisableElements(o.navigationButtons,!0):o._handleButtons(),o._enableDisableElements(o.customButtons,n)):"currentItem"===e?(n>o.items-1?(n=o.items-1,o.currentItem=n):0>n&&(n=0,o.currentItem=n),o.currentPage=Math.floor(n/o.itemsPerPage),o._refreshPageItems(),o._updateRange(),o._handleButtonsEllipsis()):"currentPage"===e?(n>o.pagesCount-1?o.currentPage=n=o.pagesCount-1:0>n&&(o.currentPage=n=0),o._changePage(n),o._isItemInPage(o.currentItem,n,o.itemsPerPage)||(o.currentItem=n*o.itemsPerPage,o._refreshPageItems()),o._updateRange(),o._handleButtonsEllipsis()):"items"===e||"itemsPerPage"===e?(o._calculatePagesCount(),"itemsPerPage"!==e||o._isItemInPage(o.currentItem,o.currentPage,n)?"items"===e&&o.currentItem>=n&&(o.currentItem=n-1,o.currentPage=o._currentItemsPage()):o.currentPage=o._currentItemsPage(),o._updateRange(),o._refreshPageItems(),o._handleButtonsEllipsis()):"pagesCount"===e?o.pagesCount=t:"showRowsCount"===e?n&&o.$.fireEvent("rowsCountChanged",{rows:o.$.itemsPerPageDropDown.value}):"showRange"===e?n&&o._updateRange():"rowsCountOptions"===e?o.$.itemsPerPageDropDown.dataSource=n:"localization"===e?(o._handleLocalization(),o._updateButtonsNames(),o._updateRange()):"disabledItems"===e?(o._calculatePagesCount(),o._updateRange(),o._refreshPageItems()):"ellipsis"===e?o._handleEllipsis():"labelMap"===e||"itemTemplate"===e?o._createPageItems(o.currentPage*o.itemsPerPage,(o.currentPage+1)*o.itemsPerPage):"theme"===e?o.$.itemsPerPageDropDown.dropDownPosition=-1===n.indexOf("material")?"auto":"overlay-center":void 0}nextItem(){const e=this;e.currentItem>=e.items-1||e.disabled||e._navigateItems("next")}nextPage(){const e=this;e.currentPage*e.itemsPerPage>=e.items||e.disabled||e._changePage(e.currentPage+1)}prevItem(){const e=this;0>=e.currentItem||e.disabled||e._navigateItems("prev")}prevPage(){const e=this;0>=e.currentPage||e.disabled||e._changePage(e.currentPage-1)}_applyTemplate(e,t){const n=this;if(null===n.itemTemplate||!n._bindingDetails||0===n._bindingDetails.length)return;const o=n._bindingDetails.length;let a=document.importNode(n._template.content,!0),r,s;for(let l=0;l<o;l++){r=a.childNodes[n._bindingDetails[l].childNodeIndex],s=n._bindingDetails[l].bindingString.length;for(let e=0;e<s;e++)r.innerHTML=r.innerHTML.replace(n._bindingDetails[l].bindingString[e],t)}e.innerHTML="";for(let n=0;n<a.childNodes.length;n++)a.childNodes[n].outerHTML&&(e.innerHTML+=a.childNodes[n].outerHTML)}_calculatePagesCount(){const e=this;e.pagesCount=0<e.items%e.itemsPerPage?Math.floor(e.items/e.itemsPerPage)+1:e.items/e.itemsPerPage}_changePage(e,t){const n=this;return isNaN(e)||0>e?e=0:e>n.pagesCount-1&&(e=n.pagesCount-1),e===n.currentPage?void(n.$.goToInput.value=""):void(t=t||e*n.itemsPerPage,n.currentPage=e,n._createPageItems(n.currentPage*n.itemsPerPage,(n.currentPage+1)*n.itemsPerPage),n._selectItem(t))}_createPageItems(e,t){const n=this;n._currentHtmlItems=[],n.$.itemsContainer.innerHTML="",e=e||0,t=t||e+n.itemsPerPage,t=t<n.items?t:n.items;for(let o=e;o<t;o++){let e=document.createElement("span"),t=n.labelMap?n.labelMap[o]||o+1:o+1;e.className=-1<n.disabledItems.indexOf(o)?"smart-pager-item smart-disabled":"smart-pager-item",n._handleItemTemplate()?n._applyTemplate(e,t):e.innerHTML=t,n.$.itemsContainer.appendChild(e),n._currentHtmlItems.push(e)}n._updateRange(e+1,t)}_currentItemsPage(){const e=this;return parseInt(e.currentItem/e.itemsPerPage)}_enableDisableElements(e,t){const n=this;for(let o=0;o<e.length;o++)n.$[e[o]].disabled=t}_firstButtonClickHandler(){const e=this;e.disabled||(e._unSelectItem(e.currentItem),e._createPageItems(),e._selectItem(0),e.currentPage=0,e._handleButtonsEllipsis())}_goToButtonClickHandler(){const e=this,t=e.$.goToInput.value;e.disabled||""===t||(e._changePage(parseInt(t)),e.$.goToInput.value="")}_handleButtons(){const e=this;e.disabled||(e.$.previousPageButton.disabled=!(0!==e.currentPage),e.$.nextPageButton.disabled=!(e.currentPage!==e.pagesCount-1),0===e.currentItem?(e.$.previousButton.disabled=!0,e.$.firstButton.disabled=!0):(e.$.previousButton.disabled=!1,e.$.firstButton.disabled=!1),e.currentItem===e.items-1?(e.$.nextButton.disabled=!0,e.$.lastButton.disabled=!0):(e.$.nextButton.disabled=!1,e.$.lastButton.disabled=!1))}_handleButtonsEllipsis(){const e=this;e._handleEllipsis(),e._handleButtons()}_handleEllipsis(){const e=this;e.ellipsis&&(0===e.currentPage?e.$previousEllipsisButton.addClass("smart-hidden"):e.$previousEllipsisButton.hasClass("smart-hidden")&&e.$previousEllipsisButton.removeClass("smart-hidden"),e.currentPage===e.pagesCount-1?e.$nextEllipsisButton.addClass("smart-hidden"):e.$nextEllipsisButton.hasClass("smart-hidden")&&e.$nextEllipsisButton.removeClass("smart-hidden"))}_handleLocalization(){const e=this;e._localization=e.localization?{firstButton:e.localization.firstButton||"First",lastButton:e.localization.lastButton||"Last",previousButton:e.localization.previousButton||"Previous",nextButton:e.localization.nextButton||"Next",previousPageButton:e.localization.previousPageButton||"Page -",nextPageButton:e.localization.nextPageButton||"Page +",goToButton:e.localization.goToButton||"Go to",goToInputPlaceholder:e.localization.goToInputPlaceholder||"",ellipsis:e.localization.ellipsis||"...",rangeString:e.localization.rangeString||"of",rangePrefix:e.localization.rangePrefix||"of",rangeSuffix:e.localization.rangeSuffix||""}:{firstButton:"First",lastButton:"Last",previousButton:"Previous",nextButton:"Next",previousPageButton:"Page -",nextPageButton:"Page +",goToButton:"Go to",goToInputPlaceholder:"",ellipsis:"...",rangeString:"of",rangePrefix:"of",rangeSuffix:""}}_handleItemTemplate(){const e=this;let t=e.itemTemplate;if(null===t||!t)return;if(!("content"in document.createElement("template")))return e.error(e.localize("htmlTemplateNotSuported",{elementType:e.nodeName.toLowerCase()})),void(e.itemTemplate=null);if(t=document.getElementById(t),null===t||!("content"in t))return e.error(e.localize("invalidTemplate",{elementType:e.nodeName.toLowerCase(),property:"itemTemplate"})),void(e.itemTemplate=null);const n=t.content,o=n.childNodes.length,a=/{{\w+}}/g;let r,s;e._bindingDetails=[],e._template=t;for(let t=0;t<o;t++){for(s=[];r=a.exec(n.childNodes[t].innerHTML);)s.push(r[0]);0<s.length&&e._bindingDetails.push({childNodeIndex:t,bindingString:s})}return!0}_handleMaterialDropDown(){const e=this;e.classList.contains("animation")&&e.$.itemsPerPageDropDown.classList.add("animation"),-1!==e.theme.indexOf("material")&&(e.$.itemsPerPageDropDown.dropDownPosition="overlay-center")}_isItemInPage(e,t,n){return!!(e>=t*n&&e<(t+1)*n)}_itemsContainerClickHandler(e){const t=this,n=t.currentItem,o=e.target.closest(".smart-pager-item");if(o&&!o.classList.contains("smart-selected")){for(let e=0;e<t._currentHtmlItems.length;e++)t._currentHtmlItems[e]===o?t._selectItem(t.itemsPerPage*t.currentPage+e):t._unSelectItem(n);t._handleButtons()}}_itemsPerPageDropDownChangeHandler(e){const t=this;!t.showRowsCount||t.disabled||t.$.fireEvent("rowsCountChanged",{value:parseInt(e.detail.value)})}_keyDownHandler(e){const t=this;if(!t.disabled)switch(e.preventDefault(),e.key){case"End":t._lastButtonClickHandler();break;case"Home":t._firstButtonClickHandler();break;case"PageUp":t.nextPage();break;case"PageDown":t.prevPage();break;case"ArrowUp":case"ArrowRight":t.nextItem();break;case"ArrowDown":case"ArrowLeft":t.prevItem();}}_lastButtonClickHandler(){const e=this;e.disabled||(e._unSelectItem(e.currentItem),e.currentPage=e.pagesCount-1,e._createPageItems(e.currentPage*e.itemsPerPage,(e.currentPage+1)*e.itemsPerPage),e.currentItem=e.items-1,e._selectItem(e.currentItem),e._handleEllipsis())}_navigateItems(e){const t=this;return"prev"===e?(t.currentPage*t.itemsPerPage===t.currentItem?(t.currentPage--,t._createPageItems(t.currentPage*t.itemsPerPage,(t.currentPage+1)*t.itemsPerPage)):t._unSelectItem(t.currentItem),t.currentItem--,t._selectItem(t.currentItem),void t._handleEllipsis()):void((t.currentPage+1)*t.itemsPerPage-1===t.currentItem?(t.currentPage++,t._createPageItems(t.currentPage*t.itemsPerPage,(t.currentPage+1)*t.itemsPerPage)):t._unSelectItem(t.currentItem),t.currentItem++,t._selectItem(t.currentItem),t._handleEllipsis())}_nextButtonClickHandler(){const e=this;e.currentItem>=e.items-1||e.disabled||e._navigateItems("next")}_nextPageButtonClickHandler(){const e=this;e.nextPage(),e._handleEllipsis()}_previousButtonClickHandler(){const e=this;1>e.currentItem||e.disabled||e._navigateItems("prev")}_previousPageButtonClickHandler(){const e=this;e.prevPage(),e._handleEllipsis()}_refreshPageItems(){const e=this;e._createPageItems(e.currentPage*e.itemsPerPage,(e.currentPage+1)*e.itemsPerPage),e._selectItem(e.currentItem,!0),e._handleButtons()}_selectItem(e,t){const n=this,o=n.currentItem;if(!(n.disabled&&!t||0>=n._currentHtmlItems.length||0===n.items||-1<n.disabledItems.indexOf(e))){const t=e%n.itemsPerPage||0,i=n._currentHtmlItems[t];i.classList.contains("smart-selected")||(i.classList.add("smart-selected"),n.currentItem=e,n._handleButtons(),n.$.fireEvent("change",{oldIndex:o,index:e}))}}_unSelectItem(e){const t=this;if(!t.disabled){const n=e%t.itemsPerPage||0,o=t._currentHtmlItems[n];o.classList.contains("smart-selected")&&o.classList.remove("smart-selected")}}_updateButtonsNames(){const e=this,t=["firstButton","lastButton","previousButton","nextButton","previousPageButton","nextPageButton","goToButton"];for(let n=0;n<t.length;n++)e.$[t[n]].content=e._localization[t[n]];e.$.previousEllipsisButton.content=e._localization.ellipsis,e.$.nextEllipsisButton.content=e._localization.ellipsis,e.$.goToInput.placeholder=e._localization.goToInputPlaceholder}_updateRange(e,t){const n=this;e=e||1,t=t||n.itemsPerPage,n.$.range.innerHTML="<span class=\"smart-range-start\">"+e+"</span> <span class=\"smart-range-hyphen\">-</span> <span class=\"smart-range-end\">"+t+"</span><span class=\"smart-range-prefix\">"+n._localization.rangePrefix+"</span> <span class=\"smart-range-items\">"+n.items+"</span> <span class=\"smart-range-suffix\">"+n._localization.rangeSuffix+"</span>"}_navigationButtonsClickHandler(e){const t=this,n=e.target.closest("smart-button")||e.target.closest("smart-repeat-button");n===t.$.firstButton?t._firstButtonClickHandler(e):n===t.$.lastButton?t._lastButtonClickHandler(e):n===t.$.previousButton?t._previousButtonClickHandler(e):n===t.$.nextButton?t._nextButtonClickHandler(e):n===t.$.previousPageButton||n===t.$.previousEllipsisButton?t._previousPageButtonClickHandler(e):n===t.$.nextPageButton||n===t.$.nextEllipsisButton?t._nextPageButtonClickHandler(e):n===t.$.goToButton?t._goToButtonClickHandler(e):void 0}_navigationButtonsDownHandler(e){const t=this,n=e.target.closest("smart-button")||e.target.closest("smart-repeat-button")||e.originalEvent.target.closest(".smart-pager-item");t.disabled||n&&-1!==t.theme.indexOf("material")&&Smart.Utilities.Animation.Ripple.animate(n,e.pageX,e.pageY)}}),Smart("smart-tab-item",class extends Smart.ContentElement{static get properties(){return{closeButtonHidden:{value:!1,type:"boolean"},index:{value:null,type:"number?"},selected:{value:!1,type:"boolean"},label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const o=this;if(o._preventPropertyChangedHandler)return void delete o._preventPropertyChangedHandler;switch(e){case"closeButtonHidden":o.$.fireEvent("closeButtonVisibilityChange",{hidden:n});break;case"index":o.$.fireEvent("indexChange",{newIndex:n,oldIndex:t,tabItem:o});break;case"label":break;case"labelSize":o.$.fireEvent("labelSizeChange",{size:n});}}_setIndex(e){const t=this,n=t.context;t.context=t,t.index=e,t.context=n}}),Smart("smart-tab-items-group",class extends Smart.ContentElement{static get properties(){return{label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}template(){return""}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const o=this;if(o._preventPropertyChangedHandler)return void delete o._preventPropertyChangedHandler;switch(e){case"label":break;case"labelSize":this.$.fireEvent("labelSizeChange",{size:n});}}}),Smart("smart-tabs",class extends Smart.BaseElement{static get properties(){return{addNewTab:{value:!1,type:"boolean"},closeButtonMode:{value:"default",allowedValues:["default","selected"],type:"string"},closeButtons:{value:!1,type:"boolean"},collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},enableMouseWheelAction:{value:!1,type:"boolean"},messages:{value:{en:{ambiguousIndexes:"smart-tabs: Initially set smart-tab-item indexes are ambiguous and are ignored in favour of the HTML structure.",detailsObjectRequired:"smart-tabs: The method \"insert\" requires a details Object to be passed as a second argument.",invalidIndex:"smart-tabs: \"{{method}}\" method accepts an index of type number.",referenceNodeNotChild:"smart-tabs: Passed {{argument}} is not part of this smart-tabs element.",tabItemRequired:"smart-tabs: The method \"{{method}}\" requires a \"smart-tab-item\" element to be passed as an argument."}},type:"object",extend:!0},name:{value:"",type:"string"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},reorder:{value:!1,type:"boolean"},resize:{value:!1,type:"boolean"},scrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},selectedIndex:{value:null,type:"number?"},selectionMode:{value:"click",allowedValues:["click","dblclick","mouseenter","none"],type:"string"},tabLayout:{value:"scroll",allowedValues:["scroll","dropdown","wrap","shrink"],type:"string",defaultReflectToAttribute:!0},tabPosition:{value:"top",allowedValues:["top","bottom","left","right","hidden"],type:"string"},tabTextOrientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"}}}static get listeners(){return{closeButtonVisibilityChange:"_closeButtonVisibilityChangeHandler",indexChange:"_indexChangeHandler",keydown:"_keydownHandler",labelSizeChange:"_labelSizeChangeHandler",resize:"_applyTabOverflow",styleChanged:"_applyTabOverflow","container.dblclick":"_containerHandler","container.down":"_containerHandler","container.mouseout":"_containerHandler","container.mouseover":"_containerHandler","container.up":"_containerHandler","scrollButtonFar.click":"_scrollButtonFarClickHandler","scrollButtonNear.click":"_scrollButtonNearClickHandler","tabContentSection.transitionend":"_tabContentSectionTransitionendHandler","tabsHeaderItems.wheel":"_tabsHeaderItemsWheelHandler","tabStrip.mouseleave":"_tabStripMouseleaveHandler","tabStrip.move":"_tabStripMoveHandler","document.move":"_documentMoveHandler","document.selectstart":"_selectStartHandler","document.up":"_documentUpHandler"}}template(){return`<div id="container">
                    <div id="tabsHeaderSection" class="smart-tabs-header-section">
                        <div id="tabsHeaderItems" class="smart-tabs-header-items">
                            <smart-repeat-button id="scrollButtonNear" class="smart-tabs-scroll-button smart-spin-button smart-hidden">
                                <div id="arrowNear" class="smart-arrow"></div>
                            </smart-repeat-button>
                            <div id="tabStrip" class="smart-tab-strip"></div>
                            <smart-repeat-button id="scrollButtonFar" class="smart-tabs-scroll-button smart-spin-button smart-hidden">
                                <div id="arrowFar" class="smart-arrow"></div>
                            </smart-repeat-button>
                            <div id="dropDownButton" class="smart-tabs-drop-down-button">
                                <div id="dropDownButtonArrow" class="smart-tabs-drop-down-button-arrow smart-unselectable"></div>
                                <div id="dropDownButtonDropDown" class="smart-tabs-drop-down-button-drop-down smart-hidden"></div>
                            </div>
                            <div id="resizeToken" class="smart-tabs-resize-token smart-hidden"></div>
                        </div>
                        <div id="tabHeaderControls" class="smart-tabs-header-controls"></div>
                    </div>
                    <div id="tabContentSection" class="smart-tabs-content-section"><content></content></div>
                    <input id="hiddenInput" type="hidden" name="[[name]]">
                </div>`}ready(){super.ready();const e=this;e._firefox=-1!==navigator.userAgent.indexOf("Firefox"),e._arrowCodes={top:"&#xe804",bottom:"&#xe801",left:"&#xe802",right:"&#xe803"},e._createElement()}appendChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"appendChild"})),t.insert(t._tabs.length,{node:e})}collapse(){const e=this;!e.collapsible||e.collapsed||(e.collapsed=!0)}ensureVisible(e){const t=this;if(null!==e&&"wrap"!==t.tabLayout&&"shrink"!==t.tabLayout&&"hidden"!==t.tabPosition){t._validateIndex(e,"ensureVisible"),e=Math.max(0,Math.min(e,t._tabs.length-1));const n=t._tabs[e].group,o=t.$.tabStrip,i=o.getBoundingClientRect(),a=null===n?t._tabLabelContainers[e]:t._groupLabels[t._groups.indexOf(n)],r=a.getBoundingClientRect();("top"===t.tabPosition||"bottom"===t.tabPosition)&&(i.left>r.left||i.right<r.right)?o.scrollLeft+=r.right-o.offsetWidth-i.left:("left"===t.tabPosition||"right"===t.tabPosition)&&(i.top>r.top||i.bottom<r.bottom)&&(o.scrollTop+=r.bottom-o.offsetHeight-i.top),t._updateScrollButtonVisibility(),t.resize&&t._getTabCoordinates()}}expand(){const e=this;e.collapsible&&e.collapsed&&(e.collapsed=!1)}getOffsetFromEdgeOfElement(e){const t=this;t._validateIndex(e,"getOffsetFromEdgeOfElement"),e=Math.max(0,Math.min(e,t._tabs.length-1));const n=t._tabs[e],o=t.tabPosition;return"hidden"===o?n.getBoundingClientRect().top-t.getBoundingClientRect().top:Math.abs(n.getBoundingClientRect()[o]-t.getBoundingClientRect()[o])}insert(e,t){const n=this;let o,i;n._validateIndex(e,"insert"),(t===void 0||t.label===void 0&&t.content===void 0&&t.node===void 0)&&n.error(n.localize("detailsObjectRequired")),t.node===void 0?(o=t.group,i=document.createElement("smart-tab-item"),i.label=t.label===void 0?"":t.label,i.labelSize=t.labelSize===void 0?null:t.labelSize,i.content=t.content):i=t.node,i.$.addClass("smart-visibility-hidden"),i.group=null;const a=n._addTabLabelContainer(i),r=a.tabLabelContainer,s=a.dropDownLabelContainer;r.tab=i,i.tabLabelContainer=r;const l={index:e,tab:i,tabLabelContainer:r,dropDownLabelContainer:s};if(0===n._groups.length&&o===void 0)n._insertNoGrouping(l);else if(void 0!==o){l.group=o;const e=n.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+o+"\"]");null===e?n._insertIntoNewGroup(l):(l.smartTabItemsGroup=e,n._insertIntoExistingGroup(l))}else n._insertNearAGroup(l);n._getReorderItems(),null===n.selectedIndex&&n._tabs.length&&n._select(0,!1),null!==i.group&&null!==i.labelSize&&"shrink"!==n.tabLayout&&r.style.removeProperty([n._orientationSettings.dimension]),n._applyTabOverflow()}insertBefore(e,t){const n=this;if(!n.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,e.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem&&(t===void 0||null===t||t instanceof Smart.TabItem)||n.error(n.localize("tabItemRequired",{method:"insertBefore"}));let o;n.contains(e)&&(e.selected&&(o=!0),n.remove(e.index)),t!==void 0&&null!==t?(!n.contains(t)&&n.error(n.localize("referenceNodeNotChild",{argument:"referenceNode"})),n.insert(t.index,{node:e})):n.insert(n._tabs.length,{node:e}),o&&n._select(e.index,!1)}remove(e){const t=this,n=t._tabs.length;if(0!==n){t._validateIndex(e,"remove"),e=Math.max(0,Math.min(e,n-1));const o=t._tabs[e],i=t._tabLabelContainers[e];if(i.parentElement.removeChild(i),o.parentElement.removeChild(o),null!==o.group){const e=t.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+o.group+"\"]");if(0===e.childElementCount){const n=t._groups.indexOf(o.group);t.$.tabStrip.removeChild(t._groupLabels[n]),t._groups.splice(n,1),t.$.container.removeChild(t._groupLabels[0].dropDown),t._groupLabels.splice(n,1),t.$.tabContentSection.removeChild(e)}}1<n?e<t.selectedIndex?t.selectedIndex--:e===t.selectedIndex&&(e===n-1?t._select(e-1,!1):(t._select(e+1,!1),t.selectedIndex--)):(t.selectedIndex=null,t.$.tabContentSection.innerHTML=""),t._tabLabelContainers.splice(e,1),t.$.dropDownButtonDropDown.removeChild(t.$.dropDownButtonDropDown.children[e]),t._tabs.splice(e,1),t._updateTabIndexes(),t._getReorderItems(),t._applyTabOverflow(),t.ensureVisible(t.selectedIndex)}}removeChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"removeChild"})),t.contains(e)||t.error(t.localize("referenceNodeNotChild",{argument:"node"})),t.remove(e.index)}select(e){const t=this;0===t._tabs.length||(t._validateIndex(e,"select"),e=Math.max(0,Math.min(e,t._tabs.length-1)),t.ensureVisible(e),t._select(e,!0))}_setFocusable(){const e=this;return e.disabled||e.unfocusable?void e.removeAttribute("tabindex"):void((null===e.getAttribute("tabindex")||0>e.getAttribute("tabindex"))&&e.setAttribute("tabindex",0))}update(e,t,n){const o=this;if(0!==o._tabs.length){o._validateIndex(e,"update"),e=Math.max(0,Math.min(e,o._tabs.length-1));const i=o._tabs[e];if(void 0!==t&&i.label!==t){const n=o._tabLabelContainers[e].firstElementChild.children[0],a=o.$.dropDownButtonDropDown.children[e];i.label=t,n.innerHTML="",a.innerHTML="",o._setLabel(t,n,a),o._applyTabOverflow()}void 0!==n&&(i.content=n)}}_createElement(){const e=this;e.disabled&&(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0),e._handlePosition(e.tabPosition),e._handleScrollButtonsPosition(e.scrollButtonsPosition,"both"),null!==e.dataSource&&e._processDataSource(),e._setFocusable(),e.collapsed&&!e.collapsible&&(e.collapsed=!1),e.$.scrollButtonNear.firstElementChild.tabIndex=-1,e.$.scrollButtonFar.firstElementChild.tabIndex=-1,e._processHTML()}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const o=this;switch(e){case"addNewTab":n?o._insertAddNewTab():(o.$.tabStrip.removeChild(o._addNewTab),delete o._addNewTab),o._applyTabOverflow();break;case"closeButtonMode":if("selected"===n){for(let e=0;e<o._tabs.length;e++)o._disableCloseButton(e);o._enableCloseButton(o.selectedIndex)}else{o._disableCloseButton(o.selectedIndex);const e=o._tabLabelContainers;for(let t=0;t<e.length;t++){const n=e[t];n.closeButtonEnabled=!0!==o._tabs[t].closeButtonHidden,o._showCloseButton(n)}}o._applyTabOverflow();break;case"closeButtons":{const e=o._tabLabelContainers,t=n?o._showCloseButton:o._hideCloseButton;for(let n=0;n<e.length;n++){const o=e[n];t(o)}o._applyTabOverflow();break}case"collapsed":if(!o.collapsible&&n)return void(o.collapsed=!1);break;case"collapsible":!n&&o.collapsed&&(o.collapsed=!1);break;case"dataSource":o.selectedIndex=null;for(let e=0;e<o._groupLabels.length;e++)o.$.container.removeChild(o._groupLabels[e].dropDown);o.$.tabStrip.innerHTML="",o._processDataSource(),o._processHTML();break;case"disabled":o._setFocusable(),o.$.scrollButtonNear.disabled=n,o.$.scrollButtonFar.disabled=n,n||o._updateScrollButtonVisibility(),o._closeDropDownButtonDropDown();break;case"messages":case"selectionMode":case"readonly":case"reorder":break;case"overflow":if("scroll"!==o.tabLayout)return;o.$.tabStrip.scrollLeft=0,o.$.tabStrip.scrollTop=0,"hidden"===n?(o.$tabsHeaderSection.removeClass("scroll-buttons-shown"),o.$scrollButtonNear.addClass("smart-hidden"),o.$scrollButtonFar.addClass("smart-hidden")):o._checkOverflowScroll(),o._getTabCoordinates();break;case"tabPosition":{if(o._closeGroupDropDown(),o._handlePosition(n,t),"shrink"!==o.tabLayout&&o._applyLabelSizes("tabPosition"),o._applyTabOverflow(),"hidden"!==n){const e=o.getElementsByClassName("smart-tab-group-arrow");for(let t=0;t<e.length;t++)e[t].innerHTML=o._arrowCodes[o.tabPosition]}break}case"resize":n&&o._getTabCoordinates();break;case"scrollButtonsPosition":o._handleScrollButtonsPosition(n,t);break;case"selectedIndex":{if(null===n)return void(o.selectedIndex=t);const e=Math.max(0,Math.min(n,o._tabs.length-1));o.ensureVisible(e),o._select(e,!0,t);break}case"tabLayout":"scroll"===t&&(o.$tabsHeaderSection.removeClass("scroll-buttons-shown"),o.$scrollButtonNear.addClass("smart-hidden"),o.$scrollButtonFar.addClass("smart-hidden")),"shrink"===n?o._applyLabelSizes("shrink",!0):"shrink"===t&&o._applyLabelSizes("shrink",!1),o._applyTabOverflow(),"scroll"===n&&o.disabled&&(o.$.scrollButtonNear.disabled=!0,o.$.scrollButtonFar.disabled=!0),o.ensureVisible(o.selectedIndex);break;case"tabTextOrientation":o._applyTabOverflow(),o.ensureVisible(o.selectedIndex);break;case"unfocusable":o._setFocusable();}}_addGroupContainer(e,t){const n=this,o=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div");return o.className="smart-tab-group-container smart-unselectable",o.$=Smart.Utilities.Extend(o),i.className="smart-tab-label-text-wrapper",null!==t&&"shrink"!==n.tabLayout&&(o.style[n._orientationSettings.dimension]=parseInt(t,10)+"px"),a.className="smart-tab-label-text-container",a.innerHTML=e,r.className="smart-tab-group-arrow",r.innerHTML=n._arrowCodes[n.tabPosition],s.className="smart-tab-group-drop-down smart-hidden",s.$=Smart.Utilities.Extend(s),i.appendChild(a),i.appendChild(r),o.appendChild(i),n.$.container.appendChild(s),o.group=e,o.dropDown=s,s.groupContainer=o,{label:o,dropDown:s}}_addGroupElements(e){const t=this,n=e.groups,o=e.groupLabels,i=e.group,a=n.indexOf(i),r=e.tabLabelContainer;let s;if(-1!==a)s=o[a],s.dropDown.appendChild(r);else{n.push(i);const a=t._addGroupContainer(i,e.smartTabItemsGroup.labelSize),l=a.dropDown;s=a.label,l.appendChild(r),e.documentFragment.appendChild(s),o.push(s)}t.selectedIndex===e.i&&(t._selectedGroup=s,s.$.addClass("smart-tab-group-selected"))}_addNewTabHandler(e,t,n){const o=this;o._swiping||(n?(e.$.removeClass("smart-tab-hovered"),o.insert(o._tabs.length,{label:"New Tab",content:""}),o._select(o._tabs.length-1,!0)):!o._reordering&&!o._swiping&&("mouseover"===t?e.$.addClass("smart-tab-hovered"):"mouseout"==t&&e.$.removeClass("smart-tab-hovered")))}_addTabLabelContainer(e,t){const n=this,o=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div");let s;return o.className="smart-tab-label-container smart-unselectable",i.className="smart-tab-label-text-wrapper",a.className="smart-tab-label-text-container",r.className="smart-tab-close-button",r.innerHTML="\xD7",void 0===t?(n.closeButtons?"default"===n.closeButtonMode&&e.closeButtonHidden||"selected"===n.closeButtonMode&&!e.selected?(r.classList.add("smart-hidden"),o.closeButtonEnabled=!1):(a.classList.add("smart-close-button-enabled"),o.closeButtonEnabled=!0):(r.classList.add("smart-hidden"),o.closeButtonEnabled=!0),s=document.createElement("div"),s.className="smart-tab-label-container smart-unselectable",null===e.group&&null!==e.labelSize&&"shrink"!==n.tabLayout&&(o.style[n._orientationSettings.dimension]=parseInt(e.labelSize,10)+"px")):(r.classList.add("smart-hidden"),o.closeButtonEnabled=!1),n._setLabel(e?e.label:"+",a,s),a.$=Smart.Utilities.Extend(a),r.$=Smart.Utilities.Extend(r),i.appendChild(a),i.appendChild(r),o.appendChild(i),o.$=Smart.Utilities.Extend(o),{tabLabelContainer:o,dropDownLabelContainer:s}}_animateSelection(e,t,n){const o=this;let a="right",r="left";o._animatedTab=e,o._animatedOldTab=t,("left"===o.tabPosition||"right"===o.tabPosition)&&(a="top",r="bottom");for(let s=0;s<o._tabs.length;s++)o._tabs[s].$.removeClass(a),o._tabs[s].$.removeClass(r),o._tabs[s].$.removeClass("animate");n?(e.$.addClass(a),e.$.removeClass("smart-visibility-hidden"),t.$.addClass("animate"),e.$.addClass("animate"),t.$.addClass(r),t.$.addClass("smart-visibility-hidden"),e.$.removeClass(a),o._animatedOldTab.classToRemove=r):(e.$.addClass(r),e.$.removeClass("smart-visibility-hidden"),t.$.addClass("animate"),e.$.addClass("animate"),t.$.addClass(a),t.$.addClass("smart-visibility-hidden"),e.$.removeClass(r),o._animatedOldTab.classToRemove=a)}_applyConditionalTabOverflow(){const e=this,t="left"===e.tabPosition||"right"===e.tabPosition,n=e.$.tabStrip;if("scroll"===e.tabLayout)return void e._checkOverflowScroll();if(e._firefox&&"shrink"===e.tabLayout&&t&&n.scrollHeight>n.offsetHeight){const t=n.children,o=100/t.length+"%";for(let e=0;e<t.length;e++)t[e].style.height=o,t[e].firstElementChild.firstElementChild.classList.add("smart-tab-label-text-container-full-height");e._inlineStyleTabStripChildren=!0}}_applyLabelSizes(e,t){const n=this,o=n._orientationSettings.dimension,a="width"===o?"height":"width";for(let r=0;r<n._reorderItems.length;r++){const i=n._reorderItems[r],s=n._getCorrespondingCustomElement(i);null!==s.labelSize&&("tabPosition"===e&&i.style.removeProperty(a),t?i.style.removeProperty(o):i.style[o]=parseInt(s.labelSize,10)+"px")}}_applyTabOverflow(){var e=Math.max;const t=this,n=t.tabLayout,o=t.tabPosition,i="left"===o||"right"===o,a=t.$.tabStrip;switch(t._removeInlineStyle(),n){case"scroll":case"dropdown":t._firefox&&"vertical"===t.tabTextOrientation&&i&&t._fixTabStripFirefox(a);break;case"wrap":if("vertical"!==t.tabTextOrientation)i&&a.scrollWidth>a.offsetWidth&&(a.style.width=a.scrollWidth+"px","right"===o&&(a.style.flexWrap="wrap-reverse"),t._inlineStyleTabStrip=!0);else if(!t._firefox)i||a.scrollHeight>a.offsetHeight&&(a.style.height=a.scrollHeight+"px","bottom"===o&&(a.style.flexWrap="wrap-reverse"),t._inlineStyleTabStrip=!0);else if(i)t._fixTabStripFirefox(a);else{const n=a.children;let o=n[0].offsetHeight;for(let t=1;t<n.length;t++)o=e(o,n[t].offsetHeight);for(let e=1;e<n.length;e++)n[e].style.height=o+"px";t._inlineStyleTabStripChildren=!0}break;case"shrink":if(!i)a.scrollWidth>a.offsetWidth&&a.$.addClass("shrink-tabs");else if(t._firefox&&"vertical"===t.tabTextOrientation){const n=a.children,o=window.getComputedStyle(n[0]),i=parseInt(o.paddingLeft,10)+parseInt(o.paddingRight,10);let r=0;for(let t=0;t<n.length;t++)r=e(r,n[t].firstElementChild.firstElementChild.offsetWidth);a.style.width=i+r+"px",t._inlineStyleTabStrip=!0;break}}t._applyConditionalTabOverflow(),t._getTabCoordinates(),t._fixTabStripFlex(),t._toggleNavigationElementsVisibility()}_checkOverflowScroll(){var e=Math.round;const t=this,n=t.$tabsHeaderSection,o=t.$.tabStrip,i=t.overflow;if("hidden"===i)return;let a,r,s;"left"===t.tabPosition||"right"===t.tabPosition?(a=e(o.scrollHeight)>e(o.offsetHeight),r=0<e(o.scrollTop),s=e(o.offsetHeight+o.scrollTop)<e(o.scrollHeight)):(a=e(o.scrollWidth)>e(o.offsetWidth),r=0<e(o.scrollLeft),s=e(o.offsetWidth+o.scrollLeft)<e(o.scrollWidth)),"scroll"===i&&(n.addClass("scroll-buttons-shown"),t.$scrollButtonNear.removeClass("smart-hidden"),t.$scrollButtonFar.removeClass("smart-hidden")),a?"auto"===i?(!n.hasClass("scroll-buttons-shown")&&n.addClass("scroll-buttons-shown"),r?t.$scrollButtonNear.removeClass("smart-hidden"):t.$scrollButtonNear.addClass("smart-hidden"),s?t.$scrollButtonFar.removeClass("smart-hidden"):t.$scrollButtonFar.addClass("smart-hidden"),!1===(r&&s)?n.addClass("one-button-shown"):n.removeClass("one-button-shown"),!t.disabled&&(t.$.scrollButtonNear.disabled=!1,t.$.scrollButtonFar.disabled=!1)):(n.removeClass("one-button-shown"),t.disabled?(t.$.scrollButtonNear.disabled=!0,t.$.scrollButtonFar.disabled=!0):(t.$.scrollButtonNear.disabled=!r,t.$.scrollButtonFar.disabled=!s)):!a&&"auto"===i&&n.hasClass("scroll-buttons-shown")?(n.removeClass("scroll-buttons-shown"),n.removeClass("one-button-shown"),t.$scrollButtonNear.addClass("smart-hidden"),t.$scrollButtonFar.addClass("smart-hidden")):!a&&"scroll"===i&&(t.$.scrollButtonNear.disabled=!0,t.$.scrollButtonFar.disabled=!0)}_closeButtonVisibilityChangeHandler(e){const t=this,n=e.target.index;return"selected"===t.closeButtonMode?void(t._tabLabelContainers[n].closeButtonEnabled=e.detail.hidden):void(e.detail.hidden?t._disableCloseButton(n):t._enableCloseButton(n))}_closeDropDownButtonDropDown(){const e=this;e._dropDownButtonDropDownOpened&&(e.$dropDownButtonDropDown.addClass("smart-hidden"),e._dropDownButtonDropDownOpened=!1)}_closeGroupDropDown(){const e=this;e._openDropDown&&(e._openDropDown.rippleInProgress?setTimeout(function(){e._openDropDown&&(e._openDropDown.$.addClass("smart-hidden"),delete e._openDropDown.rippleInProgress,e._openDropDown=void 0)},450):(e._openDropDown.$.addClass("smart-hidden"),e._openDropDown=void 0))}_containerHandler(e){const t=this,n=e.type;if(!(t.disabled||t.readonly||t._resizing&&"mouseout"!==n||("down"===n||"up"===n)&&1!==e.which&&!Smart.Utilities.Core.isMobile)){"up"===n&&e.stopPropagation();const o=e.originalEvent?e.originalEvent.target:e.target;return t.$.tabContentSection.contains(o)?void 0:t.$.dropDownButton.contains(o)?void t._dropDownButtonHandler(o,e):void t._tabStripHandler(o,e)}}_disableCloseButton(e){const t=this,n=t._tabLabelContainers[e];n.closeButtonEnabled=!1,t.closeButtons&&t._hideCloseButton(n)}_documentMoveHandler(e){const t=this,n=t._orientationSettings;if(t._reordering){t._reorderStartThrown||(t._fireDragEvent(e,"reorderStart"),t._reorderStartThrown=!0);const o=e[n.coordinate],a="wrap"===t.tabLayout?function(t){return e.pageX>=t.fromX&&e.pageX<=t.toX&&e.pageY>=t.fromY&&e.pageY<=t.toY}:function(e){return o>=e[n.from]&&o<=e[n.to]};let r=!1;for(let e=0;e<t._tabCoordinates.length;e++){const n=t._tabCoordinates[e];if(a(n)){r=e;break}}!0!==t._preventReorder&&!1!==r&&r!==t._draggedIndex&&(t._reorderTabs(t._draggedIndex,r),t._closeGroupDropDown(),t._draggedIndex=r,t._getReorderItems(),t._getTabCoordinates());const i=t._tabCoordinates[t._draggedIndex];t._preventReorder=!!("wrap"!==t.tabLayout&&(o<i[n.from]||o>i[n.to])||"wrap"===t.tabLayout&&(null!==e.originalEvent.target.closest(".smart-tab-label-container")||null!==e.originalEvent.target.closest(".smart-tab-group-container"))&&!(e.pageX>=i.fromX&&e.pageX<=i.toX&&e.pageY>=i.fromY&&e.pageY<=i.toY))}else t._resizing&&(t.$.resizeToken.style[n.edge]=e[n.coordinate]-t._tabsHeaderSectionCoordinate+"px",t.$resizeToken.removeClass("smart-hidden"))}_documentUpHandler(e){const t=this;let n=e.originalEvent.target;t._endSwiping(e,Date.now()),t._openDropDown&&!t._openDropDown.rippleInProgress&&(n===document||n.closest(".smart-tab-group-container")!==t._openDropDown.groupContainer)&&t._closeGroupDropDown(),t.$.dropDownButton.contains(n)||t._closeDropDownButtonDropDown(),t._endReordering(e,n),t._resize(e),t._tabToResize!==void 0&&(t._tabToResize=void 0)}_dropDownButtonHandler(e,t){const n=this,o=t.type;n.$.dropDownButtonDropDown.contains(e)?e.classList.contains("smart-tab-label-container")&&("down"===o?n._downTarget=e:"mouseout"===o?e.classList.remove("smart-tab-hovered"):"mouseover"===o?e.classList.add("smart-tab-hovered"):"up"===o?e===n._downTarget&&(n.select(Array.from(n.$.dropDownButtonDropDown.children).indexOf(e)),n._closeDropDownButtonDropDown()):void 0):"down"===o?n._downTarget=n.$.dropDownButton:"up"===o&&n._downTarget===n.$.dropDownButton&&(n._dropDownButtonDropDownOpened?n._closeDropDownButtonDropDown():(n.$dropDownButtonDropDown.removeClass("smart-hidden"),n._dropDownButtonDropDownOpened=!0))}_enableCloseButton(e){const t=this,n=t._tabLabelContainers[e];n.closeButtonEnabled=!0,t.closeButtons&&t._showCloseButton(n)}_endReordering(e,t){const n=this;n._reordering&&(n._draggedHoveredTab&&(!n._draggedHoveredTab.contains(t)&&n._draggedHoveredTab.$.removeClass("smart-tab-hovered"),delete n._draggedHoveredTab),n._reorderedIndex=void 0,n._reordering=!1,n._reorderStartThrown=!1,n.removeAttribute("dragged"),e&&n._fireDragEvent(e,"reorderEnd"))}_endSwiping(e,t){var n=Math.abs;const o=this;if(!o._dragStartDetails)return;const i=o._orientationSettings,a=o.$.tabStrip,r=n(o._dragStartDetails.startTime-t),s=200/r,l=(o._dragStartDetails[i.startCoordinate]-e[i.coordinate])*s;let d=n(l);const m=function(){return!(0<l&&a[i.scrollDirection]===a[i.scrollSize]-a[i.size]||0>l&&0===a[i.scrollDirection])};let c=.03*n(l)*s;const p=function(){if(5<c){const e=(d-c)/n(l);.1>e?c/=1.25:.15>e?c/=1.2:.2>e?c/=1.15:.25>e?c/=1.1:.3>e&&(c/=1.05)}const e=a[i.scrollDirection];a[i.scrollDirection]=0<l?Math.min(e+c,a[i.scrollSize]-a[i.size]):Math.max(e-c,0),d-=c,o._updateScrollButtonVisibility();const t=m();0<d&&t?o._scrollingAnimationFrame=window.requestAnimationFrame(p):o._wheelInProgress=!1};o._scrollingAnimationFrame&&cancelAnimationFrame(o._scrollingAnimationFrame),500>r&&m()?o._scrollingAnimationFrame=window.requestAnimationFrame(p):o._wheelInProgress=!1,delete o._dragStartDetails,o._swiping&&delete o._swiping}_fireDragEvent(e,t){const n=this,o=n.$.tabStrip.children[n._draggedIndex],i=o.tab;let a,r,s;i?(a=i.selected,r=i.index,s=i.label):s=o.group,n.$.fireEvent(t,{position:{left:e.pageX,top:e.pageY},target:o,selected:a,index:r,label:s})}_fixTabStripFirefox(e){const t=this;if(0===t._tabs.length)return;const n=e.children;let o=n[0].getBoundingClientRect(),a=o.left,r=a+n[0].offsetWidth;for(let t=1;t<n.length;t++)o=n[t].getBoundingClientRect(),a=Math.min(a,o.left),r=Math.max(r,o.left+n[t].offsetWidth);e.style.width=r-a+"px",t._inlineStyleTabStrip=!0}_fixTabStripFlex(){const e=this;if("vertical"===e.tabTextOrientation&&("left"===e.tabPosition||"right"===e.tabPosition)&&!e._firefox){const t=1===e._tabs.length?10:0;setTimeout(function(){e.$tabsHeaderSection.addClass("smart-hidden"),setTimeout(function(){e.$tabsHeaderSection.removeClass("smart-hidden"),e._getTabCoordinates()},t)},t)}}_getCorrespondingCustomElement(e){return e.$.hasClass("smart-tab-label-container")?e.tab:this.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+e.group+"\"]")}_getReorderItems(){const e=this;let t;0===e._groups.length?t=e._tabLabelContainers:(t=Array.from(e.$.tabStrip.children),e.addNewTab&&t.pop()),e._reorderItems=t}_getTabCoordinates(){const e=this;if((e.reorder||e.resize)&&"hidden"!==e.tabPosition){const t=[],n=window.scrollX||window.pageXOffset,o=window.scrollY||window.pageYOffset;for(let a=0;a<e._reorderItems.length;a++){const i=e._reorderItems[a],r=i.getBoundingClientRect();t.push({fromX:r.left+n,toX:r.right+n,fromY:r.top+o,toY:r.bottom+o})}e._tabCoordinates=t}}_getTabs(){const e=this,t=e.getElementsByTagName("smart-tab-item");null!==e.selectedIndex&&(0===t.length?e.selectedIndex=null:e.selectedIndex=Math.max(0,Math.min(e.selectedIndex,t.length-1))),e._tabs=Array.from(t)}_groupContainerHandler(e,t){const n=this,o=e.dropDown;if("down"===t)return n._downTarget=e,void(n.reorder&&1<n._reorderItems.length&&(n._getTabCoordinates(),n._reordering=!0,n.setAttribute("dragged",""),n._draggedIndex=Array.from(n.$.tabStrip.children).indexOf(e)));n._reordering||n._swiping||(o===n._openDropDown||"mouseover"!==t||e.classList.contains("smart-tab-group-selected")?"mouseout"===t&&e.$.removeClass("smart-tab-hovered"):e.$.addClass("smart-tab-hovered"));"up"!==t||n._downTarget!==e||void 0!==n._reorderedIndex||n._swiping||(o===n._openDropDown?(n._closeGroupDropDown(),!e.classList.contains("smart-tab-group-selected")&&e.$.addClass("smart-tab-hovered")):(n._openDropDown&&n._openDropDown.$.addClass("smart-hidden"),o.$.removeClass("smart-hidden"),n._positionGroupDropDown(o,e),n._openDropDown=o,e.$.removeClass("smart-tab-hovered")))}_handlePosition(e,t){const n=this;-1!==[void 0,"top","left","hidden"].indexOf(t)&&("bottom"===e||"right"===e)?n.$.container.insertBefore(n.$.tabContentSection,n.$.tabsHeaderSection):("bottom"===t||"right"===t)&&-1!==["top","left","hidden"].indexOf(e)&&n.$.container.insertBefore(n.$.tabsHeaderSection,n.$.tabContentSection),"top"===e||"bottom"===e?(n._orientationSettings={coordinate:"pageX",dimension:"width",edge:"left",from:"fromX",size:"offsetWidth",to:"toX",scrollDirection:"scrollLeft",scrollSize:"scrollWidth",startCoordinate:"startX",wheelOffset:70},n.removeAttribute("vertical"),n.setAttribute("horizontal",""),n.$arrowNear.removeClass("smart-arrow-up"),n.$arrowNear.addClass("smart-arrow-left"),n.$arrowFar.removeClass("smart-arrow-down"),n.$arrowFar.addClass("smart-arrow-right")):(n._orientationSettings={coordinate:"pageY",dimension:"height",edge:"top",from:"fromY",size:"offsetHeight",to:"toY",scrollDirection:"scrollTop",scrollSize:"scrollHeight",startCoordinate:"startY",wheelOffset:35},n.removeAttribute("horizontal"),n.setAttribute("vertical",""),n.$arrowNear.removeClass("smart-arrow-left"),n.$arrowNear.addClass("smart-arrow-up"),n.$arrowFar.removeClass("smart-arrow-right"),n.$arrowFar.addClass("smart-arrow-down")),n.$.dropDownButtonArrow.innerHTML=n._arrowCodes[n.tabPosition]}_handleScrollButtonsPosition(e,t){const n=this,o=n.$.tabsHeaderItems;e===t||("both"===e?"near"===t?o.insertBefore(n.$.scrollButtonFar,n.$.dropDownButton):o.insertBefore(n.$.scrollButtonNear,n.$.tabStrip):"near"===e?("far"===t&&o.insertBefore(n.$.scrollButtonNear,n.$.tabStrip),o.insertBefore(n.$.scrollButtonFar,n.$.tabStrip)):("near"===t&&o.insertBefore(n.$.scrollButtonFar,n.$.dropDownButton),o.insertBefore(n.$.scrollButtonNear,n.$.scrollButtonFar)))}_hideCloseButton(e){e.firstElementChild.children[0].$.removeClass("smart-close-button-enabled"),e.firstElementChild.children[1].$.addClass("smart-hidden")}_indexChangeHandler(e){const t=this,n=e.detail.oldIndex,o=Math.max(0,Math.min(e.detail.newIndex,t._tabs.length-1));if(n!==o){if(0===t._groups.length)t._reorderTabs(n,o);else{const i=e.detail.tabItem;i._setIndex(n),t.remove(n),t.insert(o,{node:i}),t.selectedIndex===n&&t._select(o,!1)}t._reorderedIndex=void 0}}_insertAddNewTab(){const e=this,t=e._addTabLabelContainer(void 0,!0).tabLabelContainer;t.$.addClass("smart-add-new-tab"),e.$.tabStrip.appendChild(t),e._addNewTab=t}_insertIntoExistingGroup(e){const t=this,n=e.smartTabItemsGroup,o=e.tab,i=e.tabLabelContainer,a=e.group,r=t._groupLabels[t._groups.indexOf(a)],s=r.dropDown;let l=e.index;l=Math.max(0,Math.min(l,n.childElementCount)),s.insertBefore(i,s.children[l]);const d=n.children[l];let m;m=d?d.index:n.children[l-1].index+1,n.insertBefore(o,d),t._tabLabelContainers.splice(m,0,i),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[m]||null),t._tabs.splice(m,0,o),l=m,o.group=a,t._updateIndexes(l)}_insertIntoNewGroup(e){const t=this,n=e.tab,o=e.tabLabelContainer,i=e.group,a=t._addGroupContainer(i),r=a.label,s=a.dropDown;s.appendChild(o),t._groups.push(i);let l=Math.max(0,Math.min(e.index,t.$.tabStrip.childElementCount)),d=l;t._addNewTab&&d===t.$.tabStrip.childElementCount&&d--,t.$.tabStrip.insertBefore(r,t.$.tabStrip.children[d]||null),t._groupLabels.push(r);const m=document.createElement("smart-tab-items-group");m.appendChild(n),t.$.tabContentSection.insertBefore(m,t.$.tabContentSection.children[l]),m.label=i;const c=m.previousElementSibling;let p=0;c&&(c instanceof Smart.TabItem?p=c.index+1:p=c.lastElementChild.index+1),t._tabLabelContainers.splice(p,0,o),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[p]||null),t._tabs.splice(p,0,n),l=p,n.group=i,t._updateIndexes(l)}_insertNearAGroup(e){const t=this,n=e.tab,o=e.tabLabelContainer;let i=e.index;i=Math.max(0,Math.min(i,t._tabs.length));const a=t._tabs[i-1],r=t._tabs[i],s=r?r.group:void 0;a&&null!==a.group&&r&&null!==s?(r.tabLabelContainer.parentElement.insertBefore(o,r.tabLabelContainer),r.parentElement.insertBefore(n,r),n.group=s):r?null===s?(t.$.tabStrip.insertBefore(o,r.tabLabelContainer),t.$.tabContentSection.insertBefore(n,r)):(t.$.tabStrip.insertBefore(o,t._groupLabels[t._groups.indexOf(s)]),t.$.tabContentSection.insertBefore(n,t.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+s+"\"]"))):(t.$.tabStrip.insertBefore(o,t._addNewTab||null),t.$.tabContentSection.appendChild(n)),t._tabLabelContainers.splice(i,0,o),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[i]||null),t._tabs.splice(i,0,n),t._updateIndexes(i)}_insertNoGrouping(e){const t=this,n=Math.max(0,Math.min(e.index,t._tabs.length)),o=e.tab,i=e.tabLabelContainer;t.$.tabStrip.insertBefore(i,t._tabLabelContainers[n]||t._addNewTab||null),t.$.tabContentSection.insertBefore(o,t._tabs[n]||null),t._tabLabelContainers.splice(n,0,i),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[n]||null),t._tabs.splice(n,0,o),t._updateIndexes(n)}_keydownHandler(e){const t=this,n=e.key;if(document.activeElement!==t||-1===["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","End","Home"].indexOf(n)||t.disabled||t.readonly||"none"===t.selectionMode||null===t.selectedIndex)return;e.preventDefault();const o=t._tabs.length-1;let i;switch(n){case"ArrowLeft":case"ArrowUp":if(0===t.selectedIndex)return;i=t.selectedIndex-1;break;case"ArrowRight":case"ArrowDown":if(t.selectedIndex===o)return;i=t.selectedIndex+1;break;case"End":if(t.selectedIndex===o)return;i=o;break;case"Home":if(0===t.selectedIndex)return;i=0;}t.select(i)}_labelContainerHandler(e,t,n){const o=this,i="up"===n&&o._downTarget===e;if("down"===n&&(o._downTarget=e,"click"===o.selectionMode&&e!==o._addNewTab))if(Smart.Utilities.Core.isMobile&&null===e.tab.group){const n=o.$.tabStrip[o._orientationSettings.scrollDirection];setTimeout(function(){if(n===o.$.tabStrip[o._orientationSettings.scrollDirection]){const n=o._ripple(t,e);n&&o._openDropDown&&o._openDropDown.contains(e)&&(o._openDropDown.rippleInProgress=!0)}},100)}else{const n=o._ripple(t,e);n&&o._openDropDown&&o._openDropDown.contains(e)&&(o._openDropDown.rippleInProgress=!0)}if(e===o._addNewTab)return void o._addNewTabHandler(e,n,i);const a=e.tab.index,r=!(o._reordering&&o._reorderedIndex!==void 0);i&&a===o.selectedIndex&&(o._closeGroupDropDown(),r&&null===e.tab.group&&o._toggleCollapsedState()),!o._swiping&&(r&&"click"===o.selectionMode&&i||!o._reordering&&(o.selectionMode===n||"mouseenter"===o.selectionMode&&"mouseover"===n))&&o._select(a,!0),o._reordering||o._swiping||"click"!==o.selectionMode&&"dblclick"!==o.selectionMode||("mouseover"!==n||e.$.hasClass("smart-tab-selected")?"mouseout"===n&&e.$.removeClass("smart-tab-hovered"):e.$.addClass("smart-tab-hovered")),o.reorder&&"down"===n&&null===e.tab.group&&1<o._reorderItems.length&&(o._getTabCoordinates(),o._reordering=!0,o.setAttribute("dragged",""),e.$.hasClass("smart-tab-hovered")&&(o._draggedHoveredTab=e),o._draggedIndex=0===o._groups.length?e.tab.index:Array.from(o.$.tabStrip.children).indexOf(e))}_labelSizeChangeHandler(e){const t=this,n=e.detail.size;let o;"shrink"===t.tabLayout||(o=e.target instanceof Smart.TabItem?e.target.tabLabelContainer:t._groupLabels[t._groups.indexOf(e.target.label)],null===n?o.style.removeProperty(t._orientationSettings.dimension):o.style[t._orientationSettings.dimension]=parseInt(n,10)+"px",t._applyTabOverflow())}_orderTabs(){const e=this,t=e.getElementsByTagName("smart-tab-items-group"),n=[],o=[];let a=!0,r=!1;if(0===t.length)for(let t=0;t<e._tabs.length;t++){const i=e._tabs[t],s=i.index;if(a&&null!==s&&(a=!1),-1!==n.indexOf(s||0)&&(r=!0,null!==s))break;n.push(s||0),o.push({tab:i,index:s})}if(!r){const e=n.slice(0).sort(function(e,t){return e-t});JSON.stringify(n)===JSON.stringify(e)&&(a=!0)}if(!a&&!r){o.sort(function(e,t){return e.index-t.index});for(let t=0;t<o.length;t++){const n=o[t].tab;n._setIndex(t),e.$.tabContentSection.removeChild(n)}for(let t=0;t<o.length;t++){const n=o[t].tab;e.$.tabContentSection.appendChild(n),e._tabs[t]=n}}else{a||console.warn(e.localize("ambiguousIndexes"));for(let t=0;t<e._tabs.length;t++)e._tabs[t]._setIndex(t)}}_populateTabStrip(){const e=this,t=document.createDocumentFragment(),n=[],o=[],a=[];for(let r=0;r<e._tabs.length;r++){const i=e._tabs[r],s=i.parentElement,l=s instanceof Smart.TabItemsGroup?s.label:null;i.group=l;const d=e._addTabLabelContainer(i),m=d.tabLabelContainer,c=d.dropDownLabelContainer;e.selectedIndex===r&&m.$.addClass("smart-tab-selected"),i.tabLabelContainer=m,m.tab=i,n.push(m),null===l?t.appendChild(m):e._addGroupElements({documentFragment:t,groups:o,groupLabels:a,i:r,group:l,tabLabelContainer:m,smartTabItemsGroup:s}),e.$.dropDownButtonDropDown.appendChild(c)}e.$.tabStrip.appendChild(t),e._tabLabelContainers=n,e._groups=o,e._groupLabels=a}_positionGroupDropDown(e,t){const n=this,o=n.tabPosition;if("top"===o||"bottom"===o){const i=-1!==n.theme.indexOf("material");if(e.style.left=t.offsetLeft-n.$.tabStrip.scrollLeft+"px","top"===o)i||(e.style.top=t.offsetTop+t.offsetHeight+"px");else{let o=t.getBoundingClientRect().top-n.$.container.getBoundingClientRect().top;i&&(o+=n.$.tabStrip.offsetHeight),e.style.top=o+"px"}}else e.style.top=t.offsetTop-n.$.tabStrip.scrollTop+"px",e.style.left="left"===o?t.offsetLeft+t.offsetWidth+"px":t.getBoundingClientRect().left-n.$.container.getBoundingClientRect().left+"px"}_processDataSource(){function e(t,n){let o;if(t.items instanceof Array&&0<t.items.length){o=document.createElement("smart-tab-items-group");for(let n=0;n<t.items.length;n++)t.items[n].items||e(t.items[n],o)}else o=document.createElement("smart-tab-item"),!0===t.closeButtonHidden&&(o.closeButtonHidden=!0),void 0!==t.content&&(o.innerHTML=t.content),void 0!==t.index&&(o.index=t.index),!0===t.selected&&(o.selected=t.selected);t.label!==void 0&&(o.label=t.label),t.labelSize!==void 0&&(o.labelSize=t.labelSize),n.appendChild(o)}const t=this,n=t.dataSource;t.$.tabContentSection.innerHTML="";for(let o=0;o<n.length;o++){const i=n[o];e(i,t.$.tabContentSection)}}_processHTML(){const e=this;e._getTabs(),e._orderTabs(),e._validateInitialSelection(),e._populateTabStrip(),e.addNewTab&&e._insertAddNewTab(),e._getReorderItems(),e._applyTabOverflow(),e.ensureVisible(e.selectedIndex)}_removeInlineStyle(){const e=this,t=e.$.tabStrip;if(e._inlineStyleTabStripChildren){const n=t.children;for(let e=0;e<n.length;e++)n[e].removeAttribute("style"),n[e].firstElementChild.firstElementChild.classList.remove("smart-tab-label-text-container-full-height");delete e._inlineStyleTabStripChildren}e._inlineStyleTabStrip&&(t.removeAttribute("style"),delete e._inlineStyleTabStrip),t.$.removeClass("shrink-tabs")}_reorderTabs(e,t){function n(e,t,n){const o=e[t];e.splice(t,1),e.splice(n,0,o)}const o=this;if(0===o._groups.length){const i=o._tabs,a=o._tabLabelContainers,r=e>t?t:t+1;o.selectedIndex===e?o.selectedIndex=t:o.selectedIndex<=t&&o.selectedIndex>e?o.selectedIndex--:o.selectedIndex>=t&&o.selectedIndex<e&&o.selectedIndex++;let s;s=a[r]?a[r]:o.addNewTab?o._addNewTab:null,o.$.tabStrip.insertBefore(a[e],s),o.$.dropDownButtonDropDown.insertBefore(o.$.dropDownButtonDropDown.children[e],o.$.dropDownButtonDropDown.children[r]||null),o.$.tabContentSection.insertBefore(i[e],i[r]||null),n(i,e,t),n(a,e,t),o._updateTabIndexes()}else o._reorderTabsGrouping(e,t);o.$.fireEvent("reorder",{newIndex:t,originalIndex:e}),o._reorderedIndex=t}_reorderTabsGrouping(e,t){const n=this,o=n.$.tabStrip.children,i=n.$.tabContentSection.children,a=e>t?t:t+1,r=n._tabs[n.selectedIndex];n.$.tabStrip.insertBefore(o[e],o[a]||null),n.$.tabContentSection.insertBefore(i[e],i[a]||null),n._groupLabels=Array.from(n.$.tabStrip.getElementsByClassName("smart-tab-group-container")),n._groups=[];for(let o=0;o<n._groupLabels.length;o++)n._groups.push(n._groupLabels[o].group);n._tabs=Array.from(n.$.tabContentSection.getElementsByTagName("smart-tab-item"));const s=document.createDocumentFragment();let l=[];for(let o=0;o<n._tabs.length;o++)s.appendChild(n.$.dropDownButtonDropDown.children[n._tabs[o].index].cloneNode(!0));n.$.dropDownButtonDropDown.innerHTML="",n.$.dropDownButtonDropDown.appendChild(s);for(let o=0;o<n.$.tabStrip.childElementCount;o++){const e=n.$.tabStrip.children[o];e.$.hasClass("smart-tab-label-container")&&e!==n._addNewTab?l.push(e):e.$.hasClass("smart-tab-group-container")&&(l=l.concat(Array.from(e.dropDown.children)))}n._tabLabelContainers=l,n._updateTabIndexes(),r&&(n.selectedIndex=r.index)}_resize(e){const t=this;if(!t._resizing)return;const n=t._orientationSettings,o=e[n.coordinate]-t._resizeFrom,i=t._getCorrespondingCustomElement(t._tabToResize);let a=null===i.labelSize?t._tabToResize[n.size]:i.labelSize;const r=Math.max(10,a+o);r!==a&&(i._preventPropertyChangedHandler=!0,i.labelSize=r,t._tabToResize.style[n.dimension]=parseInt(r,10)+"px"),t.$resizeToken.addClass("smart-hidden"),t._applyTabOverflow(),t._resizing=!1,t.removeAttribute("resizing")}_ripple(e,t){const n=this;if(-1!==n.theme.indexOf("material")){const n=document.createElement("div");return n.className="ripple-agent",t.firstElementChild.appendChild(n),setTimeout(function(){t.firstElementChild.removeChild(n)},1e3),Smart.Utilities.Animation.Ripple.animate(n,e.pageX,e.pageY),!0}}_scrollButtonFarClickHandler(){const e=this,t=e.$.tabStrip;e.$.scrollButtonFar.disabled||("top"===e.tabPosition||"bottom"===e.tabPosition?t.scrollLeft+=10:t.scrollTop+=10,e._updateScrollButtonVisibility())}_scrollButtonNearClickHandler(){const e=this,t=e.$.tabStrip;e.$.scrollButtonNear.disabled||("top"===e.tabPosition||"bottom"===e.tabPosition?t.scrollLeft-=10:t.scrollTop-=10,e._updateScrollButtonVisibility())}_select(e,t,n){const o=this,i=o.$.hasClass("animation");if(void 0===n&&(n=o.selectedIndex),e!==n){const a=o._tabs[e];if(null!==n){const t=o._tabs[n];i?o._animateSelection(a,t,e>n):t.$.addClass("smart-visibility-hidden"),t.selected=!1,o._tabLabelContainers[n].$.removeClass("smart-tab-selected"),o.closeButtons&&"selected"===o.closeButtonMode&&o._disableCloseButton(n)}a.selected=!0,null!==n&&i||a.$.removeClass("smart-visibility-hidden"),o.selectedIndex!==e&&(o.selectedIndex=e),o._tabLabelContainers[e].$.removeClass("smart-tab-hovered"),o._tabLabelContainers[e].$.addClass("smart-tab-selected"),o.closeButtons&&"selected"===o.closeButtonMode&&o._enableCloseButton(e),t&&(o.$.hiddenInput.value=e,o.$.fireEvent("change",{index:e,oldIndex:n})),o._closeGroupDropDown(),null===a.group?o._selectedGroup&&(o._selectedGroup.$.removeClass("smart-tab-group-selected"),delete o._selectedGroup):(!o._selectedGroup||o._selectedGroup.group!==a.group)&&(o._selectedGroup&&o._selectedGroup.$.removeClass("smart-tab-group-selected"),o._selectedGroup=o._groupLabels[o._groups.indexOf(a.group)],o._selectedGroup.$.addClass("smart-tab-group-selected"))}}_selectStartHandler(e){const t=this;(t._reordering||t._resizing)&&e.preventDefault()}_setLabel(e,t,n){const o=document.getElementById(e);if(null!==o&&"template"===o.tagName.toLowerCase()){const e=document.importNode(o.content,!0);if(t.appendChild(e),n){const e=document.importNode(o.content,!0);n.appendChild(e)}}else""===e&&(e="&nbsp;"),t.innerHTML=e,n&&(n.innerHTML=e)}_showCloseButton(e){e.closeButtonEnabled&&(e.firstElementChild.children[0].$.addClass("smart-close-button-enabled"),e.firstElementChild.children[1].$.removeClass("smart-hidden"))}_tabContentSectionTransitionendHandler(e){const t=this,n=e.target;n===t._animatedOldTab?(n.$.addClass("smart-hidden"),n.$.removeClass("animate"),n.$.removeClass(t._animatedOldTab.classToRemove),n.$.removeClass("smart-hidden"),delete t._animatedOldTab):n===t._animatedTab&&(n.$.removeClass("animate"),delete t._animatedTab)}_tabsHeaderItemsWheelHandler(e){const t=this,n=t._orientationSettings;if(!(!t.enableMouseWheelAction||t._wheelInProgress||t.disabled||t.$.tabStrip[n.size]===t.$.tabStrip[n.scrollSize])){e.preventDefault(),t._dragStartDetails={startX:e.pageX,startY:e.pageY,pageX:e.pageX,pageY:e.pageY,startTime:Date.now(),target:e.target},t._wheelInProgress=!0;const o={};o[n.coordinate]=e[n.coordinate]+(0<e.deltaY?-1:1)*n.wheelOffset,t._endSwiping(o,t._dragStartDetails.startTime+100)}}_tabStripHandler(e,t){const n=this,o=t.type;if("down"===o&&void 0!==n._tabToResize)return n._resizing=!0,void(n._tabsHeaderSectionCoordinate=n.$.tabsHeaderSection.getBoundingClientRect()[n._orientationSettings.edge]);"down"===o&&Smart.Utilities.Core.isMobile&&(n._dragStartDetails={startX:t.pageX,startY:t.pageY,pageX:t.pageX,pageY:t.pageY,startTime:Date.now(),originalTime:Date.now(),target:t.originalEvent.target});const i=e.closest("smart-repeat-button");if("up"===o&&i)return n.focus(),void(n.resize&&n._getTabCoordinates());if(e.classList.contains("smart-tab-close-button"))if("up"!==o){if("down"===o)return void(n._downTarget=e);n._reordering||n._swiping||("mouseover"===o?e.$.addClass("smart-tab-close-button-hovered"):"mouseout"===o&&e.$.removeClass("smart-tab-close-button-hovered"))}else if(e===n._downTarget){const t=e.parentElement.parentElement.tab.index,o=n.$.fireEvent("closing",{index:t});return void(o.defaultPrevented||(n.remove(t),n.$.fireEvent("close",{index:t})))}const a=e.closest(".smart-tab-label-container");if(null!==a)return void n._labelContainerHandler(a,t,o);const r=e.closest(".smart-tab-group-container");null!==r&&n._groupContainerHandler(r,o),null!==i&&"down"===o&&n._ripple(t,i)}_tabStripMouseleaveHandler(){const e=this;e.resize&&!e._resizing&&e.hasAttribute("resizing")&&e.removeAttribute("resizing")}_tabStripMoveHandler(e){const t=this;if(t._dragStartDetails&&!t._dragStartDetails.checked&&(t._dragStartDetails.pageX!==e.pageX||t._dragStartDetails.pageY!==e.pageY)&&(500>Date.now()-t._dragStartDetails.originalTime?(t._endReordering(void 0,void 0),t._dragStartDetails.checked=!0):delete t._dragStartDetails),t._dragStartDetails){const n=t._orientationSettings,o=t._dragStartDetails[n.coordinate]-e[n.coordinate],i=t.$.tabStrip[n.scrollDirection];return t.$.tabStrip[n.scrollDirection]+=o,i!==t.$.tabStrip[n.scrollDirection]&&t._updateScrollButtonVisibility(),t._dragStartDetails={startX:t._dragStartDetails.startX,startY:t._dragStartDetails.startY,pageX:e.pageX,pageY:e.pageY,startTime:t._dragStartDetails.startTime,originalTime:t._dragStartDetails.originalTime,target:e.originalEvent.target,checked:t._dragStartDetails.checked},void(t._swiping=!0)}if(!t.resize||t._resizing||t._reordering||"shrink"===t.tabLayout)return;const n=t._orientationSettings,o=e[n.coordinate],a=t._tabCoordinates;let r;for(let s=0;s<a.length;s++){const e=a[s][n.to];if(o>=e-4&&o<=e+4){r=t._reorderItems[s],t._resizeFrom=o;break}}void 0===r?(t._tabToResize=void 0,t.removeAttribute("resizing")):(t._tabToResize=r,t.setAttribute("resizing",""))}_toggleCollapsedState(){const e=this;e.collapsible&&(e.collapsed?e.expand():e.collapse())}_toggleNavigationElementsVisibility(){const e=this,t=e._tabs.length;let n;if(0===t)n="addClass";else if(1===t)n="removeClass";else return;"scroll"===e.tabLayout&&"scroll"===e.overflow?(e.$scrollButtonNear[n]("smart-hidden"),e.$scrollButtonFar[n]("smart-hidden")):"dropdown"===e.tabLayout&&e.$dropDownButton[n]("smart-hidden")}_updateIndexes(e){const t=this;null!==t.selectedIndex&&e<=t.selectedIndex&&t.selectedIndex++,t._updateTabIndexes()}_updateScrollButtonVisibility(){var e=Math.round;const t=this;if("scroll"!==t.tabLayout||"hidden"===t.overflow)return;const n=t.$tabsHeaderSection,o=t.$.tabStrip,i=t._orientationSettings;let a=!0,r=!0;if(0===e(o[i.scrollDirection])&&(a=!1),e(o[i.size]+o[i.scrollDirection])>=e(o[i.scrollSize])&&(r=!1),"auto"===t.overflow){if(a&&r)return t.$scrollButtonNear.removeClass("smart-hidden"),t.$scrollButtonFar.removeClass("smart-hidden"),void n.removeClass("one-button-shown");a?t.$scrollButtonNear.removeClass("smart-hidden"):t.$scrollButtonNear.addClass("smart-hidden"),r?t.$scrollButtonFar.removeClass("smart-hidden"):t.$scrollButtonFar.addClass("smart-hidden"),n.addClass("one-button-shown"),t._getTabCoordinates()}else"scroll"!==t.overflow||t.disabled||(t.$.scrollButtonNear.disabled=!a,t.$.scrollButtonFar.disabled=!r)}_updateTabIndexes(){const e=this;if(0<e._tabs.length)for(let t=0;t<e._tabs.length;t++)e._tabs[t]._setIndex(t);else e.selectedIndex=null}_validateIndex(e,t){if(isNaN(parseInt(e,10))||"object"==typeof e){const e=this;e.error(e.localize("invalidIndex",{method:t}))}}_validateInitialSelection(){const e=this;let t=e.selectedIndex;for(let n=0;n<e._tabs.length;n++){const o=e._tabs[n];t===n?o.selected=!0:o.selected?null===t?t=n:(o.selected=!1,o.$.addClass("smart-visibility-hidden")):o.$.addClass("smart-visibility-hidden")}0<e._tabs.length&&null===t&&(t=0,e._tabs[0].selected=!0,e._tabs[0].$.removeClass("smart-visibility-hidden")),e.selectedIndex=t}});