
/* Smart HTML Elements v1.1.0 (2018-June) 
Copyright (c) 2011-2018 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart.Utilities.Assign("NumericProcessor",class{constructor(e,t){switch(e[t]){case"integer":return new Smart.Utilities.IntegerNumericProcessor(e,t);case"floatingPoint":return new Smart.Utilities.DecimalNumericProcessor(e,t);case"complex":return new Smart.Utilities.ComplexNumericProcessor(e,t);}}}),Smart.Utilities.Assign("BaseNumericProcessor",class{constructor(e,t){const i=this;i.context=e,i._longestLabelSize=0,i.numericFormatProperty=t,i.regexScientificNotation=new RegExp(/^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)(Y|Z|E|P|T|G|M|k|c|m|u|n|p|f|a|z|y){1}$/),i.regexNoLeadingZero=new RegExp(/^(-)?[.]\d+$/),i.regexLeadingZero=new RegExp(/^[+\-]?(0+)[1-9]+|[+\-]?(0{2,})[.]|^(0{2,})$/),i.prefixesToPowers={Y:24,Z:21,E:18,P:15,T:12,G:9,M:6,k:3,c:-2,m:-3,u:-6,n:-9,p:-12,f:-15,a:-18,z:-21,y:-24},i.complexConstructor=window.NIComplex?window.NIComplex:Smart.Utilities.Complex}prepareForValidation(e,t,i){const a=this.context,r=e||void 0!==t;if(i=i.toString(),i=i.replace(/\s/g,""),i=a._discardDecimalSeparator(i),this.regexLeadingZero.test(i)){const e=this.regexLeadingZero.exec(i);i=e[1]?i.replace(e[1],""):e[2]?i.replace(e[2],"0"):i.replace(e[3],"0")}this.regexNoLeadingZero.test(i)?"-"===i.charAt(0)?i="-0"+i.slice(1):i="0"+i:("integer"===a[this.numericFormatProperty]&&(10===a._radixNumber||r)||"floatingPoint"===a[this.numericFormatProperty])&&this.regexScientificNotation.test(i)&&(i=this.scientificToDecimal(i));let n,l=!1;if("complex"===a[this.numericFormatProperty]&&!1===a._regexSpecial.nonNumericValue.test(i))try{if(a._regexSpecial.exaValue.test(i)){const e=i.indexOf("E"),t=1000000000000000000*parseFloat(i.slice(0,e)),a=parseFloat(i.slice(e+1,-1));n=new this.complexConstructor(t,a)}else n=new this.complexConstructor(i);l=!0}catch(e){l=!1}return!1==l&&(!r&&!1===a._regex[a._radixNumber].test(i)||r&&!1===a._regex[10].test(i))?void a._handleNonNumericValue(e,t,i):{value:i,enteredComplexNumber:n}}isENotation(e){const t=new RegExp(/e/i);return t.test(e.toString())}scientificToDecimal(e){const t=this.regexScientificNotation.exec(e),i=t[1],a=t[2],r=parseFloat(i)*Math.pow(10,this.prefixesToPowers[a]);return r}_createMeasureLabel(){const e=this.context,t=document.createElement("div");return t.className="smart-label",t.style.position="absolute",t.style.visibility="hidden",e._measureLabelScale="far"===e.scalePosition?e.$.scaleFar:e.$.scaleNear,e._measureLabelScale.appendChild(t),t}_addMajorTickAndLabel(e,t,i,a,r){const n=this.context,l=n._settings.leftOrTop,o=this.valueToPx(a);let c="",m="";if(parseInt(o)>parseInt(n._measurements.trackLength))return{tick:c,label:m};if(n.logarithmicScale&&(e=n._formatLabel(Math.pow(10,a))),"smart-tank"===n.nodeName.toLowerCase()||n._intervalHasChanged){let t=n._tickIntervalHandler.labelsSize;if(r){n._labelDummy.innerHTML=e;let r=this.valueToPx(a),l=this.valueToPx(n._drawMax),o=this.valueToPx(n._drawMin),c=n._labelDummy[n._settings.size],m="vertical"===n.orientation?n._labelDummy.offsetWidth:n._labelDummy.offsetHeight,s=(c+t.minLabelSize)/2,u=(c+t.maxLabelSize)/2;i=n._normalLayout?r+u<l&&r-s>o:r-u>l&&r+s<o,m>this._longestLabelSize&&(this._longestLabelSize=m)}else this._longestLabelSize=Math.max(t.minLabelOtherSize,t.maxLabelOtherSize,this._longestLabelSize)}if(n._tickValues.push(a),c="<div style=\""+l+": "+o+"px;\" class=\"smart-tick\"></div>",!1!==i){void 0===t&&(n._labelDummy.innerHTML=e,t=n._labelDummy[n._settings.size]);const i=o-t/2;m+="<div class=\"smart-label"+(r?" smart-label-middle":"")+"\" style=\""+l+": "+i+"px;\">"+e+"</div>"}return{tick:c,label:m}}getWordLength(e){return this.context._unsigned="u"===e.charAt(0),"int8"===e||"uint8"===e?8:"int16"===e||"uint16"===e?16:"int32"===e||"uint32"===e?32:"int64"===e||"uint64"===e?64:void 0}getAngleByValue(e,t,i){var a=Math.PI;const r=this.context;!1!==t&&r.logarithmicScale&&(e=Math.log10(e));const n=(e-r._drawMin)*r._angleRangeCoefficient;let l;return l=r.inverted?r.startAngle+n:r.endAngle-n,i?l:l*a/180+a/2}getValueByAngle(e,t){var i=Math.pow;const a=this.context;let r,n,l;for(a.inverted?(r=e,n=a._normalizedStartAngle):(r=a.endAngle,n=e);r<n;)r+=360;if(l=(r-n)/a._angleDifference*a._range+parseFloat(a._drawMin),a.logarithmicScale){if(a.customInterval)return parseFloat(i(10,this.getCoercedValue(l,!0)).toFixed(12));l=i(10,l)}return t&&!a.coerce?Math.round(l):(l=this.createDescriptor(l,void 0,!0,!0),this.getCoercedValue(l,!1))}updateGaugeValue(e){const t=this.context,i=t.value;t.value=e,t._drawValue=t.logarithmicScale?Math.log10(e).toString():e,t._number=this.createDescriptor(t.value),t.$.digitalDisplay.value=e,t.$.fireEvent("change",{value:e,oldValue:i}),delete t._valueBeforeCoercion}validateColorRange(e){const t=this.context;return Math.min(Math.max(e,t.min),t.max)}getActualValue(e){return this.context.logarithmicScale?Math.pow(10,e):e}drawGaugeLogarithmicScaleMinorTicks(e,t,a){var r=Math.pow;const n=this.context;let l;for(let r in t instanceof BigNumberNG&&(t=parseFloat(t.toString())),e)if(l=r,0<=r&&0==r%1)break;for(let o=parseFloat(l);o<n._drawMax;o+=t)for(let e=2;9>=e;e++){const i=e*r(10,o+t-1);i<n.max&&a(i)}for(let o=parseFloat(l);o>n._drawMin;o-=t)for(let e=2;9>=e;e++){const t=e*r(10,o-1);t>n.min&&a(t)}}_getAngleDifference(e,t){const i=Math.abs(t-e)%360,a=180<i?360-i:i;return a}addCustomTicks(){function e(e){const i=a.customTicks[e],o=r?t.createDescriptor(i):Math.log10(i),c=0<e&&e<a.customTicks.length-1,m=t._addMajorTickAndLabel(a._formatLabel(i),void 0,!0,o,c);n+=m.tick,l+=m.label}const t=this,a=t.context,r=!a.logarithmicScale;let n="",l="";if(t._longestLabelSize=0,a._tickValues=[],a._labelDummy=t._createMeasureLabel(),!a._normalLayout)for(let t=a.customTicks.length-1;0<=t;t--)e(t);else for(let t=0;t<a.customTicks.length;t++)e(t);"smart-tank"===a.nodeName.toLowerCase()&&a._updateScaleWidth(t._longestLabelSize),a._appendTicksAndLabelsToScales(n,l)}addGaugeCustomTicks(){function e(e){const i=a.customTicks[e],r=t.createDescriptor(i),o=t.getAngleByValue(r,!0),c=0<e&&e<a.customTicks.length-1;n(o),l(o,i,c)}const t=this,a=t.context,i=a._distance,r=a._measurements.radius-i.majorTickDistance;let n,l;n="none"!==a.ticksVisibility&&!1!==a._plotTicks?function(e){a._drawTick(e,r,"major")}:function(){},l="none"!==a.labelsVisibility&&!1!==a._plotLabels?function(e,t,r){a._drawLabel(e,t,i.labelDistance,r)}:function(){};for(let t=a.customTicks.length-1;0<=t;t--)e(t)}}),Smart.Utilities.Assign("IntegerNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(e,t){super(e,t);const i=this;i.context=e,i.defaultMins={int8:"-128",uint8:"0",int16:"-32768",uint16:"0",int32:"-2147483648",uint32:"0",int64:"-9223372036854775808",uint64:"0"},i.defaultMaxs={int8:"127",uint8:"255",int16:"32767",uint16:"65535",int32:"2147483647",uint32:"4294967295",int64:"9223372036854775807",uint64:"18446744073709551615"}}createDescriptor(e,t,i,a,r){const n=this.context;let l;if(e.constructor!==BigNumberNG){let i=!r&&n._radixNumber?n._radixNumber:10;10===i&&t&&e.constructor!==BigNumberNG&&this.isENotation(e)&&(e=new Smart.Utilities.NumberRenderer(e).largeExponentialToDecimal()),l=n._toBigNumberDecimal?n._toBigNumberDecimal(e.toString(i,n._wordLengthNumber),i):new Smart.Utilities.BigNumber(e)}else l=new Smart.Utilities.BigNumber(e);return i&&(n._unsigned&&-1===l.compare(0)&&(l=l.set(0)),a&&(l=this.validate(l,n._minObject,n._maxObject)),l=this.round(l)),l}round(e){if(64>this.context._wordLengthNumber)return new Smart.Utilities.BigNumber(Math.round(e.toString()));const t=e.mod(1);return 1===t._d.length&&0===t._d[0]||(e=e.intPart(),e._s?5<t._d[1]&&(e=e.add(-1)):4<t._d[1]&&(e=e.add(1))),e}validate(e,t,i){let a;return a=-1===e.compare(t)?t:1===e.compare(i)?i:e,a}validateMinMax(e,t){const i=this.context;let a=this.defaultMins[i.wordLength],r=new Smart.Utilities.BigNumber(a),n=this.defaultMaxs[i.wordLength],l=new Smart.Utilities.BigNumber(n),o="date"!==i.mode;if(void 0===i._numberRenderer&&(i._numberRenderer=new Smart.Utilities.NumberRenderer),e&&o){null!==i.min&&(i.min=i.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(i.min)&&(i.min=this.scientificToDecimal(i.min)));let e=this.round(new Smart.Utilities.BigNumber(i.min));null===i.min||i._minIsNull&&i._initialized||!(0<=e.compare(r))?(i._minIsNull=!0,i.min=a,i._minObject=r):i._minObject=e}if(t&&o){null!==i.max&&(i.max=i.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(i.max)&&(i.max=this.scientificToDecimal(i.max)));let e=this.round(new Smart.Utilities.BigNumber(i.max));null===i.max||i._maxIsNull&&i._initialized||!(0>=e.compare(l))?(i._maxIsNull=!0,i.max=n,i._maxObject=l):i._maxObject=e}o||(i._minObject=new Smart.Utilities.BigNumber(i.min),i._maxObject=new Smart.Utilities.BigNumber(i.max)),this.compare(i._minObject,i._maxObject)||(i._minObject=r,i._maxObject=l,i._drawMin=i.logarithmicScale?0:a,i._drawMax=i.logarithmicScale?10:n,i.min=a,i.max=n),o||(i._minDate=Smart.Utilities.DateTime.fromFullTimeStamp(i.min),i._maxDate=Smart.Utilities.DateTime.fromFullTimeStamp(i.max))}valueToPx(e){const t=this.context,i=new Smart.Utilities.BigNumber(t._measurements.trackLength).divide(new Smart.Utilities.BigNumber(t._range));let a;if(t._normalLayout){const r=t._drawMin instanceof BigNumberNG?t._drawMin:new Smart.Utilities.BigNumber(t._drawMin);e=new Smart.Utilities.BigNumber(e),a=parseFloat(i.multiply(e.subtract(r)).toString())}else{const r=t._drawMax instanceof BigNumberNG?t._drawMax:new Smart.Utilities.BigNumber(t._drawMax);a=parseFloat(this.round(r.subtract(e).multiply(i)).toString())}return a}pxToValue(e){const t=this.context;let i;if(i=t._normalLayout?t._valuePerPx.multiply(e-t._trackStart):t._valuePerPx.multiply(t._trackEnd-e),t.logarithmicScale){let e=parseFloat(i)+parseFloat(t._drawMin);return new Smart.Utilities.BigNumber(Math.round(Math.pow(10,e)))}let a=this.createDescriptor(t._minObject.add(i),!1,!0,!0);return a}compare(e,t,i){if((null===e||null===t)&&e!==t)return!0;e.constructor!==BigNumberNG&&(e=new Smart.Utilities.BigNumber(e));const a=e.compare(t);return!0===i?a:0!==a}incrementDecrement(e,t,i){const a=this.context;let r;if(e.constructor!==BigNumberNG&&(e=new Smart.Utilities.BigNumber(e)),"add"===t){if(r=e.add(i),void 0!==a._drawMax)return 0<r.compare(a._drawMax)?new Smart.Utilities.BigNumber(a._drawMax):r;}else if(r=e.subtract(i),void 0!==a._drawMin)return 0>r.compare(a._drawMin)?new Smart.Utilities.BigNumber(a._drawMin):r;return r}render(e,t){const i=this.context;if(!i.scientificNotation&&!0===t)return new Smart.Utilities.NumberRenderer(new Smart.Utilities.BigNumber(e)).bigNumberToExponent(i.significantDigits);let a=e;return i.scientificNotation&&!0===t?a=new Smart.Utilities.NumberRenderer(a).toScientific(i.significantDigits,i.precisionDigits):"string"!=typeof e&&(a=e.toString(i._radixNumber,i._wordLengthNumber)),a}addTicksAndLabels(){const e=this.context,t=e._measurements.trackLength,i=e._normalLayout,a=e._majorTicksInterval,r=this.round(new Smart.Utilities.BigNumber(e._range).divide(a)),n=t/r,l=new Smart.Utilities.BigNumber(e._drawMin),o=new Smart.Utilities.BigNumber(e._drawMax);let c,m,s,u,d,g,_,b,x,p="",S="";e._tickValues=[],this._longestLabelSize=0,i?(c=l,m=a.add(c.subtract(c.mod(a))),s=m.subtract(c),d=e._formatLabel(l),g=e._tickIntervalHandler.labelsSize.minLabelSize,u=o,_=e._formatLabel(o),b=e._tickIntervalHandler.labelsSize.maxLabelSize):(c=o,m=c.subtract(c.mod(a)),s=c.subtract(m),d=e._formatLabel(o),g=e._tickIntervalHandler.labelsSize.maxLabelSize,u=l,_=e._formatLabel(l),b=e._tickIntervalHandler.labelsSize.minLabelSize),e._labelDummy=this._createMeasureLabel(),x=this._addMajorTickAndLabel(d,g,!0,c),p+=x.tick,S+=x.label;const f=s.divide(a).multiply(n);if(0!==m.compare(e.max)&&0>f.compare(t)){const t=e._formatLabel(m.toString()),i=0<f.compare(g);x=this._addMajorTickAndLabel(t,void 0,i,m,!0),p+=x.tick,S+=x.label}x=this.addMiddleMajorTicks(r,n,f,s,i,a),p+=x.tick,S+=x.label,x=this._addMajorTickAndLabel(_,b,!0,u),p+=x.tick,S+=x.label,"date"!==e.mode&&(p+=this.addMinorTicks(i)),e._measureLabelScale.removeChild(e._labelDummy),delete e._labelDummy,delete e._measureLabelScale,"smart-tank"===e.nodeName.toLowerCase()&&e._updateScaleWidth(this._longestLabelSize),e._appendTicksAndLabelsToScales(p,S)}addMiddleMajorTicks(e,t,a,r,n,l){const o=this.context;let c,i="",m="";for(let s=1;s<e;s++){let u,d=a.add(s*t);if(n?u=l.multiply(s).add(r.add(new Smart.Utilities.BigNumber(o._drawMin))):(u=new Smart.Utilities.BigNumber(o._drawMax).subtract(r).subtract(l.multiply(s)),s==e-1&&0===u.compare(0)&&(o._numberRenderer.numericValue=o._tickIntervalHandler.nearestPowerOfTen,c=o._numberRenderer.bigNumberToExponent(1))),0!==u.compare(o._drawMax)){let a=o._formatLabel(u.toString()),r=!0;o._labelDummy.innerHTML=c?c:a;let n=o._labelDummy[o._settings.size];0<=d.add(n).compare(e*t)&&(r=!1);const l=this._addMajorTickAndLabel(a,void 0,r,u,!0);i+=l.tick,m+=l.label}}return{tick:i,label:m}}addMinorTicks(e){function t(e){-1===n.indexOf(e)&&0==e%o&&(d+="<div style=\""+c+": "+r._numericProcessor.valueToPx(e)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}function i(){let e=r._measurements.trackLength,t=e/n.length,i=.1;20>t?i=1:20<=t&&40>t?i=1<s-m?1:.5:40<=t&&80>t&&(i=.2);let l=Math.floor(r._drawMax),o=r._drawMax-l,u=r._drawMax-r._drawMin>n.length;for(let e=r._drawMax;0<e;--e){let t=0<o?a(10,e-o+1):a(10,e),n=t*i;for(let e=t;0<e;e-=n)if(e<r.max&&e>r.min){let t=new Smart.Utilities.BigNumber(Math.log10(e));(0==t%1&&u||!u)&&(d+="<div style=\""+c+": "+r._numericProcessor.valueToPx(t)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}}}var a=Math.pow;const r=this.context,n=r._tickValues,l=r._tickIntervalHandler.nearestPowerOfTen,o=r._minorTicksInterval,c=r._settings.leftOrTop;let m,s,u,d="";if(e?(m=n[0],s=n[1],u=n[n.length-1]):(m=n[n.length-1],s=n[n.length-2],u=n[0]),r.logarithmicScale)i();else{for(let e=s;0>m.compare(e);e=e.subtract(l))t(e);for(let e=s.add(l);0<u.compare(e);e=e.add(l))t(e)}return d}validateCustomTicks(){const e=this.context,t="date"!==e.mode;let a=[];for(let r,n=0;n<e.customTicks.length;n++)r=e.customTicks[n],t?r=this.createDescriptor(r,!1,!0):void 0===r._d&&(r=Smart.Utilities.DateTime.validateDate(r).getTimeStamp()),0<=r.compare(e._minObject)&&0>=r.compare(e._maxObject)&&a.push(r);if(a.sort(function(e,t){return e.compare(t)}),t){for(let e=0;e<a.length;e++)a[e]=a[e].toString();a=a.filter(function(e,t,i){return!t||e!==i[t-1]})}e.customTicks=a.slice(0)}addGaugeTicksAndLabels(){var e=Math.PI;const t=this.context,a=this,r=Math.max(t._tickIntervalHandler.labelsSize.minLabelSize,t._tickIntervalHandler.labelsSize.maxLabelSize),n=t._majorTicksInterval,l=t._minorTicksInterval,o={},c=t._distance,m=t._measurements.radius,s=m-c.majorTickDistance,u=m-c.minorTickDistance,d=new Smart.Utilities.BigNumber(t._drawMin),g=new Smart.Utilities.BigNumber(t._drawMax);let _,b,x,p,S,f;"none"!==t.ticksVisibility&&!1!==t._plotTicks?(_=function(e){t._drawTick(e,s,"major")},b=function(e){t._drawTick(a.getAngleByValue(e,!0),u,"minor")}):(_=function(){},b=function(){}),x="none"!==t.labelsVisibility&&!1!==t._plotLabels?function(e,i,a){t._drawLabel(e,i,c.labelDistance,a)}:function(){},t.inverted?(S=t.startAngle,f=t.endAngle):(S=t.endAngle,f=t.startAngle),p=a.getAngleByValue(d,!1),_(p),o[t._drawMin.toString()]=!0,x(p,t.min,!1);let v,h=d.subtract(d.mod(n));-1!==d.compare(0)&&(h=h.add(n));for(let e=new Smart.Utilities.BigNumber(h);-1!==e.compare(d);e=e.subtract(l))v=e;p=a.getAngleByValue(h,!1),_(p),o[h.toString()]=!0,2*e*t._measurements.innerRadius*(this._getAngleDifference(S,a.getAngleByValue(h,!1,!0))/360)>r&&x(p,this.getActualValue(h),-1===h.compare(g));let N;for(N=h.add(n);-1===N.compare(g.subtract(n));N=N.add(n))p=a.getAngleByValue(N,!1),_(p),o[N.toString()]=!0,x(p,this.getActualValue(N),!0);if(void 0===o[N.toString()]&&1!==N.compare(g)&&(p=a.getAngleByValue(N,!1),_(p),o[N.toString()]=!0,2*e*t._measurements.innerRadius*(this._getAngleDifference(f,a.getAngleByValue(N,!1,!0))/360)>=r&&x(p,this.getActualValue(N),!0),t._normalizedStartAngle!==t.endAngle&&(p=a.getAngleByValue(g,!1),_(p),2*e*t._measurements.innerRadius*(this._getAngleDifference(f,S)/360)>=r&&x(p,t.max,!1))),"date"!==t.mode)if(!t.logarithmicScale)for(let e=v;-1===e.compare(g);e=e.add(l))o[e.toString()]||b(e);else this.drawGaugeLogarithmicScaleMinorTicks(o,n,b)}updateToolTipAndValue(e,t,i){const a=this.context,r=a.logarithmicScale;a._updateTooltipValue(e.toString()),r&&(e=parseFloat(Math.pow(10,parseFloat(e)).toFixed(11))),e=e instanceof BigNumberNG?e:new Smart.Utilities.BigNumber(e);const n=e.toString();a._number=e,a._drawValue=r?Math.log10(n):e,0!==e.compare(t)&&i&&("numeric"===a.mode?(a.value=n,e=n):(t=a._valueDate,a._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(n),a.value=e,e=a._valueDate),!a._programmaticValueIsSet&&a.$.fireEvent("change",{value:e,oldValue:t}),a.$.hiddenInput&&(a.$.hiddenInput.value=e))}validateInterval(e){const t=this.context,i=t._maxObject.subtract(t._minObject);t._validInterval=new Smart.Utilities.BigNumber(e),t._validInterval=this.round(t._validInterval),1===t._validInterval.compare(i)&&(t._validInterval=i),t.interval=t._validInterval.toString()}getCoercedValue(e,t,i){var a=Math.abs;const r=this.context;if(!r.coerce)return e;const n=!r.logarithmicScale;e=e instanceof BigNumberNG?e:new Smart.Utilities.BigNumber(e);let l,o;if(r.customInterval){const t=r.customTicks;if(0===t.length)return e;let o,c;if(n||i){l=r._minObject,o=l.subtract(e).abs(),c=l;for(let a=0;a<t.length;a++){const i=this.createDescriptor(t[a]),r=i.subtract(e).abs();-1===r.compare(o)&&(o=r,c=i)}}else{l=r._drawMin,o=a(l-parseFloat(e.toString())),c=l;for(let r=0;r<t.length;r++){const i=Math.log10(t[r]),n=a(i-e);n<o&&(o=n,c=i)}c=new Smart.Utilities.BigNumber(c)}return c}let c=r._validInterval;if("date"===r.mode){if("addYears"===r._dateIncrementMethod)return this.coerceYear(e);if("addMonths"===r._dateIncrementMethod)return this.coerceMonth(e);c=new Smart.Utilities.BigNumber(r._dateIntervalNumber).multiply(c)}!1===t?(l=new Smart.Utilities.BigNumber(r.min),o=new Smart.Utilities.BigNumber(r.max)):(l=new Smart.Utilities.BigNumber(r._drawMin),o=new Smart.Utilities.BigNumber(r._drawMax));let m=e.subtract(l),s=m.mod(c);if(0===s.compare(0))return e;let u=m.subtract(s),d=u.add(c);if(0>m.subtract(u).abs().compare(m.subtract(d).abs()))return u.add(l);else{const e=d.add(l);return 0>=e.compare(o)?e:u.add(l)}}coerceMonth(e){const t=this.context,i=parseFloat(t._validInterval),a=Smart.Utilities.DateTime.fromFullTimeStamp(e),r=a.year(),n=a.month(),l=a.day(),o=t._minDate.year(),c=t._minDate.month(),m=12*(t._maxDate.year()-o-1)+12-c+t._maxDate.month();let s=12*(r-1-o)+(12-c)+n;1===i&&(-1===[1,3,5,7,8,10,12].indexOf(n)?2===n?a.isLeapYear(r)?(15<l||15===l&&11<a.hour())&&s++:14<l&&s++:15<l&&s++:(16<l||16===l&&11<a.hour())&&s++),s=this.getCoercedTimePart(0,m,s,i);let u=t._minDate.addMonths(s,!0);return 1===u.compare(t._maxDate)&&(u=t._minDate.addMonths(s-i,!0)),t._drawValue=new Smart.Utilities.BigNumber(u.getTimeStamp()),t._drawValue}coerceYear(e){const t=this.context,i=parseFloat(t._validInterval),a=Smart.Utilities.DateTime.fromFullTimeStamp(e),r=t._maxDate.year(),n=Smart.Utilities.DateTime.getConstructorParameters(t._minDate);let l=a.year();6<a.month()&&l++;let o=this.getCoercedTimePart(t._minDate.year(),r,l,i);o>r&&(o-=i),n[0]=o,n.unshift(null);const c=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,n));return t._drawValue=new Smart.Utilities.BigNumber(c.getTimeStamp()),t._drawValue}getCoercedTimePart(e,t,i,a){var r=Math.abs;let n=i-e,l=n%a;if(0==l)return i;let o=parseFloat((n-l).toFixed(12)),c=o+a;if(t-e<=a)return i>=e+(t-e)/2?t:e;if(r(n-o)<r(n-c))return o+e;else{const i=c+e;return i>t?o+e:i}}updateValue(e){const t=this.context;e=e instanceof BigNumberNG?e:new Smart.Utilities.BigNumber(e);const i=this.validate(e,t._minObject,t._maxObject);let a=t._number;t._number=i,t._drawValue=t.logarithmicScale?Math.log10(i):i,"numeric"===t.mode?t.value=e.toString():(a=t._valueDate,t._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(e),t.value=e,e=t._valueDate),!t._programmaticValueIsSet&&(this.compare(e,t._number)||t._scaleTypeChangedFlag)&&t.$.fireEvent("change",{value:e,oldValue:a}),t.$.hiddenInput&&(t.$.hiddenInput.value=e),t._moveThumbBasedOnValue(t._drawValue)}getValuePerPx(e,t){return new Smart.Utilities.BigNumber(e).divide(t)}restrictValue(e){e[1].constructor===BigNumberNG?-1===e[1].compare(e[0])&&e[1].set(e[0]):e[1]<e[0]&&(e[1]=e[0])}getAngleByValue(e,t,i){var a=Math.PI;const r=this.context;if(64>r._wordLengthNumber)return super.getAngleByValue(parseFloat(e.toString()),t,i);!1==e instanceof BigNumberNG&&(e=new Smart.Utilities.BigNumber(e)),!1!==t&&r.logarithmicScale&&(e=new Smart.Utilities.BigNumber(Math.log10(e.toString())));const n=e.subtract(r._drawMin).multiply(r._angleRangeCoefficient);let l;return l=r.inverted?n.add(r.startAngle):n.multiply(-1).add(r.endAngle),l=parseFloat(l.toString()),i?l:l*a/180+a/2}getValueByAngle(e){const t=this.context;if(64>t._wordLengthNumber)return super.getValueByAngle(e,!0);let i,a,r;for(t.inverted?(i=e,a=t._normalizedStartAngle):(i=t.endAngle,a=e);i<a;)i+=360;return r=new Smart.Utilities.BigNumber((i-a)/t._angleDifference).multiply(t._range).add(t._drawMin),t.logarithmicScale&&(r=new Smart.Utilities.BigNumber(Math.pow(10,r.toString()))),t.coerce?this.getCoercedValue(r,!1):this.round(r)}updateGaugeValue(e){!1==e instanceof BigNumberNG&&super.updateGaugeValue(e);const t=this.context,i=t._getEventValue();"numeric"===t.mode?(t.value=e.toString(),t.$.digitalDisplay.value=t.value):(t._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(e),t.value=e),t._drawValue=t.logarithmicScale?Math.log10(t.value).toString():t.value,t._number=e,t.$.fireEvent("change",{value:t._getEventValue(),oldValue:i})}validateColorRange(e){const t=this.context;if(64>t._wordLengthNumber)return super.validateColorRange(e);"numeric"===t.mode?e=new Smart.Utilities.BigNumber(e):(e=Smart.Utilities.DateTime.validateDate(e),e=e.getTimeStamp());const i=new Smart.Utilities.BigNumber(t.min),a=new Smart.Utilities.BigNumber(t.max);return-1===e.compare(i)&&(e=i),1===e.compare(a)&&(e=a),e}lockRotation(e,t){const i=this.context;if(!1==t instanceof BigNumberNG&&(t=new Smart.Utilities.BigNumber(t)),e&&-1===t.compare(i._number)){if(i._lockCW=!0,-1===t.compare(i._maxObject))return new Smart.Utilities.BigNumber(i._maxObject);}else if(!e&&1===t.compare(i._number)&&(i._lockCCW=!0,1===t.compare(i._minObject)))return new Smart.Utilities.BigNumber(i._minObject)}getAngleRangeCoefficient(){const e=this.context;e._angleRangeCoefficient=new Smart.Utilities.BigNumber(e._angleDifference).divide(e._range)}}),Smart.Utilities.Assign("DecimalNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(e,t){super(e,t),this.context=e}getPreciseModulo(e,t,i){var a=Math.abs,r=Math.round;const n=0<=e?1:-1;if(e=a(e),t=a(t),"undefined"==typeof i){const i=e.toExponential(),r=t.toExponential(),l=parseInt(i.slice(i.indexOf("e")+1),10),o=parseInt(r.slice(r.indexOf("e")+1),10),c=0>l?a(l):0,m=0>o?a(o):0,s=Math.max(c,m);if(this.roundCoefficient=s,e<t)return n*e;if(e===t)return 0;if((-1>e||1<e)&&(-1>t||1<t||1===t))return 0==e%1&&0==t%1?n*(e%t):n*parseFloat(new Smart.Utilities.BigNumber(e).mod(t).toString());const u=Math.pow(10,s);return n*(e*u%(t*u)/u)}return n*(r(e*i)%r(t*i))}createDescriptor(e,t,i,a){let r=parseFloat(e);return a&&(r=this.validate(r,this.context._minObject,this.context._maxObject)),r}validate(e,t,i){let a;return a=e<t?t:e>i?i:e,a}validateMinMax(e,t){const i=this.context,a="undefined"!=typeof i._regexSpecial&&i._regexSpecial.inf.test(i.min),r="undefined"!=typeof i._regexSpecial&&i._regexSpecial.inf.test(i.max);e&&(null===i.min||a?(i.min=-Infinity,i._minObject=-Infinity):(i.min=i.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(i.min)&&(i.min=this.scientificToDecimal(i.min)),i._minObject=i._discardDecimalSeparator(i.min))),t&&(null===i.max||r?(i.max=1/0,i._maxObject=1/0):(i.max=i.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(i.max)&&(i.max=this.scientificToDecimal(i.max)),i._maxObject=i._discardDecimalSeparator(i.max))),this.compare(i._minObject,i._maxObject)||(i._maxObject=parseFloat(i._maxObject)+1,i.max=i._maxObject)}valueToPx(e){const t=this.context,i=t._measurements.trackLength/t._range;let a;return a=t._normalLayout?i*(e-t._drawMin):i*(t._drawMax-e),Math.round(a)}pxToValue(e){const t=this.context;let i;if(i=t._normalLayout?(e-t._trackStart)*t._valuePerPx:(t._trackEnd-e)*t._valuePerPx,t.logarithmicScale){const e=i+parseFloat(t._drawMin);return Math.pow(10,e)}return this.validate(i+t._minObject,t._minObject,t._maxObject)}compare(e,t,i){return!0===i?e<t?-1:e>t?1:0:e!==t}incrementDecrement(e,t,i){const a=this.context;let r;if("add"===t){if(r=parseFloat(e)+parseFloat(i),void 0!==a._drawMax)return r>parseFloat(a._drawMax)?a._drawMax:r;}else if(r=parseFloat(e)-parseFloat(i),void 0!==a._drawMin)return r<parseFloat(a._drawMin)?a._drawMin:r;return r}render(e){const t=this.context,i="undefined"!=typeof t._regexSpecial&&t._regexSpecial.nonNumericValue.test(e);if(i)return e;else{const i=new Smart.Utilities.NumberRenderer(e);return t.scientificNotation?i.toScientific(t.significantDigits,t.precisionDigits):i.toDigits(t.significantDigits,t.precisionDigits)}}addTicksAndLabels(){const e=this.context,t=e._measurements.trackLength,i=e._normalLayout,a=e._majorTicksInterval,r=Math.round(e._range/parseFloat(a.toString())),n=t/r,l=parseFloat(e._drawMin),o=parseFloat(e._drawMax);let c,m,s,u,d,g,_,b,x,p="",S="";e._tickValues=[],this._longestLabelSize=0,i?(c=l,m=e.logarithmicScale&&0>l&&-1!==l?parseFloat(c-this.getPreciseModulo(c,a)):parseFloat(c-this.getPreciseModulo(c,a)+parseFloat(a)),s=m-c,d=e._formatLabel(l),g=e._tickIntervalHandler.labelsSize.minLabelSize,u=o,_=e._formatLabel(o),b=e._tickIntervalHandler.labelsSize.maxLabelSize):(c=o,m=parseFloat(c-this.getPreciseModulo(c,a)),s=c-m,d=e._formatLabel(o),g=e._tickIntervalHandler.labelsSize.maxLabelSize,u=l,_=e._formatLabel(l),b=e._tickIntervalHandler.labelsSize.minLabelSize),e._labelDummy=this._createMeasureLabel(),x=this._addMajorTickAndLabel(d,g,!0,c),p+=x.tick,S+=x.label;const f=s/a*n;if(m.toString()!==e._drawMax.toString()&&f<t){const t=e._formatLabel(m.toString()),i=g<f;x=this._addMajorTickAndLabel(t,void 0,i,m,!0),p+=x.tick,S+=x.label}x=this.addMiddleMajorTicks(r,n,f,s,i,a),p+=x.tick,S+=x.label,x=this._addMajorTickAndLabel(_,b,!0,u),p+=x.tick,S+=x.label,p+=this.addMinorTicks(i),e._measureLabelScale.removeChild(e._labelDummy),delete e._labelDummy,delete e._measureLabelScale,"smart-tank"===e.nodeName.toLowerCase()&&e._updateScaleWidth(this._longestLabelSize),e._appendTicksAndLabelsToScales(p,S)}addMiddleMajorTicks(e,t,a,r,n,l){const o=this.context;let i="",c="";for(let m=1;m<e;m++){let s,u=m*t+a;if(s=n?parseFloat(o._drawMin)+l*m+r:parseFloat(o._drawMax)-l*m-r,s.toString()!==o._drawMax.toString()){let a=o._formatLabel(s.toString()),r=!0;o._labelDummy.innerHTML=a;let n=o._labelDummy[o._settings.size];u+n>=e*t&&(r=!1);const l=this._addMajorTickAndLabel(a,void 0,r,s,!0);i+=l.tick,c+=l.label}}return{tick:i,label:c}}addMinorTicks(e){function t(e){return parseFloat(e.toFixed(s))}function a(e){-1===o.indexOf(e)&&0===l._numericProcessor.getPreciseModulo(e,m,u)&&(x+="<div style=\""+d+": "+l._numericProcessor.valueToPx(e)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}function i(){let e=l._measurements.trackLength,t=e/o.length,i=.1;20>t?i=1:20<=t&&40>t?i=1<_-g?1:.5:40<=t&&80>t&&(i=.2);let a=Math.floor(l._drawMax),c=l._drawMax-a,m=l._drawMax-l._drawMin>o.length;for(let e=l._drawMax;e>l._drawMin-1;--e){let t=0<c?n(10,e-c+1):n(10,e),a=t*i;for(let e=t;0<e;e-=a)if(e<l.max&&e>l.min){let t=new Smart.Utilities.BigNumber(r(e));(0==t%1&&m||!m)&&(x+="<div style=\""+d+": "+l._numericProcessor.valueToPx(t)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}}}var r=Math.log10,n=Math.pow;const l=this.context,o=l._tickValues,c=l._tickIntervalHandler.nearestPowerOfTen,m=l._minorTicksInterval,s=0>r(c)?Math.round(Math.abs(r(c))):0,u=n(10,s),d=l._settings.leftOrTop;let g,_,b,x="";if(e?(g=o[0],_=o[1],b=o[o.length-1]):(g=o[o.length-1],_=o[o.length-2],b=o[0]),l.logarithmicScale)i();else{for(let e=_;e>g;e=t(e-c))a(e);for(let e=t(_+c);e<b;e=t(e+c))a(e)}return x}validateCustomTicks(){const e=this.context;let t=[];for(let a=0;a<e.customTicks.length;a++){const i=e.customTicks[a],r=this.createDescriptor(i);r>=e._minObject&&r<=e._maxObject&&t.push(r.toString())}t.sort(function(e,t){return e-t}),t=t.filter(function(e,t,i){return!t||e!==i[t-1]}),e.customTicks=t.slice(0)}addGaugeTicksAndLabels(){var e=Math.PI;const t=this.context,a=this,r=Math.max(t._tickIntervalHandler.labelsSize.minLabelSize,t._tickIntervalHandler.labelsSize.maxLabelSize),n=t._majorTicksInterval,l=t._minorTicksInterval,o={},c=t._distance,m=t._measurements.radius,s=m-c.majorTickDistance,u=m-c.minorTickDistance;let d,g,_,b,x,p;"none"!==t.ticksVisibility&&!1!==t._plotTicks?(d=function(e){t._drawTick(e,s,"major")},g=function(e){t._drawTick(a.getAngleByValue(e,!0),u,"minor")}):(d=function(){},g=function(){}),_="none"!==t.labelsVisibility&&!1!==t._plotLabels?function(e,i,a){t._drawLabel(e,i,c.labelDistance,a)}:function(){},t.inverted?(x=t.startAngle,p=t.endAngle):(x=t.endAngle,p=t.startAngle),b=a.getAngleByValue(t._drawMin,!1),d(b),o[t._drawMin]=!0,_(b,t.min,!1);let S,f=t._drawMin-a.getPreciseModulo(t._drawMin,n);0<=t._drawMin&&(f+=n);for(let e=f;e>=t._drawMin;e-=l)S=e;b=a.getAngleByValue(f,!1),d(b),o[f]=!0,2*e*t._measurements.innerRadius*(this._getAngleDifference(x,a.getAngleByValue(f,!1,!0))/360)>r&&_(b,this.getActualValue(f),f<t._drawMax);let v;for(v=f+n;v<t._drawMax-n;v+=n)b=a.getAngleByValue(v,!1),d(b),o[v]=!0,_(b,this.getActualValue(v),!0);if(void 0===o[v]&&v<=t._drawMax&&(b=a.getAngleByValue(v,!1),d(b),o[v]=!0,2*e*t._measurements.innerRadius*(this._getAngleDifference(p,a.getAngleByValue(v,!1,!0))/360)>=r&&_(b,this.getActualValue(v),!0),t._normalizedStartAngle!==t.endAngle&&(b=a.getAngleByValue(t._drawMax,!1),d(b),o[t._drawMax]=!0,2*e*t._measurements.innerRadius*(this._getAngleDifference(p,x)/360)>=r&&_(b,t.max,!1))),!t.logarithmicScale)for(let e=S;e<t._drawMax;e+=l)o[e]||g(e);else this.drawGaugeLogarithmicScaleMinorTicks(o,n,g)}updateToolTipAndValue(e,t,i){const a=this.context,r=a.logarithmicScale;a._updateTooltipValue(e),r&&(e=parseFloat(Math.pow(10,parseFloat(e)).toFixed(11)));const n=e.toString();a._number=e,a._drawValue=r?Math.log10(n):e,n!==t&&i&&(a.value=a._discardDecimalSeparator(n),!a._programmaticValueIsSet&&a.$.fireEvent("change",{value:a.value,oldValue:t}),a.$.hiddenInput&&(a.$.hiddenInput.value=a.value))}validateInterval(e){const t=this.context,i=t._maxObject-t._minObject;t._validInterval=Math.min(parseFloat(e),i),t.interval=t._validInterval}getCoercedValue(e,t,i){var a=Math.abs;const r=this.context;if(!r.coerce)return e;let n,l,o=!r.logarithmicScale;if(r.customInterval){const l=r.customTicks;if(0===l.length)return e;o=o||i,n=!1===t?r._minObject:parseFloat(r._drawMin);let c=a(n-e),m=n;for(let t=0;t<l.length;t++){const i=this.createDescriptor(l[t]),r=o?i:Math.log10(i),n=a(r-e);n<c&&(c=n,m=r)}return m}!1===t?(n=parseFloat(r.min),l=parseFloat(r.max)):(n=parseFloat(r._drawMin),l=parseFloat(r._drawMax));let c=e-n,m=this.getPreciseModulo(c,parseFloat(r.interval)),s=this.roundCoefficient;if(0===m)return e;0===this.roundCoefficient&&(s=12);let u=parseFloat((c-m).toFixed(s)),d=u+parseFloat(r.interval);if(r.max-r.min<=parseFloat(r.interval)&&o){let t=n,i=l;return e>=t+(i-t)/2?i:t}if(a(c-u)<a(c-d))return u+n;else{const e=d+n;return e>l?u+n:e}}updateValue(e){const t=this.context,i=this.validate(e,t._minObject,t._maxObject),a=t._number.toString();e.toString()!==a.toString()||t._scaleTypeChangedFlag?(t.value=e.toString(),t._number=i,!t._programmaticValueIsSet&&t.$.fireEvent("change",{value:t.value,oldValue:a})):t.value="string"==typeof e?e:e.toString(),t._drawValue=t.logarithmicScale?Math.log10(i).toString():i.toString(),t._moveThumbBasedOnValue(t._drawValue),t.$.hiddenInput&&(t.$.hiddenInput.value=t.value)}getValuePerPx(e,t){return parseFloat(e)/t}restrictValue(e){e[1]<e[0]&&(e[1]=e[0])}lockRotation(e,t){const i=this.context;if(e&&t<i._number){if(i._lockCW=!0,t<i._maxObject)return i._maxObject;}else if(!e&&t>i._number&&(i._lockCCW=!0,t>i._minObject))return i._minObject}getAngleRangeCoefficient(){const e=this.context;e._angleRangeCoefficient=e._angleDifference/e._range}}),Smart.Utilities.Assign("ComplexNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(e,t){super(e,t),this.context=e}createDescriptor(e,t,i,a,r,n){let l;return l=n?n:e.constructor===this.complexConstructor?new this.complexConstructor(e.realPart,e.imaginaryPart):new this.complexConstructor(e),a&&(l=this.validate(l,this.context._minObject,this.context._maxObject)),l}validate(e,t,i){let a=e;return t===-Infinity?i!==1/0&&1===this.compareComplexNumbers(e,i)&&(a=new this.complexConstructor(i.realPart,i.imaginaryPart)):-1===this.compareComplexNumbers(e,t)&&(a=new this.complexConstructor(t.realPart,t.imaginaryPart)),a}compare(e,t,i){return!0===i?this.compareComplexNumbers(e,t):0!==this.compareComplexNumbers(e,t)}validateMinMax(e,t){const i=this.context;e&&(null===i.min||i._regexSpecial.inf.test(i.min)?(i.min=-Infinity,i._minObject=-Infinity):i._minObject=new this.complexConstructor(i.min)),t&&(null===i.max||i._regexSpecial.inf.test(i.max)?(i.max=1/0,i._maxObject=1/0):i._maxObject=new this.complexConstructor(i.max))}incrementDecrement(e,t){let i=new this.complexConstructor(e.realPart,e.imaginaryPart),a=this.context._spinButtonsStepObject;return"add"===t?(i.realPart+=a.realPart,i.imaginaryPart+=a.imaginaryPart):(i.realPart-=a.realPart,i.imaginaryPart-=a.imaginaryPart),i}render(e){let t=e;if(!1===this.context._regexSpecial.nonNumericValue.test(e)){let e,i=t.realPart,a=t.imaginaryPart,r=this.context.significantDigits,n=this.context.precisionDigits;0<=a?e="+":(e="-",a=Math.abs(a));const l=new Smart.Utilities.NumberRenderer(i),o=new Smart.Utilities.NumberRenderer(a);this.context.scientificNotation?(i=l.toScientific(r,n),a=o.toScientific(r,n)):(i=l.toDigits(r,n),a=o.toDigits(r,n)),t=`${i} ${e} ${a}i`}return t}compareComplexNumbers(e,t){if(!1==e instanceof this.complexConstructor||!1==t instanceof this.complexConstructor)return-1;const i=e.realPart,a=t.realPart;if(i<a)return-1;if(i>a)return 1;else{const i=e.imaginaryPart,a=t.imaginaryPart;return i<a?-1:i>a?1:0}}}),Smart.Utilities.Assign("NumberRenderer",class{constructor(e){const t=this;t.numericValue=e,t.powersToPrefixes={24:"Y",21:"Z",18:"E",15:"P",12:"T",9:"G",6:"M",3:"k",0:"","-2":"c","-3":"m","-6":"u","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},t.localizationObject={currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",defaultPrecision:2}}isENotation(e){return new RegExp(/e/i).test(e)}largeExponentialToDecimal(e){e===void 0&&(e=this.numericValue);let t=e.toString().toLowerCase(),i=t.indexOf("e"),a=new Smart.Utilities.BigNumber(t.slice(0,i)),r=t.slice(i+2),n=t.slice(i+1,i+2),l=new Smart.Utilities.BigNumber(10),o=l.pow(n+r),c=a.multiply(o);return c.toString()}bigNumberToExponent(e,t){let i=this.numericValue;i.constructor!==BigNumberNG&&(i=new Smart.Utilities.BigNumber(i));const a=i._f;let r=i.toString();if(10>=a)return t?parseFloat(r).toExponential(e-1):new Smart.Utilities.NumberRenderer(parseFloat(r)).toDigits(e);if(e>=a&&!t)return r;else{let n;!1===i._s?n="":(n="-",r=r.slice(1));const l=parseFloat(r.slice(e,e+1));5<=l&&(r=new Smart.Utilities.BigNumber(r.slice(0,e)).add(1).toString());let o=r.slice(1,e);if(t)e--,0<o.length&&e>o.length?o+="0".repeat(e-o.length):0===o.length&&(o="0".repeat(e));else for(;0<o.length&&"0"===o.charAt(o.length-1);)o=o.slice(0,o.length-1);const c=0<o.length?".":"";return n+r.slice(0,1)+c+o+"E+"+(a-1)}}toScientific(){const e=this;if(e.numericValue._d)return e.bigNumberToScientific(arguments[0],arguments[1]);const t=(+e.numericValue.toString()).toExponential(),i=t.indexOf("e"),a=t.slice(i+1);let r=parseFloat(t.slice(0,i));if("-2"===a)return r+"c";const n=parseInt(a,10)%3;if(0<n)for(let e=0;e<n;e++)r*=10;else 0>n&&(r=parseFloat(new Smart.Utilities.BigNumber(r).multiply(Math.pow(10,n)).toString()));if(0<a){const e=0<=r?0:1,a=t.slice(e,i).length-n-2;0<=a&&(r=r.toFixed(a))}const l=new Smart.Utilities.NumberRenderer(r);r=l.toDigits(arguments[0],arguments[1]);const o=parseInt(a,10)-n,c=r+e.powersToPrefixes[o.toString()];return c}bigNumberToScientific(){const e=this,t=e.numericValue._f-1,i=parseInt(t,10)%3,a=parseInt(t,10)-i;let r,n,l=e.numericValue.toString();if("-"===l.charAt(0)?(r="-",l=l.slice(1)):r="",null!==arguments[0])for(n=l.slice(0,arguments[0]),5<=parseFloat(l.slice(arguments[0],arguments[0]+1))&&(n=new Smart.Utilities.BigNumber(n).add(1).toString());n.length>1+i&&"0"===n.charAt(n.length-1);)n=n.slice(0,n.length-1);else null!==arguments[1]&&(n=l.slice(0,arguments[1]+1),5<=parseFloat(l.slice(arguments[1]+1,arguments[1]+2))&&(n=new Smart.Utilities.BigNumber(n).add(1).toString()),arguments[1]+i>n.length-1&&(n+="0".repeat(arguments[1]+i-n.length+1)));return n.length>1+i&&(n=n.slice(0,1+i)+"."+n.slice(1+i)),r+n+e.powersToPrefixes[a.toString()]}toDigits(e,t){const i=this;let a;return a=null===e?null===t?i.applySignificantDigits(8):i.applyPrecisionDigits(t):i.applySignificantDigits(e),a}applySignificantDigits(e){function t(e){for(;"0"===e.charAt(e.length-1);)e=e.slice(0,-1);return"."===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e}const i=this;e=Math.max(1,Math.min(e,21));let a=parseFloat(i.numericValue).toPrecision(e).toUpperCase();if(-1!==a.indexOf("."))if(i.isENotation(a)){const e=a.indexOf("."),i=a.indexOf("E");let r=a.slice(e,i);r=t(r),a=a.slice(0,e)+r+a.slice(i)}else a=t(a);return a}applyPrecisionDigits(e){const t=this;e=Math.max(0,Math.min(e,20));let i=parseFloat(t.numericValue).toFixed(e);return t.isENotation(i)&&(i=t.largeExponentialToDecimal(i)+"."+"0".repeat(e)),i}getLogarithm(e){var t=Math.log;const i=this.numericValue;let a;if(void 0===e&&(e=10),10===e)try{a=Math.log10(i)}catch(e){a=t(i)/2.302585092994046}else a=t(i)/t(e);return a}applySeparators(e,t){const i=this,a=e.indexOf(".");if(-1!==a){const r=e.slice(0,a),n=e.slice(a+1);return i.applyThousandsSeparator(r,t)+i.localizationObject.decimalseparator+n}return i.applyThousandsSeparator(e,t)}applyThousandsSeparator(e,t){if(t)return e;let i="";"-"===e.charAt(0)&&(i="-",e=e.slice(1));let a=e.split("").reverse();for(let r=2;r<a.length-1;r+=3)a[r]=this.localizationObject.thousandsseparator+a[r];return a.reverse(),a=a.join(""),i+a}formatNumber(e,t,i){var a=Math.round;const r=this,n=t.slice(0,1);let l=t.slice(1);if(""!==l&&(isNaN(parseFloat(l))||0>parseFloat(l)||99<parseFloat(l)?l="":0!=parseFloat(l)%1&&(l=a(l))),e._d)r.inputFormat="integer";else{if(e.imaginaryPart)return r.formatComplexNumber(e,t,n,l);r.inputFormat="floatingPoint"}let o,c=new Smart.Utilities.NumericProcessor(r,"inputFormat"),m=c.createDescriptor(e);switch("integer"===r.inputFormat&&(m=c.round(m)),r.numericValue=m,n){case"C":case"c":return""===l&&(l=r.localizationObject.defaultPrecision),l=parseFloat(l),o="floatingPoint"===r.inputFormat?r.applyPrecisionDigits(l):m.toString()+(0<l?"."+"0".repeat(l):""),o=r.applySeparators(o),"before"===r.localizationObject.currencysymbolposition?"-"===o.charAt(0)?"-"+r.localizationObject.currencysymbol+o.slice(1):r.localizationObject.currencysymbol+o:o+" "+r.localizationObject.currencysymbol;case"D":case"d":{if(o=m,"floatingPoint"===r.inputFormat&&(o=a(m)),o=o.toString(),""===l)return o;let e="";"-"===o.charAt(0)&&(e="-",o=o.slice(1));const t=l-o.length;return 0<t&&(o="0".repeat(t)+o),e+o}case"E":case"e":{""===l&&(l=6),o="floatingPoint"===r.inputFormat?m.toExponential(l):r.bigNumberToExponent(parseFloat(l)+1,!0).toLowerCase();const e=o.indexOf("e"),t=o.slice(e+2).length;return 3>t&&(o=o.slice(0,e+2)+"0".repeat(3-t)+o.slice(e+2)),"E"===n&&(o=o.toUpperCase()),r.applySeparators(o,!0)}case"F":case"f":case"N":case"n":return""===l&&(l=r.localizationObject.defaultPrecision),l=parseFloat(l),o="floatingPoint"===r.inputFormat?r.applyPrecisionDigits(l):m.toString()+(0<l?"."+"0".repeat(l):""),r.applySeparators(o,"f"===n.toLowerCase());case"G":case"g":{(""===l||"0"===l)&&(l="floatingPoint"===r.inputFormat?15:"int8"===i||"uint8"===i?3:"int16"===i||"uint16"===i?5:"int64"===i?19:"uint64"===i?20:10),l=parseFloat(l);let t=r.formatNumber(e,"E"+l),a=t.indexOf("E");const o=parseInt(t.slice(a+1),10);if(-5<o&&o<l)return"floatingPoint"===r.inputFormat?r.applySeparators(r.applySignificantDigits(l),!0):m.toString();if(-100<o&&100>o&&(t=t.slice(0,a+2)+t.slice(a+3)),-1!==t.indexOf(r.localizationObject.decimalseparator)){for(;"0"===t.charAt(a-1);)t=t.slice(0,a-1)+t.slice(a),a=t.indexOf("E");t.charAt(a-1)===r.localizationObject.decimalseparator&&(t=t.slice(0,a-1)+t.slice(a))}return"g"===n&&(t=t.toLowerCase()),t}case"P":case"p":return""===l&&(l=r.localizationObject.defaultPrecision),l=parseFloat(l),"floatingPoint"===r.inputFormat?(r.numericValue=100*m,o=r.applyPrecisionDigits(l)):o=m.multiply(100).toString()+(0<l?"."+"0".repeat(l):""),r.applySeparators(o)+" %";case"B":case"b":case"O":case"o":case"X":case"x":{"integer"!==r.inputFormat&&(r.inputFormat="integer",c=new Smart.Utilities.NumericProcessor(r,"inputFormat"),m=c.round(c.createDescriptor(e)));const t=c.getWordLength(i?i:"int32");let a;if(a="B"===n||"b"===n?2:"O"===n||"o"===n?8:16,o=m.toString(a,t),""!==l){const e=parseFloat(l)-o.length;0<e&&(o="0".repeat(e)+o)}return"x"===n&&(o=o.toLowerCase()),o}case"S":case"s":return""===l&&(l=r.localizationObject.defaultPrecision),l=parseFloat(l),r.toScientific(null,l).replace(".",r.localizationObject.decimalseparator);}}formatComplexNumber(e,t,i){const a=this;return"E"===i||"e"===i||"F"===i||"f"===i||"G"===i||"g"===i||"N"===i||"n"===i||"S"===i||"s"===i?0<=e.imaginaryPart?a.formatNumber(e.realPart,t)+" + "+a.formatNumber(e.imaginaryPart,t)+"i":a.formatNumber(e.realPart,t)+" - "+a.formatNumber(Math.abs(e.imaginaryPart),t)+"i":e.toString()}toString(e,t,i){return t?this.formatNumber(e,t,i):e.toString()}});