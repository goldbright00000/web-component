
/* Smart HTML Elements v1.1.0 (2018-June) 
Copyright (c) 2011-2018 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-pager",class extends Smart.BaseElement{static get properties(){return{currentItem:{value:0,type:"number"},currentPage:{value:0,type:"number"},disabledItems:{value:[],type:"array"},ellipsis:{value:!1,type:"boolean"},firstLastButtons:{value:!1,type:"boolean"},goToPage:{value:!1,type:"boolean"},hideItems:{value:!1,type:"boolean"},items:{value:0,type:"number"},itemsPerPage:{value:3,type:"number"},itemTemplate:{value:null,type:"string?"},labelMap:{value:null,type:"object?",reflectToAttribute:!1},localization:{value:null,type:"object?",reflectToAttribute:!1},pagesCount:{value:0,type:"number"},prevNextButtons:{value:!1,type:"boolean"},prevNextPageButtons:{value:!1,type:"boolean"},showRange:{value:!1,type:"boolean"},showRowsCount:{value:!1,type:"boolean"},rowsCountOptions:{value:[],type:"array"}}}static get listeners(){return{click:"_navigationButtonsClickHandler",down:"_navigationButtonsDownHandler","goToInput.change":"_goToButtonClickHandler","itemsContainer.click":"_itemsContainerClickHandler","itemsPerPageDropDown.change":"_itemsPerPageDropDownChangeHandler",keydown:"_keyDownHandler"}}static get requires(){return{"Smart.Button":"smart.button.js","Smart.DropDownList":"smart.dropdownlist.js"}}template(){return`<div id="container">
                    <smart-button id="firstButton" class ="smart-first-button"></smart-button>
                    <smart-repeat-button id="previousPageButton" class ="smart-previous-page-button"></smart-repeat-button>
                    <smart-repeat-button id="previousButton" class ="smart-previous-button"></smart-repeat-button>
                    <smart-button id="previousEllipsisButton" class ="smart-previous-ellipsis-button"></smart-button>
                    <div id="itemsContainer" tabindex="0" class ="smart-items-container"></div>
                    <smart-button id="nextEllipsisButton" class ="smart-next-ellipsis-button"></smart-button>
                    <smart-repeat-button id="nextButton" class ="smart-next-button"></smart-repeat-button>
                    <smart-repeat-button id="nextPageButton" class ="smart-next-page-button"></smart-repeat-button>
                    <smart-button id="lastButton" class="smart-last-button"></smart-button>
                    <div id="goToBlock" class ="smart-go-to-block">
                        <input type="text" id="goToInput" class ="smart-go-to-input" />
                        <smart-button id="goToButton" class ="smart-go-to-button"></smart-button>
                    </div>
                    <div id="itemsPerPageBlock" class ="smart-items-per-page-block">
                        <smart-drop-down-list id="itemsPerPageDropDown" class ="smart-items-per-page-drop-down"
                            data-source="[[rowsCountOptions]]"
                            drop-down-height="auto"
                            selection-mode="one"
                            theme="[[theme]]"
                            disabled="[[disabled]]">
                        </smart-drop-down-list>
                    </div>
                    <span id="range" class ="smart-range"></span>
                </div>`}ready(){super.ready();const a=this;a.navigationButtons=["firstButton","lastButton","previousButton","nextButton","previousPageButton","nextPageButton"],a.customButtons=["previousEllipsisButton","nextEllipsisButton","goToButton","goToInput"],a._handleLocalization(),a._createPageItems(),a._selectItem(a.currentItem),a._calculatePagesCount(),a._updateButtonsNames(),a._handleEllipsis(),a._updateRange(),a._handleMaterialDropDown(),a.disabled&&(a._enableDisableElements(a.navigationButtons,!0),a._enableDisableElements(a.customButtons,!0))}propertyChangedHandler(a,b,c){super.propertyChangedHandler(a,b,c);const d=this;"disabled"===a?(c?d._enableDisableElements(d.navigationButtons,!0):d._handleButtons(),d._enableDisableElements(d.customButtons,c)):"currentItem"===a?(c>d.items-1?(c=d.items-1,d.currentItem=c):0>c&&(c=0,d.currentItem=c),d.currentPage=Math.floor(c/d.itemsPerPage),d._refreshPageItems(),d._updateRange(),d._handleButtonsEllipsis()):"currentPage"===a?(c>d.pagesCount-1?d.currentPage=c=d.pagesCount-1:0>c&&(d.currentPage=c=0),d._changePage(c),d._isItemInPage(d.currentItem,c,d.itemsPerPage)||(d.currentItem=c*d.itemsPerPage,d._refreshPageItems()),d._updateRange(),d._handleButtonsEllipsis()):"items"===a||"itemsPerPage"===a?(d._calculatePagesCount(),"itemsPerPage"!==a||d._isItemInPage(d.currentItem,d.currentPage,c)?"items"===a&&d.currentItem>=c&&(d.currentItem=c-1,d.currentPage=d._currentItemsPage()):d.currentPage=d._currentItemsPage(),d._updateRange(),d._refreshPageItems(),d._handleButtonsEllipsis()):"pagesCount"===a?d.pagesCount=b:"showRowsCount"===a?c&&d.$.fireEvent("rowsCountChanged",{rows:d.$.itemsPerPageDropDown.value}):"showRange"===a?c&&d._updateRange():"rowsCountOptions"===a?d.$.itemsPerPageDropDown.dataSource=c:"localization"===a?(d._handleLocalization(),d._updateButtonsNames(),d._updateRange()):"disabledItems"===a?(d._calculatePagesCount(),d._updateRange(),d._refreshPageItems()):"ellipsis"===a?d._handleEllipsis():"labelMap"===a||"itemTemplate"===a?d._createPageItems(d.currentPage*d.itemsPerPage,(d.currentPage+1)*d.itemsPerPage):"theme"===a?d.$.itemsPerPageDropDown.dropDownPosition=-1===c.indexOf("material")?"auto":"overlay-center":void 0}nextItem(){const a=this;a.currentItem>=a.items-1||a.disabled||a._navigateItems("next")}nextPage(){const a=this;a.currentPage*a.itemsPerPage>=a.items||a.disabled||a._changePage(a.currentPage+1)}prevItem(){const a=this;0>=a.currentItem||a.disabled||a._navigateItems("prev")}prevPage(){const a=this;0>=a.currentPage||a.disabled||a._changePage(a.currentPage-1)}_applyTemplate(a,c){const d=this;if(null===d.itemTemplate||!d._bindingDetails||0===d._bindingDetails.length)return;const e=d._bindingDetails.length;let f,g,h=document.importNode(d._template.content,!0);for(let j=0;j<e;j++){f=h.childNodes[d._bindingDetails[j].childNodeIndex],g=d._bindingDetails[j].bindingString.length;for(let a=0;a<g;a++)f.innerHTML=f.innerHTML.replace(d._bindingDetails[j].bindingString[a],c)}a.innerHTML="";for(let b=0;b<h.childNodes.length;b++)h.childNodes[b].outerHTML&&(a.innerHTML+=h.childNodes[b].outerHTML)}_calculatePagesCount(){const a=this;a.pagesCount=0<a.items%a.itemsPerPage?Math.floor(a.items/a.itemsPerPage)+1:a.items/a.itemsPerPage}_changePage(a,b){const c=this;return isNaN(a)||0>a?a=0:a>c.pagesCount-1&&(a=c.pagesCount-1),a===c.currentPage?void(c.$.goToInput.value=""):void(b=b||a*c.itemsPerPage,c.currentPage=a,c._createPageItems(c.currentPage*c.itemsPerPage,(c.currentPage+1)*c.itemsPerPage),c._selectItem(b))}_createPageItems(a,b){const c=this;c._currentHtmlItems=[],c.$.itemsContainer.innerHTML="",a=a||0,b=b||a+c.itemsPerPage,b=b<c.items?b:c.items;for(let d=a;d<b;d++){let a=document.createElement("span"),b=c.labelMap?c.labelMap[d]||d+1:d+1;a.className=-1<c.disabledItems.indexOf(d)?"smart-pager-item smart-disabled":"smart-pager-item",c._handleItemTemplate()?c._applyTemplate(a,b):a.innerHTML=b,c.$.itemsContainer.appendChild(a),c._currentHtmlItems.push(a)}c._updateRange(a+1,b)}_currentItemsPage(){const a=this;return parseInt(a.currentItem/a.itemsPerPage)}_enableDisableElements(a,b){const c=this;for(let d=0;d<a.length;d++)c.$[a[d]].disabled=b}_firstButtonClickHandler(){const a=this;a.disabled||(a._unSelectItem(a.currentItem),a._createPageItems(),a._selectItem(0),a.currentPage=0,a._handleButtonsEllipsis())}_goToButtonClickHandler(){const a=this,b=a.$.goToInput.value;a.disabled||""===b||(a._changePage(parseInt(b)),a.$.goToInput.value="")}_handleButtons(){const a=this;a.disabled||(a.$.previousPageButton.disabled=!(0!==a.currentPage),a.$.nextPageButton.disabled=!(a.currentPage!==a.pagesCount-1),0===a.currentItem?(a.$.previousButton.disabled=!0,a.$.firstButton.disabled=!0):(a.$.previousButton.disabled=!1,a.$.firstButton.disabled=!1),a.currentItem===a.items-1?(a.$.nextButton.disabled=!0,a.$.lastButton.disabled=!0):(a.$.nextButton.disabled=!1,a.$.lastButton.disabled=!1))}_handleButtonsEllipsis(){const a=this;a._handleEllipsis(),a._handleButtons()}_handleEllipsis(){const a=this;a.ellipsis&&(0===a.currentPage?a.$previousEllipsisButton.addClass("smart-hidden"):a.$previousEllipsisButton.hasClass("smart-hidden")&&a.$previousEllipsisButton.removeClass("smart-hidden"),a.currentPage===a.pagesCount-1?a.$nextEllipsisButton.addClass("smart-hidden"):a.$nextEllipsisButton.hasClass("smart-hidden")&&a.$nextEllipsisButton.removeClass("smart-hidden"))}_handleLocalization(){const a=this;a._localization=a.localization?{firstButton:a.localization.firstButton||"First",lastButton:a.localization.lastButton||"Last",previousButton:a.localization.previousButton||"Previous",nextButton:a.localization.nextButton||"Next",previousPageButton:a.localization.previousPageButton||"Page -",nextPageButton:a.localization.nextPageButton||"Page +",goToButton:a.localization.goToButton||"Go to",goToInputPlaceholder:a.localization.goToInputPlaceholder||"",ellipsis:a.localization.ellipsis||"...",rangeString:a.localization.rangeString||"of",rangePrefix:a.localization.rangePrefix||"of",rangeSuffix:a.localization.rangeSuffix||""}:{firstButton:"First",lastButton:"Last",previousButton:"Previous",nextButton:"Next",previousPageButton:"Page -",nextPageButton:"Page +",goToButton:"Go to",goToInputPlaceholder:"",ellipsis:"...",rangeString:"of",rangePrefix:"of",rangeSuffix:""}}_handleItemTemplate(){const a=this;let b=a.itemTemplate;if(null===b||!b)return;if(!("content"in document.createElement("template")))return a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()})),void(a.itemTemplate=null);if(b=document.getElementById(b),null===b||!("content"in b))return a.error(a.localize("invalidTemplate",{elementType:a.nodeName.toLowerCase(),property:"itemTemplate"})),void(a.itemTemplate=null);const c=b.content,d=c.childNodes.length,e=/{{\w+}}/g;let f,g;a._bindingDetails=[],a._template=b;for(let b=0;b<d;b++){for(g=[];f=e.exec(c.childNodes[b].innerHTML);)g.push(f[0]);0<g.length&&a._bindingDetails.push({childNodeIndex:b,bindingString:g})}return!0}_handleMaterialDropDown(){const a=this;a.classList.contains("animation")&&a.$.itemsPerPageDropDown.classList.add("animation"),-1!==a.theme.indexOf("material")&&(a.$.itemsPerPageDropDown.dropDownPosition="overlay-center")}_isItemInPage(a,b,c){return!!(a>=b*c&&a<(b+1)*c)}_itemsContainerClickHandler(a){const b=this,c=b.currentItem,d=a.target.closest(".smart-pager-item");if(d&&!d.classList.contains("smart-selected")){for(let a=0;a<b._currentHtmlItems.length;a++)b._currentHtmlItems[a]===d?b._selectItem(b.itemsPerPage*b.currentPage+a):b._unSelectItem(c);b._handleButtons()}}_itemsPerPageDropDownChangeHandler(a){const b=this;!b.showRowsCount||b.disabled||b.$.fireEvent("rowsCountChanged",{value:parseInt(a.detail.value)})}_keyDownHandler(a){const b=this;if(!b.disabled)switch(a.preventDefault(),a.key){case"End":b._lastButtonClickHandler();break;case"Home":b._firstButtonClickHandler();break;case"PageUp":b.nextPage();break;case"PageDown":b.prevPage();break;case"ArrowUp":case"ArrowRight":b.nextItem();break;case"ArrowDown":case"ArrowLeft":b.prevItem();}}_lastButtonClickHandler(){const a=this;a.disabled||(a._unSelectItem(a.currentItem),a.currentPage=a.pagesCount-1,a._createPageItems(a.currentPage*a.itemsPerPage,(a.currentPage+1)*a.itemsPerPage),a.currentItem=a.items-1,a._selectItem(a.currentItem),a._handleEllipsis())}_navigateItems(a){const b=this;return"prev"===a?(b.currentPage*b.itemsPerPage===b.currentItem?(b.currentPage--,b._createPageItems(b.currentPage*b.itemsPerPage,(b.currentPage+1)*b.itemsPerPage)):b._unSelectItem(b.currentItem),b.currentItem--,b._selectItem(b.currentItem),void b._handleEllipsis()):void((b.currentPage+1)*b.itemsPerPage-1===b.currentItem?(b.currentPage++,b._createPageItems(b.currentPage*b.itemsPerPage,(b.currentPage+1)*b.itemsPerPage)):b._unSelectItem(b.currentItem),b.currentItem++,b._selectItem(b.currentItem),b._handleEllipsis())}_nextButtonClickHandler(){const a=this;a.currentItem>=a.items-1||a.disabled||a._navigateItems("next")}_nextPageButtonClickHandler(){const a=this;a.nextPage(),a._handleEllipsis()}_previousButtonClickHandler(){const a=this;1>a.currentItem||a.disabled||a._navigateItems("prev")}_previousPageButtonClickHandler(){const a=this;a.prevPage(),a._handleEllipsis()}_refreshPageItems(){const a=this;a._createPageItems(a.currentPage*a.itemsPerPage,(a.currentPage+1)*a.itemsPerPage),a._selectItem(a.currentItem,!0),a._handleButtons()}_selectItem(a,b){const c=this,d=c.currentItem;if(!(c.disabled&&!b||0>=c._currentHtmlItems.length||0===c.items||-1<c.disabledItems.indexOf(a))){const b=a%c.itemsPerPage||0,e=c._currentHtmlItems[b];e.classList.contains("smart-selected")||(e.classList.add("smart-selected"),c.currentItem=a,c._handleButtons(),c.$.fireEvent("change",{oldIndex:d,index:a}))}}_unSelectItem(a){const b=this;if(!b.disabled){const c=a%b.itemsPerPage||0,d=b._currentHtmlItems[c];d.classList.contains("smart-selected")&&d.classList.remove("smart-selected")}}_updateButtonsNames(){const a=this,b=["firstButton","lastButton","previousButton","nextButton","previousPageButton","nextPageButton","goToButton"];for(let c=0;c<b.length;c++)a.$[b[c]].content=a._localization[b[c]];a.$.previousEllipsisButton.content=a._localization.ellipsis,a.$.nextEllipsisButton.content=a._localization.ellipsis,a.$.goToInput.placeholder=a._localization.goToInputPlaceholder}_updateRange(a,b){const c=this;a=a||1,b=b||c.itemsPerPage,c.$.range.innerHTML="<span class=\"smart-range-start\">"+a+"</span> <span class=\"smart-range-hyphen\">-</span> <span class=\"smart-range-end\">"+b+"</span><span class=\"smart-range-prefix\">"+c._localization.rangePrefix+"</span> <span class=\"smart-range-items\">"+c.items+"</span> <span class=\"smart-range-suffix\">"+c._localization.rangeSuffix+"</span>"}_navigationButtonsClickHandler(a){const b=this,c=a.target.closest("smart-button")||a.target.closest("smart-repeat-button");c===b.$.firstButton?b._firstButtonClickHandler(a):c===b.$.lastButton?b._lastButtonClickHandler(a):c===b.$.previousButton?b._previousButtonClickHandler(a):c===b.$.nextButton?b._nextButtonClickHandler(a):c===b.$.previousPageButton||c===b.$.previousEllipsisButton?b._previousPageButtonClickHandler(a):c===b.$.nextPageButton||c===b.$.nextEllipsisButton?b._nextPageButtonClickHandler(a):c===b.$.goToButton?b._goToButtonClickHandler(a):void 0}_navigationButtonsDownHandler(a){const b=this,c=a.target.closest("smart-button")||a.target.closest("smart-repeat-button")||a.originalEvent.target.closest(".smart-pager-item");b.disabled||c&&-1!==b.theme.indexOf("material")&&Smart.Utilities.Animation.Ripple.animate(c,a.pageX,a.pageY)}});