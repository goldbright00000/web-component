
/* Smart HTML Elements v1.1.0 (2018-June) 
Copyright (c) 2011-2018 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-tab-item",class extends Smart.ContentElement{static get properties(){return{closeButtonHidden:{value:!1,type:"boolean"},index:{value:null,type:"number?"},selected:{value:!1,type:"boolean"},label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const o=this;if(o._preventPropertyChangedHandler)return void delete o._preventPropertyChangedHandler;switch(e){case"closeButtonHidden":o.$.fireEvent("closeButtonVisibilityChange",{hidden:n});break;case"index":o.$.fireEvent("indexChange",{newIndex:n,oldIndex:t,tabItem:o});break;case"label":break;case"labelSize":o.$.fireEvent("labelSizeChange",{size:n});}}_setIndex(e){const t=this,n=t.context;t.context=t,t.index=e,t.context=n}}),Smart("smart-tab-items-group",class extends Smart.ContentElement{static get properties(){return{label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}template(){return""}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const o=this;if(o._preventPropertyChangedHandler)return void delete o._preventPropertyChangedHandler;switch(e){case"label":break;case"labelSize":this.$.fireEvent("labelSizeChange",{size:n});}}}),Smart("smart-tabs",class extends Smart.BaseElement{static get properties(){return{addNewTab:{value:!1,type:"boolean"},closeButtonMode:{value:"default",allowedValues:["default","selected"],type:"string"},closeButtons:{value:!1,type:"boolean"},collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},enableMouseWheelAction:{value:!1,type:"boolean"},messages:{value:{en:{ambiguousIndexes:"smart-tabs: Initially set smart-tab-item indexes are ambiguous and are ignored in favour of the HTML structure.",detailsObjectRequired:"smart-tabs: The method \"insert\" requires a details Object to be passed as a second argument.",invalidIndex:"smart-tabs: \"{{method}}\" method accepts an index of type number.",referenceNodeNotChild:"smart-tabs: Passed {{argument}} is not part of this smart-tabs element.",tabItemRequired:"smart-tabs: The method \"{{method}}\" requires a \"smart-tab-item\" element to be passed as an argument."}},type:"object",extend:!0},name:{value:"",type:"string"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},reorder:{value:!1,type:"boolean"},resize:{value:!1,type:"boolean"},scrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},selectedIndex:{value:null,type:"number?"},selectionMode:{value:"click",allowedValues:["click","dblclick","mouseenter","none"],type:"string"},tabLayout:{value:"scroll",allowedValues:["scroll","dropdown","wrap","shrink"],type:"string",defaultReflectToAttribute:!0},tabPosition:{value:"top",allowedValues:["top","bottom","left","right","hidden"],type:"string"},tabTextOrientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"}}}static get listeners(){return{closeButtonVisibilityChange:"_closeButtonVisibilityChangeHandler",indexChange:"_indexChangeHandler",keydown:"_keydownHandler",labelSizeChange:"_labelSizeChangeHandler",resize:"_applyTabOverflow",styleChanged:"_applyTabOverflow","container.dblclick":"_containerHandler","container.down":"_containerHandler","container.mouseout":"_containerHandler","container.mouseover":"_containerHandler","container.up":"_containerHandler","scrollButtonFar.click":"_scrollButtonFarClickHandler","scrollButtonNear.click":"_scrollButtonNearClickHandler","tabContentSection.transitionend":"_tabContentSectionTransitionendHandler","tabsHeaderItems.wheel":"_tabsHeaderItemsWheelHandler","tabStrip.mouseleave":"_tabStripMouseleaveHandler","tabStrip.move":"_tabStripMoveHandler","document.move":"_documentMoveHandler","document.selectstart":"_selectStartHandler","document.up":"_documentUpHandler"}}template(){return`<div id="container">
                    <div id="tabsHeaderSection" class="smart-tabs-header-section">
                        <div id="tabsHeaderItems" class="smart-tabs-header-items">
                            <smart-repeat-button id="scrollButtonNear" class="smart-tabs-scroll-button smart-spin-button smart-hidden">
                                <div id="arrowNear" class="smart-arrow"></div>
                            </smart-repeat-button>
                            <div id="tabStrip" class="smart-tab-strip"></div>
                            <smart-repeat-button id="scrollButtonFar" class="smart-tabs-scroll-button smart-spin-button smart-hidden">
                                <div id="arrowFar" class="smart-arrow"></div>
                            </smart-repeat-button>
                            <div id="dropDownButton" class="smart-tabs-drop-down-button">
                                <div id="dropDownButtonArrow" class="smart-tabs-drop-down-button-arrow smart-unselectable"></div>
                                <div id="dropDownButtonDropDown" class="smart-tabs-drop-down-button-drop-down smart-hidden"></div>
                            </div>
                            <div id="resizeToken" class="smart-tabs-resize-token smart-hidden"></div>
                        </div>
                        <div id="tabHeaderControls" class="smart-tabs-header-controls"></div>
                    </div>
                    <div id="tabContentSection" class="smart-tabs-content-section"><content></content></div>
                    <input id="hiddenInput" type="hidden" name="[[name]]">
                </div>`}ready(){super.ready();const e=this;e._firefox=-1!==navigator.userAgent.indexOf("Firefox"),e._arrowCodes={top:"&#xe804",bottom:"&#xe801",left:"&#xe802",right:"&#xe803"},e._createElement()}appendChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"appendChild"})),t.insert(t._tabs.length,{node:e})}collapse(){const e=this;!e.collapsible||e.collapsed||(e.collapsed=!0)}ensureVisible(e){const t=this;if(null!==e&&"wrap"!==t.tabLayout&&"shrink"!==t.tabLayout&&"hidden"!==t.tabPosition){t._validateIndex(e,"ensureVisible"),e=Math.max(0,Math.min(e,t._tabs.length-1));const n=t._tabs[e].group,o=t.$.tabStrip,a=o.getBoundingClientRect(),r=null===n?t._tabLabelContainers[e]:t._groupLabels[t._groups.indexOf(n)],i=r.getBoundingClientRect();("top"===t.tabPosition||"bottom"===t.tabPosition)&&(a.left>i.left||a.right<i.right)?o.scrollLeft+=i.right-o.offsetWidth-a.left:("left"===t.tabPosition||"right"===t.tabPosition)&&(a.top>i.top||a.bottom<i.bottom)&&(o.scrollTop+=i.bottom-o.offsetHeight-a.top),t._updateScrollButtonVisibility(),t.resize&&t._getTabCoordinates()}}expand(){const e=this;e.collapsible&&e.collapsed&&(e.collapsed=!1)}getOffsetFromEdgeOfElement(e){const t=this;t._validateIndex(e,"getOffsetFromEdgeOfElement"),e=Math.max(0,Math.min(e,t._tabs.length-1));const n=t._tabs[e],o=t.tabPosition;return"hidden"===o?n.getBoundingClientRect().top-t.getBoundingClientRect().top:Math.abs(n.getBoundingClientRect()[o]-t.getBoundingClientRect()[o])}insert(e,t){const n=this;let o,a;n._validateIndex(e,"insert"),(t===void 0||t.label===void 0&&t.content===void 0&&t.node===void 0)&&n.error(n.localize("detailsObjectRequired")),t.node===void 0?(o=t.group,a=document.createElement("smart-tab-item"),a.label=t.label===void 0?"":t.label,a.labelSize=t.labelSize===void 0?null:t.labelSize,a.content=t.content):a=t.node,a.$.addClass("smart-visibility-hidden"),a.group=null;const r=n._addTabLabelContainer(a),i=r.tabLabelContainer,s=r.dropDownLabelContainer;i.tab=a,a.tabLabelContainer=i;const l={index:e,tab:a,tabLabelContainer:i,dropDownLabelContainer:s};if(0===n._groups.length&&o===void 0)n._insertNoGrouping(l);else if(void 0!==o){l.group=o;const e=n.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+o+"\"]");null===e?n._insertIntoNewGroup(l):(l.smartTabItemsGroup=e,n._insertIntoExistingGroup(l))}else n._insertNearAGroup(l);n._getReorderItems(),null===n.selectedIndex&&n._tabs.length&&n._select(0,!1),null!==a.group&&null!==a.labelSize&&"shrink"!==n.tabLayout&&i.style.removeProperty([n._orientationSettings.dimension]),n._applyTabOverflow()}insertBefore(e,t){const n=this;if(!n.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,e.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem&&(t===void 0||null===t||t instanceof Smart.TabItem)||n.error(n.localize("tabItemRequired",{method:"insertBefore"}));let o;n.contains(e)&&(e.selected&&(o=!0),n.remove(e.index)),t!==void 0&&null!==t?(!n.contains(t)&&n.error(n.localize("referenceNodeNotChild",{argument:"referenceNode"})),n.insert(t.index,{node:e})):n.insert(n._tabs.length,{node:e}),o&&n._select(e.index,!1)}remove(e){const t=this,n=t._tabs.length;if(0!==n){t._validateIndex(e,"remove"),e=Math.max(0,Math.min(e,n-1));const o=t._tabs[e],a=t._tabLabelContainers[e];if(a.parentElement.removeChild(a),o.parentElement.removeChild(o),null!==o.group){const e=t.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+o.group+"\"]");if(0===e.childElementCount){const n=t._groups.indexOf(o.group);t.$.tabStrip.removeChild(t._groupLabels[n]),t._groups.splice(n,1),t.$.container.removeChild(t._groupLabels[0].dropDown),t._groupLabels.splice(n,1),t.$.tabContentSection.removeChild(e)}}1<n?e<t.selectedIndex?t.selectedIndex--:e===t.selectedIndex&&(e===n-1?t._select(e-1,!1):(t._select(e+1,!1),t.selectedIndex--)):(t.selectedIndex=null,t.$.tabContentSection.innerHTML=""),t._tabLabelContainers.splice(e,1),t.$.dropDownButtonDropDown.removeChild(t.$.dropDownButtonDropDown.children[e]),t._tabs.splice(e,1),t._updateTabIndexes(),t._getReorderItems(),t._applyTabOverflow(),t.ensureVisible(t.selectedIndex)}}removeChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"removeChild"})),t.contains(e)||t.error(t.localize("referenceNodeNotChild",{argument:"node"})),t.remove(e.index)}select(e){const t=this;0===t._tabs.length||(t._validateIndex(e,"select"),e=Math.max(0,Math.min(e,t._tabs.length-1)),t.ensureVisible(e),t._select(e,!0))}_setFocusable(){const e=this;return e.disabled||e.unfocusable?void e.removeAttribute("tabindex"):void((null===e.getAttribute("tabindex")||0>e.getAttribute("tabindex"))&&e.setAttribute("tabindex",0))}update(e,t,n){const o=this;if(0!==o._tabs.length){o._validateIndex(e,"update"),e=Math.max(0,Math.min(e,o._tabs.length-1));const a=o._tabs[e];if(void 0!==t&&a.label!==t){const n=o._tabLabelContainers[e].firstElementChild.children[0],r=o.$.dropDownButtonDropDown.children[e];a.label=t,n.innerHTML="",r.innerHTML="",o._setLabel(t,n,r),o._applyTabOverflow()}void 0!==n&&(a.content=n)}}_createElement(){const e=this;e.disabled&&(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0),e._handlePosition(e.tabPosition),e._handleScrollButtonsPosition(e.scrollButtonsPosition,"both"),null!==e.dataSource&&e._processDataSource(),e._setFocusable(),e.collapsed&&!e.collapsible&&(e.collapsed=!1),e.$.scrollButtonNear.firstElementChild.tabIndex=-1,e.$.scrollButtonFar.firstElementChild.tabIndex=-1,e._processHTML()}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const o=this;switch(e){case"addNewTab":n?o._insertAddNewTab():(o.$.tabStrip.removeChild(o._addNewTab),delete o._addNewTab),o._applyTabOverflow();break;case"closeButtonMode":if("selected"===n){for(let e=0;e<o._tabs.length;e++)o._disableCloseButton(e);o._enableCloseButton(o.selectedIndex)}else{o._disableCloseButton(o.selectedIndex);const e=o._tabLabelContainers;for(let t=0;t<e.length;t++){const n=e[t];n.closeButtonEnabled=!0!==o._tabs[t].closeButtonHidden,o._showCloseButton(n)}}o._applyTabOverflow();break;case"closeButtons":{const e=o._tabLabelContainers,t=n?o._showCloseButton:o._hideCloseButton;for(let n=0;n<e.length;n++){const o=e[n];t(o)}o._applyTabOverflow();break}case"collapsed":if(!o.collapsible&&n)return void(o.collapsed=!1);break;case"collapsible":!n&&o.collapsed&&(o.collapsed=!1);break;case"dataSource":o.selectedIndex=null;for(let e=0;e<o._groupLabels.length;e++)o.$.container.removeChild(o._groupLabels[e].dropDown);o.$.tabStrip.innerHTML="",o._processDataSource(),o._processHTML();break;case"disabled":o._setFocusable(),o.$.scrollButtonNear.disabled=n,o.$.scrollButtonFar.disabled=n,n||o._updateScrollButtonVisibility(),o._closeDropDownButtonDropDown();break;case"messages":case"selectionMode":case"readonly":case"reorder":break;case"overflow":if("scroll"!==o.tabLayout)return;o.$.tabStrip.scrollLeft=0,o.$.tabStrip.scrollTop=0,"hidden"===n?(o.$tabsHeaderSection.removeClass("scroll-buttons-shown"),o.$scrollButtonNear.addClass("smart-hidden"),o.$scrollButtonFar.addClass("smart-hidden")):o._checkOverflowScroll(),o._getTabCoordinates();break;case"tabPosition":{if(o._closeGroupDropDown(),o._handlePosition(n,t),"shrink"!==o.tabLayout&&o._applyLabelSizes("tabPosition"),o._applyTabOverflow(),"hidden"!==n){const e=o.getElementsByClassName("smart-tab-group-arrow");for(let t=0;t<e.length;t++)e[t].innerHTML=o._arrowCodes[o.tabPosition]}break}case"resize":n&&o._getTabCoordinates();break;case"scrollButtonsPosition":o._handleScrollButtonsPosition(n,t);break;case"selectedIndex":{if(null===n)return void(o.selectedIndex=t);const e=Math.max(0,Math.min(n,o._tabs.length-1));o.ensureVisible(e),o._select(e,!0,t);break}case"tabLayout":"scroll"===t&&(o.$tabsHeaderSection.removeClass("scroll-buttons-shown"),o.$scrollButtonNear.addClass("smart-hidden"),o.$scrollButtonFar.addClass("smart-hidden")),"shrink"===n?o._applyLabelSizes("shrink",!0):"shrink"===t&&o._applyLabelSizes("shrink",!1),o._applyTabOverflow(),"scroll"===n&&o.disabled&&(o.$.scrollButtonNear.disabled=!0,o.$.scrollButtonFar.disabled=!0),o.ensureVisible(o.selectedIndex);break;case"tabTextOrientation":o._applyTabOverflow(),o.ensureVisible(o.selectedIndex);break;case"unfocusable":o._setFocusable();}}_addGroupContainer(e,t){const n=this,o=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div");return o.className="smart-tab-group-container smart-unselectable",o.$=Smart.Utilities.Extend(o),a.className="smart-tab-label-text-wrapper",null!==t&&"shrink"!==n.tabLayout&&(o.style[n._orientationSettings.dimension]=parseInt(t,10)+"px"),r.className="smart-tab-label-text-container",r.innerHTML=e,i.className="smart-tab-group-arrow",i.innerHTML=n._arrowCodes[n.tabPosition],s.className="smart-tab-group-drop-down smart-hidden",s.$=Smart.Utilities.Extend(s),a.appendChild(r),a.appendChild(i),o.appendChild(a),n.$.container.appendChild(s),o.group=e,o.dropDown=s,s.groupContainer=o,{label:o,dropDown:s}}_addGroupElements(e){const t=this,n=e.groups,o=e.groupLabels,a=e.group,r=n.indexOf(a),i=e.tabLabelContainer;let s;if(-1!==r)s=o[r],s.dropDown.appendChild(i);else{n.push(a);const r=t._addGroupContainer(a,e.smartTabItemsGroup.labelSize),l=r.dropDown;s=r.label,l.appendChild(i),e.documentFragment.appendChild(s),o.push(s)}t.selectedIndex===e.i&&(t._selectedGroup=s,s.$.addClass("smart-tab-group-selected"))}_addNewTabHandler(e,t,n){const o=this;o._swiping||(n?(e.$.removeClass("smart-tab-hovered"),o.insert(o._tabs.length,{label:"New Tab",content:""}),o._select(o._tabs.length-1,!0)):!o._reordering&&!o._swiping&&("mouseover"===t?e.$.addClass("smart-tab-hovered"):"mouseout"==t&&e.$.removeClass("smart-tab-hovered")))}_addTabLabelContainer(e,t){const n=this,o=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div");let s;return o.className="smart-tab-label-container smart-unselectable",a.className="smart-tab-label-text-wrapper",r.className="smart-tab-label-text-container",i.className="smart-tab-close-button",i.innerHTML="\xD7",void 0===t?(n.closeButtons?"default"===n.closeButtonMode&&e.closeButtonHidden||"selected"===n.closeButtonMode&&!e.selected?(i.classList.add("smart-hidden"),o.closeButtonEnabled=!1):(r.classList.add("smart-close-button-enabled"),o.closeButtonEnabled=!0):(i.classList.add("smart-hidden"),o.closeButtonEnabled=!0),s=document.createElement("div"),s.className="smart-tab-label-container smart-unselectable",null===e.group&&null!==e.labelSize&&"shrink"!==n.tabLayout&&(o.style[n._orientationSettings.dimension]=parseInt(e.labelSize,10)+"px")):(i.classList.add("smart-hidden"),o.closeButtonEnabled=!1),n._setLabel(e?e.label:"+",r,s),r.$=Smart.Utilities.Extend(r),i.$=Smart.Utilities.Extend(i),a.appendChild(r),a.appendChild(i),o.appendChild(a),o.$=Smart.Utilities.Extend(o),{tabLabelContainer:o,dropDownLabelContainer:s}}_animateSelection(e,t,n){const o=this;let a="right",r="left";o._animatedTab=e,o._animatedOldTab=t,("left"===o.tabPosition||"right"===o.tabPosition)&&(a="top",r="bottom");for(let s=0;s<o._tabs.length;s++)o._tabs[s].$.removeClass(a),o._tabs[s].$.removeClass(r),o._tabs[s].$.removeClass("animate");n?(e.$.addClass(a),e.$.removeClass("smart-visibility-hidden"),t.$.addClass("animate"),e.$.addClass("animate"),t.$.addClass(r),t.$.addClass("smart-visibility-hidden"),e.$.removeClass(a),o._animatedOldTab.classToRemove=r):(e.$.addClass(r),e.$.removeClass("smart-visibility-hidden"),t.$.addClass("animate"),e.$.addClass("animate"),t.$.addClass(a),t.$.addClass("smart-visibility-hidden"),e.$.removeClass(r),o._animatedOldTab.classToRemove=a)}_applyConditionalTabOverflow(){const e=this,t="left"===e.tabPosition||"right"===e.tabPosition,n=e.$.tabStrip;if("scroll"===e.tabLayout)return void e._checkOverflowScroll();if(e._firefox&&"shrink"===e.tabLayout&&t&&n.scrollHeight>n.offsetHeight){const t=n.children,o=100/t.length+"%";for(let e=0;e<t.length;e++)t[e].style.height=o,t[e].firstElementChild.firstElementChild.classList.add("smart-tab-label-text-container-full-height");e._inlineStyleTabStripChildren=!0}}_applyLabelSizes(e,t){const n=this,o=n._orientationSettings.dimension,a="width"===o?"height":"width";for(let r=0;r<n._reorderItems.length;r++){const i=n._reorderItems[r],s=n._getCorrespondingCustomElement(i);null!==s.labelSize&&("tabPosition"===e&&i.style.removeProperty(a),t?i.style.removeProperty(o):i.style[o]=parseInt(s.labelSize,10)+"px")}}_applyTabOverflow(){var e=Math.max;const t=this,n=t.tabLayout,o=t.tabPosition,a="left"===o||"right"===o,r=t.$.tabStrip;switch(t._removeInlineStyle(),n){case"scroll":case"dropdown":t._firefox&&"vertical"===t.tabTextOrientation&&a&&t._fixTabStripFirefox(r);break;case"wrap":if("vertical"!==t.tabTextOrientation)a&&r.scrollWidth>r.offsetWidth&&(r.style.width=r.scrollWidth+"px","right"===o&&(r.style.flexWrap="wrap-reverse"),t._inlineStyleTabStrip=!0);else if(!t._firefox)a||r.scrollHeight>r.offsetHeight&&(r.style.height=r.scrollHeight+"px","bottom"===o&&(r.style.flexWrap="wrap-reverse"),t._inlineStyleTabStrip=!0);else if(a)t._fixTabStripFirefox(r);else{const n=r.children;let o=n[0].offsetHeight;for(let t=1;t<n.length;t++)o=e(o,n[t].offsetHeight);for(let e=1;e<n.length;e++)n[e].style.height=o+"px";t._inlineStyleTabStripChildren=!0}break;case"shrink":if(!a)r.scrollWidth>r.offsetWidth&&r.$.addClass("shrink-tabs");else if(t._firefox&&"vertical"===t.tabTextOrientation){const n=r.children,o=window.getComputedStyle(n[0]),a=parseInt(o.paddingLeft,10)+parseInt(o.paddingRight,10);let s=0;for(let t=0;t<n.length;t++)s=e(s,n[t].firstElementChild.firstElementChild.offsetWidth);r.style.width=a+s+"px",t._inlineStyleTabStrip=!0;break}}t._applyConditionalTabOverflow(),t._getTabCoordinates(),t._fixTabStripFlex(),t._toggleNavigationElementsVisibility()}_checkOverflowScroll(){var e=Math.round;const t=this,n=t.$tabsHeaderSection,o=t.$.tabStrip,a=t.overflow;if("hidden"===a)return;let r,i,s;"left"===t.tabPosition||"right"===t.tabPosition?(r=e(o.scrollHeight)>e(o.offsetHeight),i=0<e(o.scrollTop),s=e(o.offsetHeight+o.scrollTop)<e(o.scrollHeight)):(r=e(o.scrollWidth)>e(o.offsetWidth),i=0<e(o.scrollLeft),s=e(o.offsetWidth+o.scrollLeft)<e(o.scrollWidth)),"scroll"===a&&(n.addClass("scroll-buttons-shown"),t.$scrollButtonNear.removeClass("smart-hidden"),t.$scrollButtonFar.removeClass("smart-hidden")),r?"auto"===a?(!n.hasClass("scroll-buttons-shown")&&n.addClass("scroll-buttons-shown"),i?t.$scrollButtonNear.removeClass("smart-hidden"):t.$scrollButtonNear.addClass("smart-hidden"),s?t.$scrollButtonFar.removeClass("smart-hidden"):t.$scrollButtonFar.addClass("smart-hidden"),!1===(i&&s)?n.addClass("one-button-shown"):n.removeClass("one-button-shown"),!t.disabled&&(t.$.scrollButtonNear.disabled=!1,t.$.scrollButtonFar.disabled=!1)):(n.removeClass("one-button-shown"),t.disabled?(t.$.scrollButtonNear.disabled=!0,t.$.scrollButtonFar.disabled=!0):(t.$.scrollButtonNear.disabled=!i,t.$.scrollButtonFar.disabled=!s)):!r&&"auto"===a&&n.hasClass("scroll-buttons-shown")?(n.removeClass("scroll-buttons-shown"),n.removeClass("one-button-shown"),t.$scrollButtonNear.addClass("smart-hidden"),t.$scrollButtonFar.addClass("smart-hidden")):!r&&"scroll"===a&&(t.$.scrollButtonNear.disabled=!0,t.$.scrollButtonFar.disabled=!0)}_closeButtonVisibilityChangeHandler(e){const t=this,n=e.target.index;return"selected"===t.closeButtonMode?void(t._tabLabelContainers[n].closeButtonEnabled=e.detail.hidden):void(e.detail.hidden?t._disableCloseButton(n):t._enableCloseButton(n))}_closeDropDownButtonDropDown(){const e=this;e._dropDownButtonDropDownOpened&&(e.$dropDownButtonDropDown.addClass("smart-hidden"),e._dropDownButtonDropDownOpened=!1)}_closeGroupDropDown(){const e=this;e._openDropDown&&(e._openDropDown.rippleInProgress?setTimeout(function(){e._openDropDown&&(e._openDropDown.$.addClass("smart-hidden"),delete e._openDropDown.rippleInProgress,e._openDropDown=void 0)},450):(e._openDropDown.$.addClass("smart-hidden"),e._openDropDown=void 0))}_containerHandler(e){const t=this,n=e.type;if(!(t.disabled||t.readonly||t._resizing&&"mouseout"!==n||("down"===n||"up"===n)&&1!==e.which&&!Smart.Utilities.Core.isMobile)){"up"===n&&e.stopPropagation();const o=e.originalEvent?e.originalEvent.target:e.target;return t.$.tabContentSection.contains(o)?void 0:t.$.dropDownButton.contains(o)?void t._dropDownButtonHandler(o,e):void t._tabStripHandler(o,e)}}_disableCloseButton(e){const t=this,n=t._tabLabelContainers[e];n.closeButtonEnabled=!1,t.closeButtons&&t._hideCloseButton(n)}_documentMoveHandler(e){const t=this,n=t._orientationSettings;if(t._reordering){t._reorderStartThrown||(t._fireDragEvent(e,"reorderStart"),t._reorderStartThrown=!0);const o=e[n.coordinate],a="wrap"===t.tabLayout?function(t){return e.pageX>=t.fromX&&e.pageX<=t.toX&&e.pageY>=t.fromY&&e.pageY<=t.toY}:function(e){return o>=e[n.from]&&o<=e[n.to]};let r=!1;for(let e=0;e<t._tabCoordinates.length;e++){const n=t._tabCoordinates[e];if(a(n)){r=e;break}}!0!==t._preventReorder&&!1!==r&&r!==t._draggedIndex&&(t._reorderTabs(t._draggedIndex,r),t._closeGroupDropDown(),t._draggedIndex=r,t._getReorderItems(),t._getTabCoordinates());const i=t._tabCoordinates[t._draggedIndex];t._preventReorder=!!("wrap"!==t.tabLayout&&(o<i[n.from]||o>i[n.to])||"wrap"===t.tabLayout&&(null!==e.originalEvent.target.closest(".smart-tab-label-container")||null!==e.originalEvent.target.closest(".smart-tab-group-container"))&&!(e.pageX>=i.fromX&&e.pageX<=i.toX&&e.pageY>=i.fromY&&e.pageY<=i.toY))}else t._resizing&&(t.$.resizeToken.style[n.edge]=e[n.coordinate]-t._tabsHeaderSectionCoordinate+"px",t.$resizeToken.removeClass("smart-hidden"))}_documentUpHandler(e){const t=this;let n=e.originalEvent.target;t._endSwiping(e,Date.now()),t._openDropDown&&!t._openDropDown.rippleInProgress&&(n===document||n.closest(".smart-tab-group-container")!==t._openDropDown.groupContainer)&&t._closeGroupDropDown(),t.$.dropDownButton.contains(n)||t._closeDropDownButtonDropDown(),t._endReordering(e,n),t._resize(e),t._tabToResize!==void 0&&(t._tabToResize=void 0)}_dropDownButtonHandler(e,t){const n=this,o=t.type;n.$.dropDownButtonDropDown.contains(e)?e.classList.contains("smart-tab-label-container")&&("down"===o?n._downTarget=e:"mouseout"===o?e.classList.remove("smart-tab-hovered"):"mouseover"===o?e.classList.add("smart-tab-hovered"):"up"===o?e===n._downTarget&&(n.select(Array.from(n.$.dropDownButtonDropDown.children).indexOf(e)),n._closeDropDownButtonDropDown()):void 0):"down"===o?n._downTarget=n.$.dropDownButton:"up"===o&&n._downTarget===n.$.dropDownButton&&(n._dropDownButtonDropDownOpened?n._closeDropDownButtonDropDown():(n.$dropDownButtonDropDown.removeClass("smart-hidden"),n._dropDownButtonDropDownOpened=!0))}_enableCloseButton(e){const t=this,n=t._tabLabelContainers[e];n.closeButtonEnabled=!0,t.closeButtons&&t._showCloseButton(n)}_endReordering(e,t){const n=this;n._reordering&&(n._draggedHoveredTab&&(!n._draggedHoveredTab.contains(t)&&n._draggedHoveredTab.$.removeClass("smart-tab-hovered"),delete n._draggedHoveredTab),n._reorderedIndex=void 0,n._reordering=!1,n._reorderStartThrown=!1,n.removeAttribute("dragged"),e&&n._fireDragEvent(e,"reorderEnd"))}_endSwiping(e,t){var n=Math.abs;const o=this;if(!o._dragStartDetails)return;const a=o._orientationSettings,r=o.$.tabStrip,i=n(o._dragStartDetails.startTime-t),s=200/i,l=(o._dragStartDetails[a.startCoordinate]-e[a.coordinate])*s;let d=n(l);const b=function(){return!(0<l&&r[a.scrollDirection]===r[a.scrollSize]-r[a.size]||0>l&&0===r[a.scrollDirection])};let p=.03*n(l)*s;const c=function(){if(5<p){const e=(d-p)/n(l);.1>e?p/=1.25:.15>e?p/=1.2:.2>e?p/=1.15:.25>e?p/=1.1:.3>e&&(p/=1.05)}const e=r[a.scrollDirection];r[a.scrollDirection]=0<l?Math.min(e+p,r[a.scrollSize]-r[a.size]):Math.max(e-p,0),d-=p,o._updateScrollButtonVisibility();const t=b();0<d&&t?o._scrollingAnimationFrame=window.requestAnimationFrame(c):o._wheelInProgress=!1};o._scrollingAnimationFrame&&cancelAnimationFrame(o._scrollingAnimationFrame),500>i&&b()?o._scrollingAnimationFrame=window.requestAnimationFrame(c):o._wheelInProgress=!1,delete o._dragStartDetails,o._swiping&&delete o._swiping}_fireDragEvent(e,t){const n=this,o=n.$.tabStrip.children[n._draggedIndex],a=o.tab;let r,i,s;a?(r=a.selected,i=a.index,s=a.label):s=o.group,n.$.fireEvent(t,{position:{left:e.pageX,top:e.pageY},target:o,selected:r,index:i,label:s})}_fixTabStripFirefox(e){const t=this;if(0===t._tabs.length)return;const n=e.children;let o=n[0].getBoundingClientRect(),a=o.left,r=a+n[0].offsetWidth;for(let t=1;t<n.length;t++)o=n[t].getBoundingClientRect(),a=Math.min(a,o.left),r=Math.max(r,o.left+n[t].offsetWidth);e.style.width=r-a+"px",t._inlineStyleTabStrip=!0}_fixTabStripFlex(){const e=this;if("vertical"===e.tabTextOrientation&&("left"===e.tabPosition||"right"===e.tabPosition)&&!e._firefox){const t=1===e._tabs.length?10:0;setTimeout(function(){e.$tabsHeaderSection.addClass("smart-hidden"),setTimeout(function(){e.$tabsHeaderSection.removeClass("smart-hidden"),e._getTabCoordinates()},t)},t)}}_getCorrespondingCustomElement(e){return e.$.hasClass("smart-tab-label-container")?e.tab:this.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+e.group+"\"]")}_getReorderItems(){const e=this;let t;0===e._groups.length?t=e._tabLabelContainers:(t=Array.from(e.$.tabStrip.children),e.addNewTab&&t.pop()),e._reorderItems=t}_getTabCoordinates(){const e=this;if((e.reorder||e.resize)&&"hidden"!==e.tabPosition){const t=[],n=window.scrollX||window.pageXOffset,o=window.scrollY||window.pageYOffset;for(let a=0;a<e._reorderItems.length;a++){const r=e._reorderItems[a],i=r.getBoundingClientRect();t.push({fromX:i.left+n,toX:i.right+n,fromY:i.top+o,toY:i.bottom+o})}e._tabCoordinates=t}}_getTabs(){const e=this,t=e.getElementsByTagName("smart-tab-item");null!==e.selectedIndex&&(0===t.length?e.selectedIndex=null:e.selectedIndex=Math.max(0,Math.min(e.selectedIndex,t.length-1))),e._tabs=Array.from(t)}_groupContainerHandler(e,t){const n=this,o=e.dropDown;if("down"===t)return n._downTarget=e,void(n.reorder&&1<n._reorderItems.length&&(n._getTabCoordinates(),n._reordering=!0,n.setAttribute("dragged",""),n._draggedIndex=Array.from(n.$.tabStrip.children).indexOf(e)));n._reordering||n._swiping||(o===n._openDropDown||"mouseover"!==t||e.classList.contains("smart-tab-group-selected")?"mouseout"===t&&e.$.removeClass("smart-tab-hovered"):e.$.addClass("smart-tab-hovered"));"up"!==t||n._downTarget!==e||void 0!==n._reorderedIndex||n._swiping||(o===n._openDropDown?(n._closeGroupDropDown(),!e.classList.contains("smart-tab-group-selected")&&e.$.addClass("smart-tab-hovered")):(n._openDropDown&&n._openDropDown.$.addClass("smart-hidden"),o.$.removeClass("smart-hidden"),n._positionGroupDropDown(o,e),n._openDropDown=o,e.$.removeClass("smart-tab-hovered")))}_handlePosition(e,t){const n=this;-1!==[void 0,"top","left","hidden"].indexOf(t)&&("bottom"===e||"right"===e)?n.$.container.insertBefore(n.$.tabContentSection,n.$.tabsHeaderSection):("bottom"===t||"right"===t)&&-1!==["top","left","hidden"].indexOf(e)&&n.$.container.insertBefore(n.$.tabsHeaderSection,n.$.tabContentSection),"top"===e||"bottom"===e?(n._orientationSettings={coordinate:"pageX",dimension:"width",edge:"left",from:"fromX",size:"offsetWidth",to:"toX",scrollDirection:"scrollLeft",scrollSize:"scrollWidth",startCoordinate:"startX",wheelOffset:70},n.removeAttribute("vertical"),n.setAttribute("horizontal",""),n.$arrowNear.removeClass("smart-arrow-up"),n.$arrowNear.addClass("smart-arrow-left"),n.$arrowFar.removeClass("smart-arrow-down"),n.$arrowFar.addClass("smart-arrow-right")):(n._orientationSettings={coordinate:"pageY",dimension:"height",edge:"top",from:"fromY",size:"offsetHeight",to:"toY",scrollDirection:"scrollTop",scrollSize:"scrollHeight",startCoordinate:"startY",wheelOffset:35},n.removeAttribute("horizontal"),n.setAttribute("vertical",""),n.$arrowNear.removeClass("smart-arrow-left"),n.$arrowNear.addClass("smart-arrow-up"),n.$arrowFar.removeClass("smart-arrow-right"),n.$arrowFar.addClass("smart-arrow-down")),n.$.dropDownButtonArrow.innerHTML=n._arrowCodes[n.tabPosition]}_handleScrollButtonsPosition(e,t){const n=this,o=n.$.tabsHeaderItems;e===t||("both"===e?"near"===t?o.insertBefore(n.$.scrollButtonFar,n.$.dropDownButton):o.insertBefore(n.$.scrollButtonNear,n.$.tabStrip):"near"===e?("far"===t&&o.insertBefore(n.$.scrollButtonNear,n.$.tabStrip),o.insertBefore(n.$.scrollButtonFar,n.$.tabStrip)):("near"===t&&o.insertBefore(n.$.scrollButtonFar,n.$.dropDownButton),o.insertBefore(n.$.scrollButtonNear,n.$.scrollButtonFar)))}_hideCloseButton(e){e.firstElementChild.children[0].$.removeClass("smart-close-button-enabled"),e.firstElementChild.children[1].$.addClass("smart-hidden")}_indexChangeHandler(e){const t=this,n=e.detail.oldIndex,o=Math.max(0,Math.min(e.detail.newIndex,t._tabs.length-1));if(n!==o){if(0===t._groups.length)t._reorderTabs(n,o);else{const a=e.detail.tabItem;a._setIndex(n),t.remove(n),t.insert(o,{node:a}),t.selectedIndex===n&&t._select(o,!1)}t._reorderedIndex=void 0}}_insertAddNewTab(){const e=this,t=e._addTabLabelContainer(void 0,!0).tabLabelContainer;t.$.addClass("smart-add-new-tab"),e.$.tabStrip.appendChild(t),e._addNewTab=t}_insertIntoExistingGroup(e){const t=this,n=e.smartTabItemsGroup,o=e.tab,a=e.tabLabelContainer,r=e.group,i=t._groupLabels[t._groups.indexOf(r)],s=i.dropDown;let l=e.index;l=Math.max(0,Math.min(l,n.childElementCount)),s.insertBefore(a,s.children[l]);const d=n.children[l];let b;b=d?d.index:n.children[l-1].index+1,n.insertBefore(o,d),t._tabLabelContainers.splice(b,0,a),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[b]||null),t._tabs.splice(b,0,o),l=b,o.group=r,t._updateIndexes(l)}_insertIntoNewGroup(e){const t=this,n=e.tab,o=e.tabLabelContainer,a=e.group,r=t._addGroupContainer(a),i=r.label,s=r.dropDown;s.appendChild(o),t._groups.push(a);let l=Math.max(0,Math.min(e.index,t.$.tabStrip.childElementCount)),d=l;t._addNewTab&&d===t.$.tabStrip.childElementCount&&d--,t.$.tabStrip.insertBefore(i,t.$.tabStrip.children[d]||null),t._groupLabels.push(i);const b=document.createElement("smart-tab-items-group");b.appendChild(n),t.$.tabContentSection.insertBefore(b,t.$.tabContentSection.children[l]),b.label=a;const p=b.previousElementSibling;let c=0;p&&(p instanceof Smart.TabItem?c=p.index+1:c=p.lastElementChild.index+1),t._tabLabelContainers.splice(c,0,o),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[c]||null),t._tabs.splice(c,0,n),l=c,n.group=a,t._updateIndexes(l)}_insertNearAGroup(e){const t=this,n=e.tab,o=e.tabLabelContainer;let a=e.index;a=Math.max(0,Math.min(a,t._tabs.length));const r=t._tabs[a-1],i=t._tabs[a],s=i?i.group:void 0;r&&null!==r.group&&i&&null!==s?(i.tabLabelContainer.parentElement.insertBefore(o,i.tabLabelContainer),i.parentElement.insertBefore(n,i),n.group=s):i?null===s?(t.$.tabStrip.insertBefore(o,i.tabLabelContainer),t.$.tabContentSection.insertBefore(n,i)):(t.$.tabStrip.insertBefore(o,t._groupLabels[t._groups.indexOf(s)]),t.$.tabContentSection.insertBefore(n,t.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+s+"\"]"))):(t.$.tabStrip.insertBefore(o,t._addNewTab||null),t.$.tabContentSection.appendChild(n)),t._tabLabelContainers.splice(a,0,o),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[a]||null),t._tabs.splice(a,0,n),t._updateIndexes(a)}_insertNoGrouping(e){const t=this,n=Math.max(0,Math.min(e.index,t._tabs.length)),o=e.tab,a=e.tabLabelContainer;t.$.tabStrip.insertBefore(a,t._tabLabelContainers[n]||t._addNewTab||null),t.$.tabContentSection.insertBefore(o,t._tabs[n]||null),t._tabLabelContainers.splice(n,0,a),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[n]||null),t._tabs.splice(n,0,o),t._updateIndexes(n)}_keydownHandler(e){const t=this,n=e.key;if(document.activeElement!==t||-1===["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","End","Home"].indexOf(n)||t.disabled||t.readonly||"none"===t.selectionMode||null===t.selectedIndex)return;e.preventDefault();const o=t._tabs.length-1;let a;switch(n){case"ArrowLeft":case"ArrowUp":if(0===t.selectedIndex)return;a=t.selectedIndex-1;break;case"ArrowRight":case"ArrowDown":if(t.selectedIndex===o)return;a=t.selectedIndex+1;break;case"End":if(t.selectedIndex===o)return;a=o;break;case"Home":if(0===t.selectedIndex)return;a=0;}t.select(a)}_labelContainerHandler(e,t,n){const o=this,a="up"===n&&o._downTarget===e;if("down"===n&&(o._downTarget=e,"click"===o.selectionMode&&e!==o._addNewTab))if(Smart.Utilities.Core.isMobile&&null===e.tab.group){const n=o.$.tabStrip[o._orientationSettings.scrollDirection];setTimeout(function(){if(n===o.$.tabStrip[o._orientationSettings.scrollDirection]){const n=o._ripple(t,e);n&&o._openDropDown&&o._openDropDown.contains(e)&&(o._openDropDown.rippleInProgress=!0)}},100)}else{const n=o._ripple(t,e);n&&o._openDropDown&&o._openDropDown.contains(e)&&(o._openDropDown.rippleInProgress=!0)}if(e===o._addNewTab)return void o._addNewTabHandler(e,n,a);const r=e.tab.index,i=!(o._reordering&&o._reorderedIndex!==void 0);a&&r===o.selectedIndex&&(o._closeGroupDropDown(),i&&null===e.tab.group&&o._toggleCollapsedState()),!o._swiping&&(i&&"click"===o.selectionMode&&a||!o._reordering&&(o.selectionMode===n||"mouseenter"===o.selectionMode&&"mouseover"===n))&&o._select(r,!0),o._reordering||o._swiping||"click"!==o.selectionMode&&"dblclick"!==o.selectionMode||("mouseover"!==n||e.$.hasClass("smart-tab-selected")?"mouseout"===n&&e.$.removeClass("smart-tab-hovered"):e.$.addClass("smart-tab-hovered")),o.reorder&&"down"===n&&null===e.tab.group&&1<o._reorderItems.length&&(o._getTabCoordinates(),o._reordering=!0,o.setAttribute("dragged",""),e.$.hasClass("smart-tab-hovered")&&(o._draggedHoveredTab=e),o._draggedIndex=0===o._groups.length?e.tab.index:Array.from(o.$.tabStrip.children).indexOf(e))}_labelSizeChangeHandler(e){const t=this,n=e.detail.size;let o;"shrink"===t.tabLayout||(o=e.target instanceof Smart.TabItem?e.target.tabLabelContainer:t._groupLabels[t._groups.indexOf(e.target.label)],null===n?o.style.removeProperty(t._orientationSettings.dimension):o.style[t._orientationSettings.dimension]=parseInt(n,10)+"px",t._applyTabOverflow())}_orderTabs(){const e=this,t=e.getElementsByTagName("smart-tab-items-group"),n=[],o=[];let a=!0,r=!1;if(0===t.length)for(let t=0;t<e._tabs.length;t++){const i=e._tabs[t],s=i.index;if(a&&null!==s&&(a=!1),-1!==n.indexOf(s||0)&&(r=!0,null!==s))break;n.push(s||0),o.push({tab:i,index:s})}if(!r){const e=n.slice(0).sort(function(e,t){return e-t});JSON.stringify(n)===JSON.stringify(e)&&(a=!0)}if(!a&&!r){o.sort(function(e,t){return e.index-t.index});for(let t=0;t<o.length;t++){const n=o[t].tab;n._setIndex(t),e.$.tabContentSection.removeChild(n)}for(let t=0;t<o.length;t++){const n=o[t].tab;e.$.tabContentSection.appendChild(n),e._tabs[t]=n}}else{a||console.warn(e.localize("ambiguousIndexes"));for(let t=0;t<e._tabs.length;t++)e._tabs[t]._setIndex(t)}}_populateTabStrip(){const e=this,t=document.createDocumentFragment(),n=[],o=[],a=[];for(let r=0;r<e._tabs.length;r++){const i=e._tabs[r],s=i.parentElement,l=s instanceof Smart.TabItemsGroup?s.label:null;i.group=l;const d=e._addTabLabelContainer(i),b=d.tabLabelContainer,p=d.dropDownLabelContainer;e.selectedIndex===r&&b.$.addClass("smart-tab-selected"),i.tabLabelContainer=b,b.tab=i,n.push(b),null===l?t.appendChild(b):e._addGroupElements({documentFragment:t,groups:o,groupLabels:a,i:r,group:l,tabLabelContainer:b,smartTabItemsGroup:s}),e.$.dropDownButtonDropDown.appendChild(p)}e.$.tabStrip.appendChild(t),e._tabLabelContainers=n,e._groups=o,e._groupLabels=a}_positionGroupDropDown(e,t){const n=this,o=n.tabPosition;if("top"===o||"bottom"===o){const a=-1!==n.theme.indexOf("material");if(e.style.left=t.offsetLeft-n.$.tabStrip.scrollLeft+"px","top"===o)a||(e.style.top=t.offsetTop+t.offsetHeight+"px");else{let o=t.getBoundingClientRect().top-n.$.container.getBoundingClientRect().top;a&&(o+=n.$.tabStrip.offsetHeight),e.style.top=o+"px"}}else e.style.top=t.offsetTop-n.$.tabStrip.scrollTop+"px",e.style.left="left"===o?t.offsetLeft+t.offsetWidth+"px":t.getBoundingClientRect().left-n.$.container.getBoundingClientRect().left+"px"}_processDataSource(){function e(t,n){let o;if(t.items instanceof Array&&0<t.items.length){o=document.createElement("smart-tab-items-group");for(let n=0;n<t.items.length;n++)t.items[n].items||e(t.items[n],o)}else o=document.createElement("smart-tab-item"),!0===t.closeButtonHidden&&(o.closeButtonHidden=!0),void 0!==t.content&&(o.innerHTML=t.content),void 0!==t.index&&(o.index=t.index),!0===t.selected&&(o.selected=t.selected);t.label!==void 0&&(o.label=t.label),t.labelSize!==void 0&&(o.labelSize=t.labelSize),n.appendChild(o)}const t=this,n=t.dataSource;t.$.tabContentSection.innerHTML="";for(let o=0;o<n.length;o++){const a=n[o];e(a,t.$.tabContentSection)}}_processHTML(){const e=this;e._getTabs(),e._orderTabs(),e._validateInitialSelection(),e._populateTabStrip(),e.addNewTab&&e._insertAddNewTab(),e._getReorderItems(),e._applyTabOverflow(),e.ensureVisible(e.selectedIndex)}_removeInlineStyle(){const e=this,t=e.$.tabStrip;if(e._inlineStyleTabStripChildren){const n=t.children;for(let e=0;e<n.length;e++)n[e].removeAttribute("style"),n[e].firstElementChild.firstElementChild.classList.remove("smart-tab-label-text-container-full-height");delete e._inlineStyleTabStripChildren}e._inlineStyleTabStrip&&(t.removeAttribute("style"),delete e._inlineStyleTabStrip),t.$.removeClass("shrink-tabs")}_reorderTabs(e,t){function n(e,t,n){const o=e[t];e.splice(t,1),e.splice(n,0,o)}const o=this;if(0===o._groups.length){const a=o._tabs,r=o._tabLabelContainers,i=e>t?t:t+1;o.selectedIndex===e?o.selectedIndex=t:o.selectedIndex<=t&&o.selectedIndex>e?o.selectedIndex--:o.selectedIndex>=t&&o.selectedIndex<e&&o.selectedIndex++;let s;s=r[i]?r[i]:o.addNewTab?o._addNewTab:null,o.$.tabStrip.insertBefore(r[e],s),o.$.dropDownButtonDropDown.insertBefore(o.$.dropDownButtonDropDown.children[e],o.$.dropDownButtonDropDown.children[i]||null),o.$.tabContentSection.insertBefore(a[e],a[i]||null),n(a,e,t),n(r,e,t),o._updateTabIndexes()}else o._reorderTabsGrouping(e,t);o.$.fireEvent("reorder",{newIndex:t,originalIndex:e}),o._reorderedIndex=t}_reorderTabsGrouping(e,t){const n=this,o=n.$.tabStrip.children,a=n.$.tabContentSection.children,r=e>t?t:t+1,i=n._tabs[n.selectedIndex];n.$.tabStrip.insertBefore(o[e],o[r]||null),n.$.tabContentSection.insertBefore(a[e],a[r]||null),n._groupLabels=Array.from(n.$.tabStrip.getElementsByClassName("smart-tab-group-container")),n._groups=[];for(let o=0;o<n._groupLabels.length;o++)n._groups.push(n._groupLabels[o].group);n._tabs=Array.from(n.$.tabContentSection.getElementsByTagName("smart-tab-item"));const s=document.createDocumentFragment();let l=[];for(let o=0;o<n._tabs.length;o++)s.appendChild(n.$.dropDownButtonDropDown.children[n._tabs[o].index].cloneNode(!0));n.$.dropDownButtonDropDown.innerHTML="",n.$.dropDownButtonDropDown.appendChild(s);for(let o=0;o<n.$.tabStrip.childElementCount;o++){const e=n.$.tabStrip.children[o];e.$.hasClass("smart-tab-label-container")&&e!==n._addNewTab?l.push(e):e.$.hasClass("smart-tab-group-container")&&(l=l.concat(Array.from(e.dropDown.children)))}n._tabLabelContainers=l,n._updateTabIndexes(),i&&(n.selectedIndex=i.index)}_resize(e){const t=this;if(!t._resizing)return;const n=t._orientationSettings,o=e[n.coordinate]-t._resizeFrom,a=t._getCorrespondingCustomElement(t._tabToResize);let r=null===a.labelSize?t._tabToResize[n.size]:a.labelSize;const i=Math.max(10,r+o);i!==r&&(a._preventPropertyChangedHandler=!0,a.labelSize=i,t._tabToResize.style[n.dimension]=parseInt(i,10)+"px"),t.$resizeToken.addClass("smart-hidden"),t._applyTabOverflow(),t._resizing=!1,t.removeAttribute("resizing")}_ripple(e,t){const n=this;if(-1!==n.theme.indexOf("material")){const n=document.createElement("div");return n.className="ripple-agent",t.firstElementChild.appendChild(n),setTimeout(function(){t.firstElementChild.removeChild(n)},1e3),Smart.Utilities.Animation.Ripple.animate(n,e.pageX,e.pageY),!0}}_scrollButtonFarClickHandler(){const e=this,t=e.$.tabStrip;e.$.scrollButtonFar.disabled||("top"===e.tabPosition||"bottom"===e.tabPosition?t.scrollLeft+=10:t.scrollTop+=10,e._updateScrollButtonVisibility())}_scrollButtonNearClickHandler(){const e=this,t=e.$.tabStrip;e.$.scrollButtonNear.disabled||("top"===e.tabPosition||"bottom"===e.tabPosition?t.scrollLeft-=10:t.scrollTop-=10,e._updateScrollButtonVisibility())}_select(e,t,n){const o=this,a=o.$.hasClass("animation");if(void 0===n&&(n=o.selectedIndex),e!==n){const r=o._tabs[e];if(null!==n){const t=o._tabs[n];a?o._animateSelection(r,t,e>n):t.$.addClass("smart-visibility-hidden"),t.selected=!1,o._tabLabelContainers[n].$.removeClass("smart-tab-selected"),o.closeButtons&&"selected"===o.closeButtonMode&&o._disableCloseButton(n)}r.selected=!0,null!==n&&a||r.$.removeClass("smart-visibility-hidden"),o.selectedIndex!==e&&(o.selectedIndex=e),o._tabLabelContainers[e].$.removeClass("smart-tab-hovered"),o._tabLabelContainers[e].$.addClass("smart-tab-selected"),o.closeButtons&&"selected"===o.closeButtonMode&&o._enableCloseButton(e),t&&(o.$.hiddenInput.value=e,o.$.fireEvent("change",{index:e,oldIndex:n})),o._closeGroupDropDown(),null===r.group?o._selectedGroup&&(o._selectedGroup.$.removeClass("smart-tab-group-selected"),delete o._selectedGroup):(!o._selectedGroup||o._selectedGroup.group!==r.group)&&(o._selectedGroup&&o._selectedGroup.$.removeClass("smart-tab-group-selected"),o._selectedGroup=o._groupLabels[o._groups.indexOf(r.group)],o._selectedGroup.$.addClass("smart-tab-group-selected"))}}_selectStartHandler(e){const t=this;(t._reordering||t._resizing)&&e.preventDefault()}_setLabel(e,t,n){const o=document.getElementById(e);if(null!==o&&"template"===o.tagName.toLowerCase()){const e=document.importNode(o.content,!0);if(t.appendChild(e),n){const e=document.importNode(o.content,!0);n.appendChild(e)}}else""===e&&(e="&nbsp;"),t.innerHTML=e,n&&(n.innerHTML=e)}_showCloseButton(e){e.closeButtonEnabled&&(e.firstElementChild.children[0].$.addClass("smart-close-button-enabled"),e.firstElementChild.children[1].$.removeClass("smart-hidden"))}_tabContentSectionTransitionendHandler(e){const t=this,n=e.target;n===t._animatedOldTab?(n.$.addClass("smart-hidden"),n.$.removeClass("animate"),n.$.removeClass(t._animatedOldTab.classToRemove),n.$.removeClass("smart-hidden"),delete t._animatedOldTab):n===t._animatedTab&&(n.$.removeClass("animate"),delete t._animatedTab)}_tabsHeaderItemsWheelHandler(e){const t=this,n=t._orientationSettings;if(!(!t.enableMouseWheelAction||t._wheelInProgress||t.disabled||t.$.tabStrip[n.size]===t.$.tabStrip[n.scrollSize])){e.preventDefault(),t._dragStartDetails={startX:e.pageX,startY:e.pageY,pageX:e.pageX,pageY:e.pageY,startTime:Date.now(),target:e.target},t._wheelInProgress=!0;const o={};o[n.coordinate]=e[n.coordinate]+(0<e.deltaY?-1:1)*n.wheelOffset,t._endSwiping(o,t._dragStartDetails.startTime+100)}}_tabStripHandler(e,t){const n=this,o=t.type;if("down"===o&&void 0!==n._tabToResize)return n._resizing=!0,void(n._tabsHeaderSectionCoordinate=n.$.tabsHeaderSection.getBoundingClientRect()[n._orientationSettings.edge]);"down"===o&&Smart.Utilities.Core.isMobile&&(n._dragStartDetails={startX:t.pageX,startY:t.pageY,pageX:t.pageX,pageY:t.pageY,startTime:Date.now(),originalTime:Date.now(),target:t.originalEvent.target});const a=e.closest("smart-repeat-button");if("up"===o&&a)return n.focus(),void(n.resize&&n._getTabCoordinates());if(e.classList.contains("smart-tab-close-button"))if("up"!==o){if("down"===o)return void(n._downTarget=e);n._reordering||n._swiping||("mouseover"===o?e.$.addClass("smart-tab-close-button-hovered"):"mouseout"===o&&e.$.removeClass("smart-tab-close-button-hovered"))}else if(e===n._downTarget){const t=e.parentElement.parentElement.tab.index,o=n.$.fireEvent("closing",{index:t});return void(o.defaultPrevented||(n.remove(t),n.$.fireEvent("close",{index:t})))}const r=e.closest(".smart-tab-label-container");if(null!==r)return void n._labelContainerHandler(r,t,o);const i=e.closest(".smart-tab-group-container");null!==i&&n._groupContainerHandler(i,o),null!==a&&"down"===o&&n._ripple(t,a)}_tabStripMouseleaveHandler(){const e=this;e.resize&&!e._resizing&&e.hasAttribute("resizing")&&e.removeAttribute("resizing")}_tabStripMoveHandler(e){const t=this;if(t._dragStartDetails&&!t._dragStartDetails.checked&&(t._dragStartDetails.pageX!==e.pageX||t._dragStartDetails.pageY!==e.pageY)&&(500>Date.now()-t._dragStartDetails.originalTime?(t._endReordering(void 0,void 0),t._dragStartDetails.checked=!0):delete t._dragStartDetails),t._dragStartDetails){const n=t._orientationSettings,o=t._dragStartDetails[n.coordinate]-e[n.coordinate],a=t.$.tabStrip[n.scrollDirection];return t.$.tabStrip[n.scrollDirection]+=o,a!==t.$.tabStrip[n.scrollDirection]&&t._updateScrollButtonVisibility(),t._dragStartDetails={startX:t._dragStartDetails.startX,startY:t._dragStartDetails.startY,pageX:e.pageX,pageY:e.pageY,startTime:t._dragStartDetails.startTime,originalTime:t._dragStartDetails.originalTime,target:e.originalEvent.target,checked:t._dragStartDetails.checked},void(t._swiping=!0)}if(!t.resize||t._resizing||t._reordering||"shrink"===t.tabLayout)return;const n=t._orientationSettings,o=e[n.coordinate],a=t._tabCoordinates;let r;for(let s=0;s<a.length;s++){const e=a[s][n.to];if(o>=e-4&&o<=e+4){r=t._reorderItems[s],t._resizeFrom=o;break}}void 0===r?(t._tabToResize=void 0,t.removeAttribute("resizing")):(t._tabToResize=r,t.setAttribute("resizing",""))}_toggleCollapsedState(){const e=this;e.collapsible&&(e.collapsed?e.expand():e.collapse())}_toggleNavigationElementsVisibility(){const e=this,t=e._tabs.length;let n;if(0===t)n="addClass";else if(1===t)n="removeClass";else return;"scroll"===e.tabLayout&&"scroll"===e.overflow?(e.$scrollButtonNear[n]("smart-hidden"),e.$scrollButtonFar[n]("smart-hidden")):"dropdown"===e.tabLayout&&e.$dropDownButton[n]("smart-hidden")}_updateIndexes(e){const t=this;null!==t.selectedIndex&&e<=t.selectedIndex&&t.selectedIndex++,t._updateTabIndexes()}_updateScrollButtonVisibility(){var e=Math.round;const t=this;if("scroll"!==t.tabLayout||"hidden"===t.overflow)return;const n=t.$tabsHeaderSection,o=t.$.tabStrip,a=t._orientationSettings;let r=!0,i=!0;if(0===e(o[a.scrollDirection])&&(r=!1),e(o[a.size]+o[a.scrollDirection])>=e(o[a.scrollSize])&&(i=!1),"auto"===t.overflow){if(r&&i)return t.$scrollButtonNear.removeClass("smart-hidden"),t.$scrollButtonFar.removeClass("smart-hidden"),void n.removeClass("one-button-shown");r?t.$scrollButtonNear.removeClass("smart-hidden"):t.$scrollButtonNear.addClass("smart-hidden"),i?t.$scrollButtonFar.removeClass("smart-hidden"):t.$scrollButtonFar.addClass("smart-hidden"),n.addClass("one-button-shown"),t._getTabCoordinates()}else"scroll"!==t.overflow||t.disabled||(t.$.scrollButtonNear.disabled=!r,t.$.scrollButtonFar.disabled=!i)}_updateTabIndexes(){const e=this;if(0<e._tabs.length)for(let t=0;t<e._tabs.length;t++)e._tabs[t]._setIndex(t);else e.selectedIndex=null}_validateIndex(e,t){if(isNaN(parseInt(e,10))||"object"==typeof e){const e=this;e.error(e.localize("invalidIndex",{method:t}))}}_validateInitialSelection(){const e=this;let t=e.selectedIndex;for(let n=0;n<e._tabs.length;n++){const o=e._tabs[n];t===n?o.selected=!0:o.selected?null===t?t=n:(o.selected=!1,o.$.addClass("smart-visibility-hidden")):o.$.addClass("smart-visibility-hidden")}0<e._tabs.length&&null===t&&(t=0,e._tabs[0].selected=!0,e._tabs[0].$.removeClass("smart-visibility-hidden")),e.selectedIndex=t}});