
/* Smart HTML Elements v1.1.0 (2018-June) 
Copyright (c) 2011-2018 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-toast",class extends Smart.ContentElement{static get properties(){return{appendTo:{value:null,type:"any"},autoClose:{value:!1,type:"boolean"},autoCloseDelay:{value:3e3,type:"number"},autoOpen:{value:!1,type:"boolean"},itemTemplate:{value:null,type:"string?"},modal:{value:!1,type:"boolean"},position:{allowedValues:["top-left","top-right","bottom-left","bottom-right"],value:"top-right",type:"string"},showCloseButton:{value:!1,type:"boolean"},type:{allowedValues:["info","warning","success","error","mail","time",null],value:"info",type:"string?"},value:{value:"",type:"any"}}}static get listeners(){return{"toastContainerTopLeft.click":"_containerClickHandler","toastContainerTopLeft.swipeleft":"_swipeHandler","toastContainerTopLeft.swiperight":"_swipeHandler","toastContainerTopLeft.swipetop":"_swipeHandler","toastContainerTopLeft.swipebottom":"_swipeHandler","toastContainerTopRight.click":"_containerClickHandler","toastContainerTopRight.swipeleft":"_swipeHandler","toastContainerTopRight.swiperight":"_swipeHandler","toastContainerTopRight.swipetop":"_swipeHandler","toastContainerTopRight.swipebottom":"_swipeHandler","toastContainerBottomLeft.click":"_containerClickHandler","toastContainerBottomLeft.swipeleft":"_swipeHandler","toastContainerBottomLeft.swiperight":"_swipeHandler","toastContainerBottomLeft.swipetop":"_swipeHandler","toastContainerBottomLeft.swipebottom":"_swipeHandler","toastContainerBottomRight.click":"_containerClickHandler","toastContainerBottomRight.swipeleft":"_swipeHandler","toastContainerBottomRight.swiperight":"_swipeHandler","toastContainerBottomRight.swipetop":"_swipeHandler","toastContainerBottomRight.swipebottom":"_swipeHandler","toastContainerCustom.click":"_containerClickHandler","toastContainerCustom.swipeleft":"_swipeHandler","toastContainerCustom.swiperight":"_swipeHandler","toastContainerCustom.swipetop":"_swipeHandler","toastContainerCustom.swipebottom":"_swipeHandler","toastContainerModal.click":"_containerClickHandler","toastContainerModal.swipeleft":"_swipeHandler","toastContainerModal.swiperight":"_swipeHandler","toastContainerModal.swipetop":"_swipeHandler","toastContainerModal.swipebottom":"_swipeHandler"}}template(){return`<div id="container">
                    <div id="toastContainerTopLeft" class ="smart-toast-container-top-left"></div>
                    <div id="toastContainerTopRight" class ="smart-toast-container-top-right"></div>
                    <div id="toastContainerBottomLeft" class ="smart-toast-container-bottom-left"></div>
                    <div id="toastContainerBottomRight" class ="smart-toast-container-bottom-right"></div>
                    <div id="toastContainerCustom" class ="smart-toast-container-custom"></div>
                    <div id="toastContainerModal" class ="smart-toast-container-modal"></div>
                </div>`}propertyChangedHandler(a,b,c){const d=this;let e;switch(super.propertyChangedHandler(a,b,c),a){case"value":e=d._instances[d._instances.length-1],e&&(e.getElementsByClassName("smart-toast-item-content")[0].innerHTML=c);break;case"appendTo":null!==b&&null!==c?d.appendTo=b:null===c&&0===d.$.toastContainerCustom.childNodes.length&&d.$.container.appendChild(d.$.toastContainerCustom),d._handleContainers();break;case"modal":case"position":d._handleContainers();break;default:}}attached(){const a=this,b=["TopLeft","TopRight","BottomLeft","BottomRight","Custom","Modal"];super.attached();for(let c=0;c<b.length;c++){const d=a.$["toastContainer"+b[c]];d._parent=a,d.closest("smart-toast")&&0<d.childNodes.length&&("Custom"===b[c]?a._appendTo.appendChild(a._container):document.body.appendChild(d))}}detached(){const a=this,b=["TopLeft","TopRight","BottomLeft","BottomRight","Custom","Modal"];super.detached();for(let c=0;c<b.length;c++){const d=a.$["toastContainer"+b[c]],e=d.childNodes;d.closest("smart-toast")||a.$.container.appendChild(d);for(let a=0;a<e.length;a++)e[a]._parent._close(e[a]);a.closeAll()}}ready(){super.ready();const a=this;a.value=a.$.content.innerHTML=a.value?a.value:a.innerHTML,a._instances=[],a._handleContainers(),a.autoOpen&&a.open()}closeAll(){const a=this;for(var b=a._instances.length-1;-1<b;b--)a._close(a._instances[b])}closeItem(a){const b=this;a&&0!==b._instances.length&&("string"==typeof a?a=document.getElementById(a):a instanceof HTMLElement&&(a=a.closest(".smart-toast-item")),a&&-1!==b._instances.indexOf(a)&&b._close(a))}closeLast(){const a=this;0<a._instances.length&&a._close(a._instances[a._instances.length-1])}open(){const a=this;if(a.disabled)return;-1===Array.from(document.body.childNodes).indexOf(a._container)&&a._handleContainers();let b=document.createElement("div");b.className="smart-toast-item",a.value instanceof HTMLElement?(b.innerHTML=a._defaultItemTemplate(""),b.getElementsByClassName("smart-toast-item-content")[0].appendChild(a.value)):b.innerHTML=a._handleItemTemplate()||a._defaultItemTemplate(a.value),a.showCloseButton&&b.setAttribute("show-close-button","");for(let c=0;c<a.classList.length;c++)b.classList.add(a.classList[c]);a.type&&b.classList.add("smart-"+a.type),b._parent=a,a._container.appendChild(b),a._instances.push(b),a.$.fireEvent("open",{instance:b}),setTimeout(function(){b.setAttribute("opened","")},10),a.autoClose&&(b._autoCloseTimeout=setTimeout(function(){a._close(b)},a.autoCloseDelay))}_containerClickHandler(a){const b=this,c=a.target.closest(".smart-toast-item-close-button"),d=a.target.closest(".smart-toast-item");c||d?(d._parent.$.fireEvent("click",{instance:d}),c&&d._parent._close(d)):b.modal&&b.closeAll()}_close(a){const b=this;if(-1<b._instances.indexOf(a)){const c=window.getComputedStyle(a,null).getPropertyValue("transition-duration"),d=-1<c.indexOf("ms")?parseInt(c):1e3*parseFloat(c);a.removeAttribute("opened"),b._instances.splice(b._instances.indexOf(a),1),setTimeout(function(){clearTimeout(a._autoCloseTimeout),b.$.fireEvent("close",{instance:a}),a.parentNode&&a.parentNode.removeChild(a)},d)}}_defaultItemTemplate(a){return`<div class ="smart-toast-item-header">
                    <span class ="smart-toast-item-close-button"></span>
                </div>
                <div class ="smart-toast-item-container">
                    <span class ="smart-toast-item-icon"></span><span class ="smart-toast-item-content">${a}</span>
                </div>`}_handleContainers(){const a=this,b=a._validateDOMElement(a.appendTo);if(a.modal)a._container=a.$.toastContainerModal,document.body.appendChild(a._container);else if(b)a._container=a.$.toastContainerCustom,a._appendTo=b,a._appendTo.appendChild(a._container);else{const b=document.querySelectorAll("body > .smart-toast-container-"+a.position)[0];if(!b){switch(a.position){case"top-left":a._container=a.$.toastContainerTopLeft;break;case"top-right":a._container=a.$.toastContainerTopRight;break;case"bottom-left":a._container=a.$.toastContainerBottomLeft;break;case"bottom-right":a._container=a.$.toastContainerBottomRight;}document.body.appendChild(a._container),a.appendTo=null,a._appendTo=null}else a._container=b}}_handleItemTemplate(){const a=this;let b=a.itemTemplate;if(!("content"in document.createElement("template")))return void a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()}));if(!b)return a._defaultItemTemplate(a.value);if(b=document.getElementById(b),null===b||!("content"in b))return void a.error(a.localize("invalidTemplate",{elementType:a.nodeName.toLowerCase(),property:"template"}));const c=b.innerHTML,d=/{{\w+}}/g;return c.replace(d,a.value)}_swipeHandler(a){const b=this,c=a.originalEvent.target.closest(".smart-toast-item");c&&b.$.fireEvent(a.type,{instance:c})}_validateDOMElement(a){if(a)return"string"==typeof a?document.getElementById(a):a instanceof HTMLElement?a:void 0}});