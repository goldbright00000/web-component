
/* Smart HTML Elements v1.1.0 (2018-June) 
Copyright (c) 2011-2018 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-tooltip",class extends Smart.ContentElement{static get properties(){return{arrow:{value:!1,type:"boolean"},arrowDirection:{allowedValues:["bottom","top","left","right"],value:"bottom",type:"string"},delay:{value:0,type:"number"},messages:{extend:!0,value:{en:{invalidSelector:"{{elementType}}: \"{{property}}\" must be a String, an HTMLElement or null.",htmlTemplateNotSuported:"{{elementType}}: Browser doesn't support HTMLTemplate elements.",invalidTemplate:"{{elementType}}: \"{{property}}\" property accepts a string that must match the id of an HTMLTemplate element from the DOM.",invalidNode:"{{elementType}}: Invalid parameter \"{{node}}\" when calling {{method}}."}},type:"object"},offset:{value:[0,0],type:"array"},openMode:{allowedValues:["click","focus","hover","manual"],value:"hover",type:"string"},position:{allowedValues:["bottom","top","left","right","absolute"],value:"top",type:"string"},selector:{value:null,type:"any?"},tooltipTemplate:{value:null,type:"any"},value:{value:"",type:"string",reflectToAttribute:!1},visible:{value:!1,type:"boolean"}}}template(){return`<div id="container">
                    <div id="content" class="smart-tooltip-content" inner-h-t-m-l="[[innerHTML]]">
                        <content></content>
                    </div>
                </div>`}propertyChangedHandler(a,b,c){super.propertyChangedHandler(a,b,c);const d=this;let e;"openMode"===a?(d.close(),d._handleEventListeners(b),d._handleResize()):"selector"===a?(d._oldOwnerElement=d._ownerElement,d._handleSelector(c),d._handleEventListeners()):"tooltipTemplate"===a?d._handleTemplate(b):"value"===a?d.tooltipTemplate?d._handleTemplate():d.$.content.innerHTML=d.value:"visible"===a?(e=c?"open":"close",d.$.fireEvent(e,{owner:d._ownerElement})):void 0;d._applyPosition()}ready(){const a=this;super.ready(),a._isParentPositionStatic="static"===window.getComputedStyle(a.parentElement||document.querySelector("body")).position,a._handleSelector(a.selector),a._applyPosition(),a._handleEventListeners(),a._handleResize(),a.value=a.$.content.innerHTML=a.value?a.value:a.innerHTML,a._handleTemplate()}appendChild(a){const b=this;if(!b.isCompleted){const a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(b,a.concat(Array.prototype.slice.call(arguments)))}return a?void(b.$.content.appendChild(a),b._applyPosition()):void b.error(b.localize("invalidNode",{elementType:b.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}close(){const a=this;a._isOpening&&clearTimeout(a._isOpening);a.visible&&(a.$.fireEvent("close",{owner:a._ownerElement}),a.visible=!1)}insertBefore(a,b){const c=this;if(!c.isCompleted){const a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(c,a.concat(Array.prototype.slice.call(arguments)))}return a&&b?void(c.$.content.insertBefore(a,b),c._applyPosition()):void c.error(c.localize("invalidNode",{elementType:c.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}))}open(){const a=this;a.disabled||a.readonly||a.visible||(a._isOpening=setTimeout(function(){a._applyPosition(),a.$.fireEvent("open",{owner:a._ownerElement}),a.visible=!0},a.delay))}removeChild(a){const b=this;if(!b.isCompleted){const a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(b,a.concat(Array.prototype.slice.call(arguments)))}return a?void(b.$.content.removeChild(a),b._applyPosition()):void b.error(b.localize("invalidNode",{elementType:b.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}toggle(){const a=this;a.visible?a.close():a.open()}_applyPosition(){function a(a){let b=[],c=a;for(;"BODY"!==c.nodeName&&c.parentNode;)c=c.parentNode,b.push(c);return b}const b=this;if(!b._ownerElement)return;if(!b.parentElement)return;b._isParentPositionStatic="static"===window.getComputedStyle(b.parentElement).position;const c=b._ownerElement.getBoundingClientRect(),d=b.parentElement?b.parentElement.getBoundingClientRect():{top:0,left:0};let e,f;b.parentElement&&"BODY"===b.parentElement.nodeName.toUpperCase()?(e=c.top+window.scrollY+parseInt(b.offset[1]),f=c.left+window.scrollX+parseInt(b.offset[0])):(e=c.top-d.top+parseInt(b.offset[1]),f=c.left-d.left+parseInt(b.offset[0]));const g=function(){const c=a(b),d=c.length;let e=null,f=b._ownerElement.getBoundingClientRect();for(let a,b=0;b<d;b++)if(a=window.getComputedStyle(c[b]),"static"!==a.getPropertyValue("position")){e=c[b];break}return{top:f.top,left:f.left,nonStaticParent:e}}();switch(b.position){case"bottom":if(b.arrowDirection="top",null===g.nonStaticParent){b.style.top=g.top+window.scrollY+b._ownerElement.offsetHeight+"px",b.style.left=g.left+window.scrollX-b.offsetWidth/2+b._ownerElement.offsetWidth/2+"px";break}if(b._isParentPositionStatic){b.style.top=b._ownerElement.offsetTop+b._ownerElement.offsetHeight+"px",b.style.left=b._ownerElement.offsetLeft-b.offsetWidth/2+b._ownerElement.offsetWidth/2+"px";break}b.style.top=e+b._ownerElement.offsetHeight+"px",b.style.left=f-b.offsetWidth/2+b._ownerElement.offsetWidth/2+"px";break;case"top":if(b.arrowDirection="bottom",null===g.nonStaticParent){b.style.top=g.top+window.scrollY-b.offsetHeight+"px",b.style.left=g.left+window.scrollX-b.offsetWidth/2+b._ownerElement.offsetWidth/2+"px";break}if(b._isParentPositionStatic){b.style.top=b._ownerElement.offsetTop-b.offsetHeight+"px",b.style.left=b._ownerElement.offsetLeft-b.offsetWidth/2+b._ownerElement.offsetWidth/2+"px";break}b.style.top=e-b.offsetHeight+"px",b.style.left=f-b.offsetWidth/2+b._ownerElement.offsetWidth/2+"px";break;case"left":if(b.arrowDirection="right",null===g.nonStaticParent){b.style.top=g.top+window.scrollY+b._ownerElement.offsetHeight/2-b.$.content.offsetHeight/2+"px",b.style.left=g.left+window.scrollX-b.offsetWidth+"px";break}if(b._isParentPositionStatic){b.style.top=b._ownerElement.offsetTop+b._ownerElement.offsetHeight/2-b.$.content.offsetHeight/2+"px",b.style.left=b._ownerElement.offsetLeft-b.offsetWidth+"px";break}b.style.top=e+b._ownerElement.offsetHeight/2-b.$.content.offsetHeight/2+"px",b.style.left=f-b.offsetWidth+"px";break;case"right":if(b.arrowDirection="left",null===g.nonStaticParent){b.style.top=g.top+window.scrollY+b._ownerElement.offsetHeight/2-b.$.content.offsetHeight/2+"px",b.style.left=g.left+window.scrollX+b._ownerElement.offsetWidth+"px";break}if(b._isParentPositionStatic){b.style.top=b._ownerElement.offsetTop+b._ownerElement.offsetHeight/2-b.$.content.offsetHeight/2+"px",b.style.left=b._ownerElement.offsetLeft+b._ownerElement.offsetWidth+"px";break}b.style.top=e+b._ownerElement.offsetHeight/2-b.$.content.offsetHeight/2+"px",b.style.left=f+b._ownerElement.offsetWidth+"px";break;case"absolute":b.style.top=(parseInt(b.offset[1])||0)+"px",b.style.left=(parseInt(b.offset[0])||0)+"px";break;default:b.arrowDirection="bottom",b.style.top=b.style.left="";}}_eventsHandler(a){const b=this;return b.disabled||b.readonly?void 0:"click"===a.type?void(b.visible?this.close():this.open()):void("mouseenter"===a.type||"focus"===a.type?this.open():this.close())}_handleEventListeners(a){const b=this;if(b._ownerElement&&(b._oldOwnerElement&&"manual"!==b.openMode&&(b._oldOwnerElement.$.unlisten("mouseenter.tooltip"),b._oldOwnerElement.$.unlisten("mouseleave.tooltip"),b._oldOwnerElement.$.unlisten("focus.tooltip"),b._oldOwnerElement.$.unlisten("blur.tooltip"),b._oldOwnerElement.$.unlisten("click.tooltip"),b._oldOwnerElement=null),a&&("hover"===a?(b._ownerElement.$.unlisten("mouseenter.tooltip"),b._ownerElement.$.unlisten("mouseleave.tooltip")):"focus"===a?(b._ownerElement.$.unlisten("focus.tooltip"),b._ownerElement.$.unlisten("blur.tooltip")):"click"===a?b._ownerElement.$.unlisten("click.tooltip"):void 0),"manual"!==b.openMode))switch(b._ownerElement instanceof Smart.BaseElement||(b._ownerElement.$=Smart.Utilities.Extend(b._ownerElement)),b.openMode){case"hover":b._ownerElement.$.listen("mouseenter.tooltip",b._eventsHandler.bind(b)),b._ownerElement.$.listen("mouseleave.tooltip",b._eventsHandler.bind(b));break;case"focus":b._ownerElement.$.listen("focus.tooltip",b._eventsHandler.bind(b)),b._ownerElement.$.listen("blur.tooltip",b._eventsHandler.bind(b));break;case"click":b._ownerElement.$.listen("click.tooltip",b._eventsHandler.bind(b));break;default:}}_handleResize(){function a(){b._applyPosition()}const b=this;"click"===b.openMode?window.addEventListener("resize",a):window.removeEventListener("resize",a)}_handleSelector(a){const b=this;return"string"==typeof a?void(b._ownerElement=0<a.length?document.getElementById(a):void 0):a instanceof HTMLElement?void(b._ownerElement=a):null===a?void(b._ownerElement=void 0):void b.error(b.localize("invalidSelector",{elementType:b.nodeName.toLowerCase(),property:"selector"}))}_handleTemplate(a){const c=this;let b=c.tooltipTemplate;if(a&&(c.$.content.innerHTML=c.value?c.value:""),null===b||!b)return;if("function"==typeof c.tooltipTemplate)return void c.tooltipTemplate(c.$.content,{value:c.value});if(!("content"in document.createElement("template")))return void c.error(c.localize("htmlTemplateNotSuported",{elementType:c.nodeName.toLowerCase()}));if(b=document.getElementById(b),null===b||!("content"in b))return void c.error(c.localize("invalidTemplate",{elementType:c.nodeName.toLowerCase(),property:"template"}));const d=b.content,e=d.childNodes.length,f=/{{\w+}}/g;let g,h=[];for(let b=0;b<e;b++)for(g=f.exec(d.childNodes[b].innerHTML);g;)h.push({childNodeIndex:b,bindingString:g[0]}),g=f.exec(d.childNodes[b].innerHTML);const i=h.length;let j,k,l=document.importNode(b.content,!0);for(let d=0;d<i;d++){j=l.childNodes[h[d].childNodeIndex],k=h.length;for(let a=0;a<k;a++)j.innerHTML=j.innerHTML.replace(h[d].bindingString,c.value)}c.$.content.innerHTML="";for(let b=0;b<l.childNodes.length;b++)l.childNodes[b].outerHTML&&(c.$.content.innerHTML+=l.childNodes[b].outerHTML)}});